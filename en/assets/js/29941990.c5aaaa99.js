"use strict";(self.webpackChunkfacturapi_docs=self.webpackChunkfacturapi_docs||[]).push([["89"],{5030:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>l,default:()=>p,toc:()=>d,metadata:()=>a,assets:()=>u,contentTitle:()=>c});var a=JSON.parse('{"id":"guides/customers","title":"Customer registration and validation","description":"Registering your customers in Facturapi allows you to validate their tax information","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/guides/customers.mdx","sourceDirName":"guides","slug":"/guides/customers","permalink":"/en/docs/guides/customers","draft":false,"unlisted":false,"editUrl":"https://github.com/facturapi/facturapi-docs/edit/main/website/docs/guides/customers.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Date formatting","permalink":"/en/docs/getting-started/dates"},"next":{"title":"Customer edit links","permalink":"/en/docs/guides/customer-edit-link"}}'),r=t(5893),i=t(65),o=t(7902),s=t(5525);let l={sidebar_position:1},c="Customer registration and validation",u={},d=[{value:"How to register a customer",id:"how-to-register-a-customer",level:2},{value:"National customers (Mexico)",id:"national-customers-mexico",level:3},{value:"Foreign customers",id:"foreign-customers",level:3}];function m(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.a)(),...e.components},{Details:t}=n;return t||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"customer-registration-and-validation",children:"Customer registration and validation"})}),"\n",(0,r.jsx)(n.p,{children:"Registering your customers in Facturapi allows you to validate their tax information\nand store it for future invoices."}),"\n",(0,r.jsxs)(n.p,{children:["This step is ",(0,r.jsx)(n.strong,{children:"optional"}),", as it is not necessary to have previously registered\nyour customer in order to create invoices. However, we recommend doing it whenever\npossible."]}),"\n",(0,r.jsxs)(n.p,{children:["Once your customer is registered, you can save the ",(0,r.jsx)(n.code,{children:"id"})," of the created object and use it to\ninvoice the same recipient without having to send all their tax information again."]}),"\n",(0,r.jsx)(n.p,{children:"When creating an invoice, you can include the recipient's information in 2 different ways:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["In the ",(0,r.jsx)(n.code,{children:"customer"})," field, by sending an object with the customer's tax information."]}),"\n",(0,r.jsxs)(n.li,{children:["In the ",(0,r.jsx)(n.code,{children:"customer"})," field, by sending the ",(0,r.jsx)(n.code,{children:"id"})," of a previously registered customer."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Both options are valid, and we recommend using the one that best suits your\nuse case."}),"\n",(0,r.jsx)(n.h2,{id:"how-to-register-a-customer",children:"How to register a customer"}),"\n",(0,r.jsx)(n.p,{children:"In Facturapi, the process of registering the tax information of national and\nforeign customers is not very different from each other, but it is worth analyzing them separately,\nas it is different from what the SAT indicates in its technical standard."}),"\n",(0,r.jsx)(n.h3,{id:"national-customers-mexico",children:"National customers (Mexico)"}),"\n",(0,r.jsx)(n.p,{children:"The following example shows how to register a national customer, that is, a\ncustomer (person or company) with a Mexican tax ID (RFC)."}),"\n",(0,r.jsxs)(n.p,{children:["To learn about other data you can include, refer to the\n",(0,r.jsx)(n.a,{href:"/api/#tag/customer/operation/createCustomer",children:"Create Customer API reference"}),"."]}),"\n",(0,r.jsxs)(o.Z,{groupId:"codeExamples",children:[(0,r.jsx)(s.Z,{value:"js",label:"Node.js",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const Facturapi = require('facturapi');\nconst facturapi = new Facturapi('sk_test_API_KEY');\n\nconst customer = await facturapi.customers.create({\n  legal_name: 'Dunder Mifflin', // Person's name or business legal name\n  tax_id: 'ABC101010111', // RFC\n  tax_system: '601', // Fiscal regime\n  email: 'email@example.com', // Email for sending (optional).\n  address: {\n    zip: '85900', // Postal code\n  }\n});\n"})})}),(0,r.jsx)(s.Z,{value:"cs",label:"C#",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'var facturapi = new FacturapiClient("sk_test_API_KEY");\n\nvar customer = await facturapi.Customer.CreateAsync(new Dictionary<string, object>\n{\n  ["legal_name"] = "Dunder Mifflin", // Person\'s name or business legal name\n  ["tax_id"] = "ABC101010111", // RFC\n  ["tax_system"] = "601", // Fiscal regime\n  ["email"] = "email@example.com", // Email for sending (optional).\n  ["address"] = new Dictionary<string, object>\n  {\n    ["zip"] = "85900", // Postal code\n  }\n});\n'})})}),(0,r.jsx)(s.Z,{value:"php",label:"PHP",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:'$facturapi = new FacturapiClient("sk_test_API_KEY");\n\n$customer = $facturapi->Customers->create([\n  "legal_name" => "Dunder Mifflin", // Person\'s name or business legal name\n  "tax_id" => "ABC101010111", // RFC\n  "tax_system" => "601", // Fiscal regime\n  "email" => "walterwhite@gmail.com", // Email for sending (optional).\n  "address" => [\n    "zip" => "85900", // Postal code\n  ]\n]);\n'})})}),(0,r.jsx)(s.Z,{value:"curl",label:"cURL",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl https://www.facturapi.io/v2/customers \\\n  -H "Authorization: Bearer sk_test_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n      "legal_name": "Dunder Mifflin", // Person\'s name or business legal name\n      "email": "email@example.com", // Email for sending (optional).\n      "tax_id": "ABC101010111", // RFC\n      "tax_system": "601", // Fiscal regime\n      "address": {\n        "zip": "85900" // Postal code\n      }\n    }\'\n'})})})]}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Respuesta: Customer object"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "590ce6c56d04f840aa8438af",\n  "created_at": "2017-05-05T20:55:33.468Z",\n  "organization": "622a33e6f0175a00e01a8e80",\n  "livemode": false,\n  "legal_name": "Dunder Mifflin",\n  "tax_id": "ABC101010111",\n  "tax_system": "601",\n  "email": "email@example.com",\n  "phone": 6474010101,\n  "address": {\n    "street": null,\n    "exterior": null,\n    "interior": null,\n    "neighborhood": null,\n    "city": "Huatabampo",\n    "municipality": "Huatabampo",\n    "zip": 86500,\n    "state": "Sonora",\n    "country": "MEX"\n  }\n}\n'})})]}),"\n",(0,r.jsx)(n.h3,{id:"foreign-customers",children:"Foreign customers"}),"\n",(0,r.jsxs)(n.p,{children:["To register a foreign customer, it is necessary to specify the country of\norigin by sending the ",(0,r.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3",children:"ISO country code"}),"\nof the origin country using the ",(0,r.jsx)(n.code,{children:"country"})," field."]}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsxs)(n.p,{children:["You don't need to use the generic RFC for foreigners from SAT. We will\ntake care of it for you wherever necessary, as long as you send a value\nother than ",(0,r.jsx)(n.code,{children:'"MEX"'})," for the ",(0,r.jsx)(n.code,{children:"country"})," field."]})}),"\n",(0,r.jsxs)(n.p,{children:["To learn about other data you can include, refer to the\n",(0,r.jsx)(n.a,{href:"/api/#tag/customer/operation/createCustomer",children:"Create Customer API reference"}),"."]}),"\n",(0,r.jsxs)(o.Z,{groupId:"codeExamples",children:[(0,r.jsx)(s.Z,{value:"js",label:"Node.js",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const Facturapi = require('facturapi');\nconst facturapi = new Facturapi('sk_test_API_KEY');\n\nconst customer = await facturapi.customers.create({\n  legal_name: 'V\xe4ttenfall, A.B.', // Person's name or business legal name\n  tax_id: '198912171234', // Tax identification number (optional)\n  email: 'email@example.com', // Email for sending (optional).\n  address: {\n    country: \"SWE\", // ISO country code.\n    zip: \"17123\", // Postal code\n    city: \"Stockholm\" // City (optional).\n  }\n});\n"})})}),(0,r.jsx)(s.Z,{value:"cs",label:"C#",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'var facturapi = new FacturapiClient("sk_test_API_KEY");\n\nvar customer = await facturapi.Customer.CreateAsync(new Dictionary<string, object>\n{\n  ["legal_name"] = "V\xe4ttenfall, A.B.", // Person\'s name or business legal name\n  ["tax_id"] = "198912171234", // Tax identification number (optional)\n  ["email"] = "email@example.com", // Email for sending (optional).\n  ["address"] = new Dictionary<string, object>\n  {\n    ["country"] = "SWE", // ISO country code.\n    ["zip"] = "17123", // Postal code\n    ["city"] = "Stockholm" // City (optional).\n  }\n});\n'})})}),(0,r.jsx)(s.Z,{value:"php",label:"PHP",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:'$facturapi = new FacturapiClient("sk_test_API_KEY");\n$customer = $facturapi->Customers->create([\n  "legal_name" => "V\xe4ttenfall, A.B.", // Person\'s name or business legal name\n  "tax_id" => "198912171234", // Tax identification number (optional)\n  "email" => "email@example.com", // Email for sending (optional).\n  "address" => [\n    "country" => "SWE", // ISO country code.\n    "zip" => "17123", // Postal code\n    "city" => "Stockholm" // City (optional).\n  ]\n]);\n'})})}),(0,r.jsx)(s.Z,{value:"curl",label:"cURL",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl https://www.facturapi.io/v1/customers \\\n  -H "Authorization: Bearer sk_test_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n      "legal_name": "V\xe4ttenfall, A.B.", // Person\'s name or business legal name\n      "tax_id": "198912171234", // Tax identification number (optional)\n      "email": "email@example.com", // Email for sending (optional).\n      "address": {\n        "country": "SWE", // ISO country code.\n        "zip": "17123", // Postal code\n        "city": "Stockholm" // City (optional).\n      }\n    }\'\n'})})})]}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Respuesta: Customer object"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "62714bc2d1bfa410df1d98eb",\n  "created_at": "2022-05-03T15:35:30.034Z",\n  "organization": "622a33e6f0175a00e01a8e80",\n  "livemode": false,\n  "legal_name": "V\xe4ttenfall, A.B.",\n  "tax_id": "198912171234",\n  "email": "email@example.com",\n  "address": {\n    "country": "SWE",\n    "zip": "17123",\n    "city": "Stockholm"\n  },\n}\n'})})]})]})}function p(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},5525:function(e,n,t){t.d(n,{Z:()=>i});var a=t(5893);t(7294);var r=t(7026);function i({children:e,hidden:n,className:t}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.Z)("tabItem_Ymn6",t),hidden:n,children:e})}},7902:function(e,n,t){t.d(n,{Z:()=>j});var a=t(5893),r=t(7294),i=t(7026),o=t(9599),s=t(6550),l=t(2e3),c=t(4520),u=t(8341),d=t(6009);function m(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){let{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p({value:e,tabValues:n}){return n.some(n=>n.value===e)}var h=t(7227);function f({className:e,block:n,selectedValue:t,selectValue:r,tabValues:s}){let l=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.o5)(),u=e=>{let n=e.currentTarget,a=s[l.indexOf(n)].value;a!==t&&(c(n),r(a))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{let t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{let t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1]}}n?.focus()};return(0,a.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":n},e),children:s.map(({value:e,label:n,attributes:r})=>(0,a.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{l.push(e)},onKeyDown:d,onClick:u,...r,className:(0,i.Z)("tabs__item","tabItem_LNqP",r?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function g({lazy:e,children:n,selectedValue:t}){let o=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){let e=o.find(e=>e.props.value===t);return e?(0,r.cloneElement)(e,{className:(0,i.Z)("margin-top--md",e.props.className)}):null}return(0,a.jsx)("div",{className:"margin-top--md",children:o.map((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function x(e){let n=function(e){let{defaultValue:n,queryString:t=!1,groupId:a}=e,i=function(e){let{values:n,children:t}=e;return(0,r.useMemo)(()=>{let e=n??m(t).map(({props:{value:e,label:n,attributes:t,default:a}})=>({value:e,label:n,attributes:t,default:a})),a=(0,u.lx)(e,(e,n)=>e.value===n.value);if(a.length>0)throw Error(`Docusaurus error: Duplicate values "${a.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[n,t])}(e),[o,h]=(0,r.useState)(()=>(function({defaultValue:e,tabValues:n}){if(0===n.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let t=n.find(e=>e.default)??n[0];if(!t)throw Error("Unexpected error: 0 tabValues");return t.value})({defaultValue:n,tabValues:i})),[f,g]=function({queryString:e=!1,groupId:n}){let t=(0,s.k6)(),a=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c._X)(a),(0,r.useCallback)(e=>{if(!a)return;let n=new URLSearchParams(t.location.search);n.set(a,e),t.replace({...t.location,search:n.toString()})},[a,t])]}({queryString:t,groupId:a}),[x,j]=function({groupId:e}){let n=e?`docusaurus.tab.${e}`:null,[t,a]=(0,d.Nk)(n);return[t,(0,r.useCallback)(e=>{n&&a.set(e)},[n,a])]}({groupId:a}),b=(()=>{let e=f??x;return p({value:e,tabValues:i})?e:null})();return(0,l.Z)(()=>{b&&h(b)},[b]),{selectedValue:o,selectValue:(0,r.useCallback)(e=>{if(!p({value:e,tabValues:i}))throw Error(`Can't select invalid tab value=${e}`);h(e),g(e),j(e)},[g,j,i]),tabValues:i}}(e);return(0,a.jsxs)("div",{className:(0,i.Z)("tabs-container","tabList__CuJ"),children:[(0,a.jsx)(f,{...n,...e}),(0,a.jsx)(g,{...n,...e})]})}function j(e){let n=(0,h.Z)();return(0,a.jsx)(x,{...e,children:m(e.children)},String(n))}},65:function(e,n,t){t.d(n,{Z:()=>s,a:()=>o});var a=t(7294);let r={},i=a.createContext(r);function o(e){let n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);