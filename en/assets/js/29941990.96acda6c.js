"use strict";(self.webpackChunkfacturapi_docs=self.webpackChunkfacturapi_docs||[]).push([["1251"],{20256:function(e,n,a){a.r(n),a.d(n,{frontMatter:()=>l,toc:()=>d,default:()=>h,metadata:()=>t,assets:()=>u,contentTitle:()=>c});var t=JSON.parse('{"id":"guides/customers","title":"Customer registration and validation","description":"Registering your customers in Facturapi allows you to validate their tax information","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/guides/customers.mdx","sourceDirName":"guides","slug":"/guides/customers","permalink":"/en/docs/guides/customers","draft":false,"unlisted":false,"editUrl":"https://github.com/facturapi/facturapi-docs/edit/main/website/docs/guides/customers.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Date formatting","permalink":"/en/docs/getting-started/dates"},"next":{"title":"Customer edit links","permalink":"/en/docs/guides/customer-edit-link"}}'),r=a(74848),i=a(84429),s=a(84109),o=a(93703);let l={sidebar_position:1},c="Customer registration and validation",u={},d=[{value:"How to register a customer",id:"how-to-register-a-customer",level:2},{value:"National customers (Mexico)",id:"national-customers-mexico",level:3},{value:"Foreign customers",id:"foreign-customers",level:3},{value:"Create customer with edit link",id:"create-customer-with-edit-link",level:2}];function m(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components},{Details:a}=n;return a||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"customer-registration-and-validation",children:"Customer registration and validation"})}),"\n",(0,r.jsx)(n.p,{children:"Registering your customers in Facturapi allows you to validate their tax information\nand store it for future invoices."}),"\n",(0,r.jsxs)(n.p,{children:["This step is ",(0,r.jsx)(n.strong,{children:"optional"}),", as it is not necessary to have previously registered\nyour customer in order to create invoices. However, we recommend doing it whenever\npossible."]}),"\n",(0,r.jsxs)(n.p,{children:["Once your customer is registered, you can save the ",(0,r.jsx)(n.code,{children:"id"})," of the created object and use it to\ninvoice the same recipient without having to send all their tax information again."]}),"\n",(0,r.jsx)(n.p,{children:"When creating an invoice, you can include the recipient's information in 2 different ways:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["In the ",(0,r.jsx)(n.code,{children:"customer"})," field, by sending an object with the customer's tax information."]}),"\n",(0,r.jsxs)(n.li,{children:["In the ",(0,r.jsx)(n.code,{children:"customer"})," field, by sending the ",(0,r.jsx)(n.code,{children:"id"})," of a previously registered customer."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Both options are valid, and we recommend using the one that best suits your\nuse case."}),"\n",(0,r.jsx)(n.h2,{id:"how-to-register-a-customer",children:"How to register a customer"}),"\n",(0,r.jsx)(n.p,{children:"In Facturapi, the process of registering the tax information of national and\nforeign customers is not very different from each other, but it is worth analyzing them separately,\nas it is different from what the SAT indicates in its technical standard."}),"\n",(0,r.jsx)(n.h3,{id:"national-customers-mexico",children:"National customers (Mexico)"}),"\n",(0,r.jsx)(n.p,{children:"The following example shows how to register a national customer, that is, a\ncustomer (person or company) with a Mexican tax ID (RFC)."}),"\n",(0,r.jsxs)(n.p,{children:["To learn about other data you can include, refer to the\n",(0,r.jsx)(n.a,{href:"/api/#tag/customer/operation/createCustomer",children:"Create Customer API reference"}),"."]}),"\n",(0,r.jsxs)(s.A,{groupId:"codeExamples",children:[(0,r.jsx)(o.A,{value:"js",label:"Node.js",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"import Facturapi from 'facturapi'\nconst facturapi = new Facturapi('sk_test_API_KEY');\n\nconst customer = await facturapi.customers.create({\n  legal_name: 'Dunder Mifflin', // Person's name or business legal name\n  tax_id: 'ABC101010111', // RFC\n  tax_system: '601', // Fiscal regime\n  email: 'email@example.com', // Email for sending (optional).\n  address: {\n    zip: '85900', // Postal code\n  }\n});\n"})})}),(0,r.jsx)(o.A,{value:"cs",label:"C#",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'var facturapi = new FacturapiClient("sk_test_API_KEY");\n\nvar customer = await facturapi.Customer.CreateAsync(new Dictionary<string, object>\n{\n  ["legal_name"] = "Dunder Mifflin", // Person\'s name or business legal name\n  ["tax_id"] = "ABC101010111", // RFC\n  ["tax_system"] = "601", // Fiscal regime\n  ["email"] = "email@example.com", // Email for sending (optional).\n  ["address"] = new Dictionary<string, object>\n  {\n    ["zip"] = "85900", // Postal code\n  }\n});\n'})})}),(0,r.jsx)(o.A,{value:"php",label:"PHP",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:'$facturapi = new FacturapiClient("sk_test_API_KEY");\n\n$customer = $facturapi->Customers->create([\n  "legal_name" => "Dunder Mifflin", // Person\'s name or business legal name\n  "tax_id" => "ABC101010111", // RFC\n  "tax_system" => "601", // Fiscal regime\n  "email" => "walterwhite@gmail.com", // Email for sending (optional).\n  "address" => [\n    "zip" => "85900", // Postal code\n  ]\n]);\n'})})}),(0,r.jsx)(o.A,{value:"curl",label:"cURL",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl https://www.facturapi.io/v2/customers \\\n  -H "Authorization: Bearer sk_test_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n      "legal_name": "Dunder Mifflin", // Person\'s name or business legal name\n      "email": "email@example.com", // Email for sending (optional).\n      "tax_id": "ABC101010111", // RFC\n      "tax_system": "601", // Fiscal regime\n      "address": {\n        "zip": "85900" // Postal code\n      }\n    }\'\n'})})})]}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Respuesta: Customer object"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "590ce6c56d04f840aa8438af",\n  "created_at": "2017-05-05T20:55:33.468Z",\n  "organization": "622a33e6f0175a00e01a8e80",\n  "livemode": false,\n  "legal_name": "Dunder Mifflin",\n  "tax_id": "ABC101010111",\n  "tax_system": "601",\n  "email": "email@example.com",\n  "phone": 6474010101,\n  "address": {\n    "street": null,\n    "exterior": null,\n    "interior": null,\n    "neighborhood": null,\n    "city": "Huatabampo",\n    "municipality": "Huatabampo",\n    "zip": 86500,\n    "state": "Sonora",\n    "country": "MEX"\n  }\n}\n'})})]}),"\n",(0,r.jsx)(n.h3,{id:"foreign-customers",children:"Foreign customers"}),"\n",(0,r.jsxs)(n.p,{children:["To register a foreign customer, it is necessary to specify the country of\norigin by sending the ",(0,r.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3",children:"ISO country code"}),"\nof the origin country using the ",(0,r.jsx)(n.code,{children:"country"})," field."]}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsxs)(n.p,{children:["You don't need to use the generic RFC for foreigners from SAT. We will\ntake care of it for you wherever necessary, as long as you send a value\nother than ",(0,r.jsx)(n.code,{children:'"MEX"'})," for the ",(0,r.jsx)(n.code,{children:"country"})," field."]})}),"\n",(0,r.jsxs)(n.p,{children:["To learn about other data you can include, refer to the\n",(0,r.jsx)(n.a,{href:"/api/#tag/customer/operation/createCustomer",children:"Create Customer API reference"}),"."]}),"\n",(0,r.jsxs)(s.A,{groupId:"codeExamples",children:[(0,r.jsx)(o.A,{value:"js",label:"Node.js",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"import Facturapi from 'facturapi'\nconst facturapi = new Facturapi('sk_test_API_KEY');\n\nconst customer = await facturapi.customers.create({\n  legal_name: 'V\xe4ttenfall, A.B.', // Person's name or business legal name\n  tax_id: '198912171234', // Tax identification number (optional)\n  email: 'email@example.com', // Email for sending (optional).\n  address: {\n    country: \"SWE\", // ISO country code.\n    zip: \"17123\", // Postal code\n    city: \"Stockholm\" // City (optional).\n  }\n});\n"})})}),(0,r.jsx)(o.A,{value:"cs",label:"C#",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'var facturapi = new FacturapiClient("sk_test_API_KEY");\n\nvar customer = await facturapi.Customer.CreateAsync(new Dictionary<string, object>\n{\n  ["legal_name"] = "V\xe4ttenfall, A.B.", // Person\'s name or business legal name\n  ["tax_id"] = "198912171234", // Tax identification number (optional)\n  ["email"] = "email@example.com", // Email for sending (optional).\n  ["address"] = new Dictionary<string, object>\n  {\n    ["country"] = "SWE", // ISO country code.\n    ["zip"] = "17123", // Postal code\n    ["city"] = "Stockholm" // City (optional).\n  }\n});\n'})})}),(0,r.jsx)(o.A,{value:"php",label:"PHP",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:'$facturapi = new FacturapiClient("sk_test_API_KEY");\n$customer = $facturapi->Customers->create([\n  "legal_name" => "V\xe4ttenfall, A.B.", // Person\'s name or business legal name\n  "tax_id" => "198912171234", // Tax identification number (optional)\n  "email" => "email@example.com", // Email for sending (optional).\n  "address" => [\n    "country" => "SWE", // ISO country code.\n    "zip" => "17123", // Postal code\n    "city" => "Stockholm" // City (optional).\n  ]\n]);\n'})})}),(0,r.jsx)(o.A,{value:"curl",label:"cURL",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl https://www.facturapi.io/v1/customers \\\n  -H "Authorization: Bearer sk_test_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n      "legal_name": "V\xe4ttenfall, A.B.", // Person\'s name or business legal name\n      "tax_id": "198912171234", // Tax identification number (optional)\n      "email": "email@example.com", // Email for sending (optional).\n      "address": {\n        "country": "SWE", // ISO country code.\n        "zip": "17123", // Postal code\n        "city": "Stockholm" // City (optional).\n      }\n    }\'\n'})})})]}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Respuesta: Customer object"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "62714bc2d1bfa410df1d98eb",\n  "created_at": "2022-05-03T15:35:30.034Z",\n  "organization": "622a33e6f0175a00e01a8e80",\n  "livemode": false,\n  "legal_name": "V\xe4ttenfall, A.B.",\n  "tax_id": "198912171234",\n  "email": "email@example.com",\n  "address": {\n    "country": "SWE",\n    "zip": "17123",\n    "city": "Stockholm"\n  },\n}\n'})})]}),"\n",(0,r.jsx)(n.h2,{id:"create-customer-with-edit-link",children:"Create customer with edit link"}),"\n",(0,r.jsxs)(n.p,{children:["Depending on your workflow, you can create a customer by providing only the email address and the parameter ",(0,r.jsx)(n.code,{children:"createEditLink: true"}),". This generates a link that you can send to the customer so they can complete their own tax information."]}),"\n",(0,r.jsxs)(s.A,{groupId:"editLinkExamples",children:[(0,r.jsx)(o.A,{value:"js",label:"Node.js",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'const customer = await facturapi.customers.create({\n  email: "customer@example.com"\n}, {\n  createEditLink: true\n});\n'})})}),(0,r.jsx)(o.A,{value:"cs",label:"C#",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'var customer = await facturapi.Customer.CreateAsync(new Dictionary<string, object>\n{\n  ["email"] = "customer@example.com"\n}, new Dictionary<string, object>\n{\n  ["createEditLink"] = true\n});\n'})})}),(0,r.jsx)(o.A,{value:"php",label:"PHP",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:'$customer = $facturapi->Customers->create([\n  "email" => "customer@example.com"\n], [\n  "createEditLink" => true\n]);\n'})})}),(0,r.jsx)(o.A,{value:"curl",label:"cURL",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl https://www.facturapi.io/v2/customers \\\n  -H "Authorization: Bearer sk_test_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n      "email": "customer@example.com"\n    }\' \\\n  -G --data-urlencode \'createEditLink=true\'\n'})})})]}),"\n",(0,r.jsxs)(n.p,{children:["The response object will include the ",(0,r.jsx)(n.code,{children:"edit_link"})," field, which is the link you can send to the customer by email:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "62714bc2d1bfa410df1d98eb",\n  "email": "customer@example.com",\n  "edit_link": "https://auto.facturapi.io/tax-info/abcd1234"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"You can send this link to the customer using your own email system, so they can complete their tax information directly in Facturapi."}),"\n",(0,r.jsxs)(s.A,{groupId:"sendEditLinkExamples",children:[(0,r.jsx)(o.A,{value:"js",label:"Node.js",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'await facturapi.customers.sendEditLinkByEmail("62714bc2d1bfa410df1d98eb", {\n  email: "customer@example.com" // Optional, if not included the customer\'s email will be used\n});\n'})})}),(0,r.jsx)(o.A,{value:"cs",label:"C#",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'await facturapi.Customer.SendEditLinkByEmailAsync("62714bc2d1bfa410df1d98eb", new Dictionary<string, object>\n{\n  ["email"] = "customer@example.com" // Optional, if not included the customer\'s email will be used\n});\n'})})}),(0,r.jsx)(o.A,{value:"php",label:"PHP",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:'$facturapi->Customers->sendEditLinkByEmail("62714bc2d1bfa410df1d98eb", [\n  "email" => "customer@example.com" // Optional, if not included the customer\'s email will be used\n]);\n'})})}),(0,r.jsx)(o.A,{value:"curl",label:"cURL",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://www.facturapi.io/v2/customers/62714bc2d1bfa410df1d98eb/email-edit-link \\\n  -H "Authorization: Bearer sk_test_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n      "email": "customer@example.com" // Optional, if not included the customer\'s email will be used\n    }\'\n'})})})]})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},93703:function(e,n,a){a.d(n,{A:()=>i});var t=a(74848);a(96540);var r=a(39836);function i({children:e,hidden:n,className:a}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,r.A)("tabItem_Ymn6",a),hidden:n,children:e})}},84109:function(e,n,a){a.d(n,{A:()=>b});var t=a(74848),r=a(96540),i=a(39836),s=a(16364),o=a(68251),l=a(56347),c=a(28004),u=a(25580),d=a(12213),m=a(75734);function h(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){let{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p({value:e,tabValues:n}){return n.some(n=>n.value===e)}var f=a(98864);function x({className:e,block:n,selectedValue:a,selectValue:r,tabValues:s}){let l=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.a_)(),u=e=>{let n=e.currentTarget,t=s[l.indexOf(n)].value;t!==a&&(c(n),r(t))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{let a=l.indexOf(e.currentTarget)+1;n=l[a]??l[0];break}case"ArrowLeft":{let a=l.indexOf(e.currentTarget)-1;n=l[a]??l[l.length-1]}}n?.focus()};return(0,t.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},e),children:s.map(({value:e,label:n,attributes:r})=>(0,t.jsx)("li",{role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,ref:e=>{l.push(e)},onKeyDown:d,onClick:u,...r,className:(0,i.A)("tabs__item","tabItem_LNqP",r?.className,{"tabs__item--active":a===e}),children:n??e},e))})}function g({lazy:e,children:n,selectedValue:a}){let s=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){let e=s.find(e=>e.props.value===a);return e?(0,r.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,t.jsx)("div",{className:"margin-top--md",children:s.map((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a}))})}function j(e){let n=function(e){let n,{defaultValue:a,queryString:t=!1,groupId:i}=e,s=function(e){let{values:n,children:a}=e;return(0,r.useMemo)(()=>{let e=n??h(a).map(({props:{value:e,label:n,attributes:a,default:t}})=>({value:e,label:n,attributes:a,default:t})),t=(0,d.XI)(e,(e,n)=>e.value===n.value);if(t.length>0)throw Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[n,a])}(e),[o,f]=(0,r.useState)(()=>(function({defaultValue:e,tabValues:n}){if(0===n.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let a=n.find(e=>e.default)??n[0];if(!a)throw Error("Unexpected error: 0 tabValues");return a.value})({defaultValue:a,tabValues:s})),[x,g]=function({queryString:e=!1,groupId:n}){let a=(0,l.W6)(),t=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,u.aZ)(t),(0,r.useCallback)(e=>{if(!t)return;let n=new URLSearchParams(a.location.search);n.set(t,e),a.replace({...a.location,search:n.toString()})},[t,a])]}({queryString:t,groupId:i}),[j,b]=function({groupId:e}){let n=e?`docusaurus.tab.${e}`:null,[a,t]=(0,m.Dv)(n);return[a,(0,r.useCallback)(e=>{n&&t.set(e)},[n,t])]}({groupId:i}),y=p({value:n=x??j,tabValues:s})?n:null;return(0,c.A)(()=>{y&&f(y)},[y]),{selectedValue:o,selectValue:(0,r.useCallback)(e=>{if(!p({value:e,tabValues:s}))throw Error(`Can't select invalid tab value=${e}`);f(e),g(e),b(e)},[g,b,s]),tabValues:s}}(e);return(0,t.jsxs)("div",{className:(0,i.A)(s.G.tabs.container,"tabs-container","tabList__CuJ"),children:[(0,t.jsx)(x,{...n,...e}),(0,t.jsx)(g,{...n,...e})]})}function b(e){let n=(0,f.A)();return(0,t.jsx)(j,{...e,children:h(e.children)},String(n))}},84429:function(e,n,a){a.d(n,{R:()=>s,x:()=>o});var t=a(96540);let r={},i=t.createContext(r);function s(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);