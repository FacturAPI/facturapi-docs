openapi: "3.0.1"
servers:
  - url: https://www.facturapi.io/v1
info:
  title: Facturapi
  version: "1.0"
  contact:
    name: Facturapi
    url: https://www.facturapi.io
    email: "soporte@facturapi.io"
  x-logo:
    url: https://www.facturapi.io/img/logo.svg
    altText: Facturapi
  description: |
    # üöß Aviso sobre /v1
    **La versi√≥n 1 de la API (`/v1`) ya no debe usarse**.
    En su lugar utiliza la [versi√≥n 2](/api), que te permite emitir CFDI v4.0.

    La versi√≥n 1 de la API dej√≥ de estar disponible cuando el SAT
    termin√≥ con la vigencia del CFDI 3.3, el 01 de Abril de 2023.

    Si tu integraci√≥n est√° basada en la **v1** de la API, puedes realizar la
    migraci√≥n a la **v2** siguiendo los pasos en [esta gu√≠a](/docs/migrate).

tags:
  - name: tools
    x-displayName: Herramientas
  - name: customer
    x-displayName: Clientes
  - name: product
    x-displayName: Productos
  - name: invoice
    x-displayName: Facturas
  - name: receipt
    x-displayName: Recibos
  - name: retention
    x-displayName: Retenciones
  - name: organization
    x-displayName: Organizaciones
  - name: sat_keys
    x-displayName: Claves de cat√°logos
    description: |
      Principales cat√°logos del SAT, inclu√≠dos aqu√≠ por conveniencia. Puedes consultar estos y m√°s cat√°logos desde el portal oficial del SAT: http://omawww.sat.gob.mx/tramitesyservicios/Paginas/anexo_20_version3-3.htm

      ### Forma de pago

      C√≥digo | Descripci√≥n
      :-----:| -----------
      "01" | Efectivo
      "02" | Cheque nominativo
      "03" | Transferencia electr√≥nica de fondos
      "04" | Tarjeta de cr√©dito
      "05" | Monedero electr√≥nico
      "06" | Dinero electr√≥nico
      "08" | Vales de despensa
      "12" | Daci√≥n en pago
      "13" | Pago por subrogaci√≥n
      "14" | Pago por consignaci√≥n
      "15" | Condonaci√≥n
      "17" | Compensaci√≥n
      "23" | Novaci√≥n
      "24" | Confusi√≥n
      "25" | Remisi√≥n de deuda
      "26" | Prescripci√≥n o caducidad
      "27" | A satisfacci√≥n del acreedor
      "28" | Tarjeta de d√©bito
      "29" | Tarjeta de servicios
      "30" | Aplicaci√≥n de anticipos
      "31" | Intermediario pagos
      "99" | Por definir

      ### M√©todo de pago

      C√≥digo | Descripci√≥n
      :-----:| -----------
      "PUE" | Pago en una sola exhibici√≥n (de contado).
      "PPD" | Pago en parcialidades o diferido (total o parcialmente a cr√©dito). Requiere expedir un comprobante de pago cuando se reciba un pago subsecuente.

      ### Uso CFDI

      C√≥digo | Descripci√≥n
      :-----:| -----------
      "G01" |	Adquisici√≥n de mercancias.
      "G02" |	Devoluciones, descuentos o bonificaciones.
      "G03" |	Gastos en general.
      "I01" |	Construcciones.
      "I02" |	Mobilario y equipo de oficina por inversiones.
      "I03" |	Equipo de transporte.
      "I04" |	Equipo de computo y accesorios.
      "I05" |	Dados, troqueles, moldes, matrices y herramental.
      "I06" |	Comunicaciones telef√≥nicas.
      "I07" |	Comunicaciones satelitales.
      "I08" |	Otra maquinaria y equipo.
      "D01" |	Honorarios m√©dicos, dentales y gastos hospitalarios.
      "D02" |	Gastos m√©dicos por incapacidad o discapacidad.
      "D03" |	Gastos funerales.
      "D04" |	Donativos.
      "D05" |	Intereses reales efectivamente pagados por cr√©ditos hipotecarios (casa habitaci√≥n).
      "D06" |	Aportaciones voluntarias al SAR.
      "D07" |	Primas por seguros de gastos m√©dicos.
      "D08" |	Gastos de transportaci√≥n escolar obligatoria.
      "D09" |	Dep√≥sitos en cuentas para el ahorro, primas que tengan como base planes de pensiones.
      "D10" |	Pagos por servicios educativos (colegiaturas).
      "P01" |	Por definir.

      ### Relaci√≥n entre facturas

      C√≥digo | Descripci√≥n
      :-----:| -----------
      "01" | Nota de cr√©dito de los documentos relacionados
      "02" | Nota de d√©bito de los documentos relacionados
      "03" | Devoluci√≥n de mercanc√≠a sobre facturas o traslados previos
      "04" | Sustituci√≥n de los CFDI previos
      "05" | Traslados de mercancias facturados previamente
      "06" | Factura generada por los traslados previos
      "07" | CFDI por aplicaci√≥n de anticipo
      "08" | Factura generada por pagos en parcialidades
      "09" | Factura generada por pagos diferidos

      ### R√©gimen Fiscal

      C√≥digo | Descripci√≥n
      :-----:| -----------
      "601" |	General de Ley Personas Morales
      "603" |	Personas Morales con Fines no Lucrativos
      "605" |	Sueldos y Salarios e Ingresos Asimilados a Salarios
      "606" |	Arrendamiento
      "608" |	Dem√°s ingresos
      "609" |	Consolidaci√≥n
      "610" |	Residentes en el Extranjero sin Establecimiento Permanente en M√©xico
      "611" |	Ingresos por Dividendos (socios y accionistas)
      "612" |	Personas F√≠sicas con Actividades Empresariales y Profesionales
      "614" |	Ingresos por intereses
      "616" |	Sin obligaciones fiscales
      "620" |	Sociedades Cooperativas de Producci√≥n que optan por diferir sus ingresos
      "621" |	Incorporaci√≥n Fiscal
      "622" |	Actividades Agr√≠colas, Ganaderas, Silv√≠colas y Pesqueras
      "623" |	Opcional para Grupos de Sociedades
      "624" |	Coordinados
      "628" |	Hidrocarburos
      "607" |	R√©gimen de Enajenaci√≥n o Adquisici√≥n de Bienes
      "629" |	De los Reg√≠menes Fiscales Preferentes y de las Empresas Multinacionales
      "630" |	Enajenaci√≥n de acciones en bolsa de valores
      "615" |	R√©gimen de los ingresos por obtenci√≥n de premios
      "625" |	R√©gimen de las Actividades Empresariales con ingresos a trav√©s de Plataformas Tecnol√≥gicas
      "626" | R√©gimen Simplificado de Confianza

      ### Tipo de Contrato

      C√≥digo | Descripci√≥n
      :-----:| -----------
      "01" | Contrato de trabajo por tiempo indeterminado
      "02" | Contrato de trabajo para obra determinada
      "03" | Contrato de trabajo por tiempo determinado
      "04" | Contrato de trabajo por temporada
      "05" | Contrato de trabajo sujeto a prueba
      "06" | Contrato de trabajo con capacitaci√≥n inicial
      "07" | Modalidad de contrataci√≥n por pago de hora laborada
      "08" | Modalidad de trabajo por comisi√≥n laboral
      "09" | Modalidades de contrataci√≥n donde no existe relaci√≥n de trabajo
      "10" | Jubilaci√≥n, pensi√≥n, retiro.
      "99" | Otro contrato

      ### Tipo de Jornada

      C√≥digo | Descripci√≥n
      :-----:| -----------
      "01" | Diurna
      "02" | Nocturna
      "03" | Mixta
      "04" | Por hora
      "05" | Reducida
      "06" | Continuada
      "07" | Partida
      "08" | Por turnos
      "99" | Otra Jornada

      ### Tipo de R√©gimen

      C√≥digo | Descripci√≥n
      :-----:| -----------
      "02" | Sueldos (Incluye ingresos se√±alados en la fracci√≥n I del art√≠culo 94 de LISR)
      "03" | Jubilados
      "04" | Pensionados
      "05" | Asimilados Miembros Sociedades Cooperativas Produccion
      "06" | Asimilados Integrantes Sociedades Asociaciones Civiles
      "07" | Asimilados Miembros consejos
      "08" | Asimilados comisionistas
      "09" | Asimilados Honorarios
      "10" | Asimilados acciones
      "11" | Asimilados otros
      "12" | Jubilados o Pensionados
      "13" | Indemnizaci√≥n o Separaci√≥n
      "99" | Otro Regimen

      ### Riesgo del Puesto

      C√≥digo | Descripci√≥n
      :-----:| -----------
      "1" | Clase I
      "2" | Clase II
      "3" | Clase III
      "4" | Clase IV
      "5" | Clase V
      "99" | No aplica

      ### Periodicidad del Pago

      C√≥digo | Descripci√≥n
      :-----:| -----------
      "01" | Diario
      "02" | Semanal
      "03" | Catorcenal
      "04" | Quincenal
      "05" | Mensual
      "06" | Bimestral
      "07" | Unidad obra
      "08" | Comisi√≥n
      "09" | Precio alzado
      "10" | Decenal
      "99" | Otra Periodicidad

      ### Tipo de Percepci√≥n

      C√≥digo | Descripci√≥n
      :-----:| -----------
      "001" | Sueldos, Salarios  Rayas y Jornales
      "002" | Gratificaci√≥n Anual (Aguinaldo)
      "003" | Participaci√≥n de los Trabajadores en las Utilidades PTU
      "004" | Reembolso de Gastos M√©dicos Dentales y Hospitalarios
      "005" | Fondo de Ahorro
      "006" | Caja de ahorro
      "009" | Contribuciones a Cargo del Trabajador Pagadas por el Patr√≥n
      "010" | Premios por puntualidad
      "011" | Prima de Seguro de vida
      "012" | Seguro de Gastos M√©dicos Mayores
      "013" | Cuotas Sindicales Pagadas por el Patr√≥n
      "014" | Subsidios por incapacidad
      "015" | Becas para trabajadores y/o hijos
      "019" | Horas extra
      "020" | Prima dominical
      "021" | Prima vacacional
      "022" | Prima por antig√ºedad
      "023" | Pagos por separaci√≥n
      "024" | Seguro de retiro
      "025" | Indemnizaciones
      "026" | Reembolso por funeral
      "027" | Cuotas de seguridad social pagadas por el patr√≥n
      "028" | Comisiones
      "029" | Vales de despensa
      "030" | Vales de restaurante
      "031" | Vales de gasolina
      "032" | Vales de ropa
      "033" | Ayuda para renta
      "034" | Ayuda para art√≠culos escolares
      "035" | Ayuda para anteojos
      "036" | Ayuda para transporte
      "037" | Ayuda para gastos de funeral
      "038" | Otros ingresos por salarios
      "039" | Jubilaciones, pensiones o haberes de retiro
      "044" | Jubilaciones, pensiones o haberes de retiro en parcialidades
      "045" | Ingresos en acciones o t√≠tulos valor que representan bienes
      "046" | Ingresos asimilados a salarios
      "047" | Alimentaci√≥n diferentes a los establecidos en el Art 94 √∫ltimo p√°rrafo LISR
      "048" | Habitaci√≥n
      "049" | Premios por asistencia
      "050" | Vi√°ticos
      "051" | Pagos por gratificaciones, primas, compensaciones, recompensas u otros en parcialidades
      "052" | Pagos por jubilaci√≥n en parcialidades derivados de una resoluci√≥n judicial
      "053" | Pagos por jubilaci√≥n en una sola exhibici√≥n derivados de la ejecuci√≥n de una resoluci√≥n judicial

      ### Tipo de Horas

      C√≥digo | Descripci√≥n
      :-----:| -----------
      "01" | Dobles
      "02" | Triples
      "03" | Simples

      ### Tipo de Deducci√≥n

      C√≥digo | Descripci√≥n
      :-----:| -----------
      "001" | Seguridad social
      "002" | ISR
      "003" | Aportaciones a retiro, cesant√≠a en edad avanzada y vejez.
      "004" | Otros
      "005" | Aportaciones a Fondo de vivienda
      "006" | Descuento por incapacidad
      "007" | Pensi√≥n alimenticia
      "008" | Renta
      "009" | Pr√©stamos provenientes del Fondo Nacional de la Vivienda para los Trabajadores
      "010" | Pago por cr√©dito de vivienda
      "011" | Pago de abonos INFONACOT
      "012" | Anticipo de salarios
      "013" | Pagos hechos con exceso al trabajador
      "014" | Errores
      "015" | P√©rdidas
      "016" | Aver√≠as
      "017" | Adquisici√≥n de art√≠culos producidos por la empresa o establecimiento
      "018" | Cuotas para la constituci√≥n y fomento de sociedades cooperativas y de cajas de ahorro
      "019" | Cuotas sindicales
      "020" | Ausencia (Ausentismo)
      "021" | Cuotas obrero patronales
      "022" | Impuestos Locales
      "023" | Aportaciones voluntarias
      "024" | Ajuste en Gratificaci√≥n Anual (Aguinaldo) Exento
      "025" | Ajuste en Gratificaci√≥n Anual (Aguinaldo) Gravado
      "026" | Ajuste en Participaci√≥n de los Trabajadores en las Utilidades PTU Exento
      "027" | Ajuste en Participaci√≥n de los Trabajadores en las Utilidades PTU Gravado
      "028" | Ajuste en Reembolso de Gastos M√©dicos Dentales y Hospitalarios Exento
      "029" | Ajuste en Fondo de ahorro Exento
      "030" | Ajuste en Caja de ahorro Exento
      "031" | Ajuste en Contribuciones a Cargo del Trabajador Pagadas por el Patr√≥n Exento
      "032" | Ajuste en Premios por puntualidad Gravado
      "033" | Ajuste en Prima de Seguro de vida Exento
      "034" | Ajuste en Seguro de Gastos M√©dicos Mayores Exento
      "035" | Ajuste en Cuotas Sindicales Pagadas por el Patr√≥n Exento
      "036" | Ajuste en Subsidios por incapacidad Exento
      "037" | Ajuste en Becas para trabajadores y/o hijos Exento
      "038" | Ajuste en Horas extra Exento
      "039" | Ajuste en Horas extra Gravado
      "040" | Ajuste en Prima dominical Exento
      "041" | Ajuste en Prima dominical Gravado
      "042" | Ajuste en Prima vacacional Exento
      "043" | Ajuste en Prima vacacional Gravado
      "044" | Ajuste en Prima por antig√ºedad Exento
      "045" | Ajuste en Prima por antig√ºedad Gravado
      "046" | Ajuste en Pagos por separaci√≥n Exento
      "047" | Ajuste en Pagos por separaci√≥n Gravado
      "048" | Ajuste en Seguro de retiro Exento
      "049" | Ajuste en Indemnizaciones Exento
      "050" | Ajuste en Indemnizaciones Gravado
      "051" | Ajuste en Reembolso por funeral Exento
      "052" | Ajuste en Cuotas de seguridad social pagadas por el patr√≥n Exento
      "053" | Ajuste en Comisiones Gravado
      "054" | Ajuste en Vales de despensa Exento
      "055" | Ajuste en Vales de restaurante Exento
      "056" | Ajuste en Vales de gasolina Exento
      "057" | Ajuste en Vales de ropa Exento
      "058" | Ajuste en Ayuda para renta Exento
      "059" | Ajuste en Ayuda para art√≠culos escolares Exento
      "060" | Ajuste en Ayuda para anteojos Exento
      "061" | Ajuste en Ayuda para transporte Exento
      "062" | Ajuste en Ayuda para gastos de funeral Exento
      "063" | Ajuste en Otros ingresos por salarios Exento
      "064" | Ajuste en Otros ingresos por salarios Gravado
      "065" | Ajuste en Jubilaciones, pensiones o haberes de retiro en una sola exhibici√≥n Exento
      "066" | Ajuste en Jubilaciones, pensiones o haberes de retiro en una sola exhibici√≥n Gravado
      "067" | Ajuste en Pagos por separaci√≥n Acumulable
      "068" | Ajuste en Pagos por separaci√≥n No acumulable
      "069" | Ajuste en Jubilaciones, pensiones o haberes de retiro en parcialidades Exento
      "070" | Ajuste en Jubilaciones, pensiones o haberes de retiro en parcialidades Gravado
      "071" | Ajuste en Subsidio para el empleo (efectivamente entregado al trabajador)
      "072" | Ajuste en Ingresos en acciones o t√≠tulos valor que representan bienes Exento
      "073" | Ajuste en Ingresos en acciones o t√≠tulos valor que representan bienes Gravado
      "074" | Ajuste en Alimentaci√≥n Exento
      "075" | Ajuste en Alimentaci√≥n Gravado
      "076" | Ajuste en Habitaci√≥n Exento
      "077" | Ajuste en Habitaci√≥n Gravado
      "078" | Ajuste en Premios por asistencia
      "079" | Ajuste en Pagos distintos a los listados
      "080" | Ajuste en Vi√°ticos gravados
      "081" | Ajuste en Vi√°ticos (entregados al trabajador)
      "082" | Ajuste en Fondo de ahorro Gravado
      "083" | Ajuste en Caja de ahorro Gravado
      "084" | Ajuste en Prima de Seguro de vida Gravado
      "085" | Ajuste en Seguro de Gastos M√©dicos Mayores Gravado
      "086" | Ajuste en Subsidios por incapacidad Gravado
      "087" | Ajuste en Becas para trabajadores y/o hijos Gravado
      "088" | Ajuste en Seguro de retiro Gravado
      "089" | Ajuste en Vales de despensa Gravado
      "090" | Ajuste en Vales de restaurante Gravado
      "091" | Ajuste en Vales de gasolina Gravado
      "092" | Ajuste en Vales de ropa Gravado
      "093" | Ajuste en Ayuda para renta Gravado
      "094" | Ajuste en Ayuda para art√≠culos escolares Gravado
      "095" | Ajuste en Ayuda para anteojos Gravado
      "096" | Ajuste en Ayuda para transporte Gravado
      "097" | Ajuste en Ayuda para gastos de funeral Gravado
      "098" | Ajuste a ingresos asimilados a salarios gravados
      "099" | Ajuste a ingresos por sueldos y salarios gravados
      "100" | Ajuste en Vi√°ticos exentos
      "101" | ISR Retenido de ejercicio anterior
      "102" | Ajuste a pagos por gratificaciones, primas, compensaciones, recompensas u otros
      "103" | Ajuste a pagos en parcialidades derivados de una resoluci√≥n judicial gravados
      "104" | Ajuste a pagos en parcialidades derivados de una resoluci√≥n judicial exentos
      "105" | Ajuste a pagos en una sola exhibici√≥n derivados de una resoluci√≥n judicial gravados
      "106" | Ajuste a pagos en una sola exhibici√≥n derivados de una resoluci√≥n judicial exentos
      "107" | Ajuste al Subsidio Causado

      ### Tipo de Otro Pago

      C√≥digo | Descripci√≥n
      :-----:| -----------
      "001" | Reintegro de ISR pagado en exceso.
      "002" | Subsidio para el empleo (efectivamente entregado al trabajador).
      "003" | Vi√°ticos (entregados al trabajador).
      "004" | Aplicaci√≥n de saldo a favor por compensaci√≥n anual.
      "005" | Reintegro de ISR retenido en exceso de ejercicio anterior
      "006" | Alimentos en bienes (Servicios de comedor y comida).
      "007" | ISR ajustado por subsidio.
      "008" | Subsidio efectivamente entregado que no correspond√≠a.
      "009" | Reembolso de descuentos efectuados para el cr√©dito de vivienda.
      "999" | Pagos distintos a los listados.

      ### Tipo de Incapacidad

      C√≥digo | Descripci√≥n
      :-----:| -----------
      "01" | Riesgo de trabajo.
      "02" | Enfermedad en general.
      "03" | Maternidad.
      "04" | Licencia por cuidados m√©dicos de hijos diagnosticados con c√°ncer.

      ### Clave de retenci√≥n

      C√≥digo | Descripci√≥n
      :-----:| -----------
      "01" | Servicios profesionales.
      "02" | Regal√≠as por derechos de autor.
      "03" | Autotransporte terrestre de carga.
      "04" | Servicios prestados por comisionistas.
      "05" | Arrendamiento.
      "06" | Enajenaci√≥n de acciones.
      "07" | Enajenaci√≥n de bienes objeto de la LIEPS, a trav√©s de mediadores, agentes, representantes, corredores, consignatarios o distribuidores.
      "08" | Enajenaci√≥n de bienes inmuebles consignada en escritura p√∫blica.
      "09" | Enajenaci√≥n de otros bienes, no consignada en escritura p√∫blica.
      "10" | Adquisici√≥n de desperdicios industriales.
      "11" | Adquisici√≥n de bienes consignada en escritura p√∫blica.
      "12" | Adquisici√≥n de otros bienes, no consignada en escritura p√∫blica.
      "13" | Otros retiros de AFORE.
      "14" | Dividendos o utilidades distribuidas.
      "15" | Remanente distribuible.
      "16" | Intereses.
      "17" | Arrendamiento en fideicomiso.
      "18" | Pagos realizados a favor de residentes en el extranjero.
      "19" | Enajenaci√≥n de acciones u operaciones en bolsa de valores.
      "20" | Obtenci√≥n de premios.
      "21" | Fideicomisos que no realizan actividades empresariales.
      "22" | Planes personales de retiro.
      "23" | Intereses reales deducibles por cr√©ditos hipotecarios.
      "24" | Operaciones Financieras Derivadas de Capital.
      "25" | Otro tipo de retenciones.
      "26" | Servicios mediante Plataformas Tecnol√≥gicas

      ### Validez de obligaciones

      | Validez | IVA Exento | Tasa 0% | Tasa 8% Fronteriza Norte | Tasa 8% Fronteriza Sur | Tasa 16%
      |:-------:|:----------:|:-------:|:------------------------:|:----------------------:|:--------
      | "0" <td colspan="5">El contribuyente no est√° autorizado para emitir facturas</td>
      | "1" | S√≠ | S√≠ | No | No | S√≠
      | "2" | S√≠ | S√≠ | S√≠ | No | S√≠
      | "3" | S√≠ | S√≠ | No | S√≠ | S√≠
      | "4" | S√≠ | S√≠ | S√≠ | S√≠ | S√≠

      #### Situaci√≥n del contribuyente

      | Valor | Explicaci√≥n
      |:-----:|:-----------
      | "Previsto" | V√≠a buz√≥n tributario o notificaciones por estrados, el contribuyente recibe un oficio en el que se establece su situaci√≥n y se le solicita que demuestre la materialidad de las operaciones facturadas.
      | "Presunto" | El contribuyente notificado se considera presunto cuando, en su p√°gina web, la autoridad emite sus datos dentro de la relaci√≥n de los EFOS, es decir, en las listas negras del SAT.
      | "Desvirtuado" | En este caso, el contribuyente acusado de operaciones inexistentes ya aport√≥ a la autoridad la documentaci√≥n e informaci√≥n pertinente para desvirtuar los hechos que llevaron a notificarlo.
      | "Definitivo" | En este caso, el EFO no atendi√≥ el llamado de la autoridad en el plazo de 15 d√≠as, a partir de la √∫ltima notificaci√≥n; o bien, no pudo desvirtuar los hechos imputados.
      | "Sentencia favorable" | Los contribuyentes EFOS ‚Äúdefinitivos‚Äù que se inconforman e interponen alg√∫n medio de defensa, el cual concluye a su favor, son clasificados en la lista de ‚Äúsentencia favorable‚Äù.
      | "EFOS de informaci√≥n suprimida" | En esta categor√≠a, se encuentran los EFOS ‚Äúpresuntos‚Äù y ‚Äúdefinitivos‚Äù que presentaron alg√∫n medio de defensa (amparo, juicio de nulidad) y, por lo tanto, un juez orden√≥ suprimir sus datos de la lista, sin ser eliminados.

  - name: customer_model
    x-displayName: Objeto Customer
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Customer" />
  - name: product_model
    x-displayName: Objeto Product
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Product" />
  - name: invoice_model
    x-displayName: Objeto Invoice
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Invoice" />
  - name: receipt_model
    x-displayName: Objeto Receipt
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Receipt" />
  - name: retention_model
    x-displayName: Objeto Retention
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Retention" />
  - name: organization_model
    x-displayName: Objeto Organizaci√≥n
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Organization" />

x-tagGroups:
  - name: Recursos
    tags:
      - customer
      - product
      - invoice
      - receipt
      - retention
      - organization
  - name: Herramientas
    tags:
      - tools
      - sat_keys
  - name: Modelos
    tags:
      - customer_model
      - product_model
      - invoice_model
      - receipt_model
      - retention_model
      - organization_model

paths:
  /customers:
    post:
      operationId: createCustomer
      tags:
        - customer
      summary: Crear cliente
      description: |
        Registra un nuevo cliente en Facturapi.

        Puedes usar el ID de un cliente para crear facturas sin tener que enviar todos los datos fiscales cada vez.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/customers \
              -H "Authorization: Bearer sk_test_API_KEY" \
              -H "Content-Type: application/json" \
              -d '{
                    "legal_name": "Dunder Mifflin S.A. de C.V.",
                    "email": "email@example.com",
                    "tax_id": "ABC101010111"
                  }'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const customer = await facturapi.customers.create({
              legal_name: 'Dunder Mifflin S.A. de C.V.',
              email: 'email@example.com',
              tax_id: 'ABC101010111'
            });
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var customer = await facturapi.Customer.CreateAsync(new Dictionary<string, object>
            {
              ["legal_name"] = "Dunder Mifflin S.A. de C.V.",
              ["email"] = "email@example.com",
              ["tax_id"] = "ABC101010111"
            });
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $customer = $facturapi->Customers->create([
              "email" => "email@example.com",
              "legal_name" => "Dunder Mifflin S.A. de C.V.",
              "tax_id" => "ABC101010111"
            ]);
      requestBody:
        $ref: "#/components/requestBodies/CustomerCreate"
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "201":
          description: Nuevo objeto `Customer` creado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Customer"
        "200":
          description: Un objeto `Customer` con la misma informaci√≥n ya exist√≠a
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Customer"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
    get:
      operationId: listCustomers
      tags:
        - customer
      summary: Listar clientes
      description: Regresa una lista paginada de todos los clientes de una organizaci√≥n o realiza una b√∫squeda de acuerdo a par√°metros
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/customers \
              -H "Authorization: Bearer sk_test_API_KEY"
              -G
              -d 'q=Dunder'
              -d 'date[gt]=2021-07-14T06:00:00.000Z'
              -d 'date[lt]=2021-08-14T06:00:00.000Z'
              -d 'page=1'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const searchResult = await facturapi.customers.list({
              q: 'Dunder',
              date: {
                gt: new Date('2021-07-14T06:00:00.000Z'),
                lt: new Date('2021-08-14T06:00:00.000Z')
              },
              page: 1
            });
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var searchResult = await facturapi.Customer.ListAsync(new Dictionary<string, object>
            {
              ["q"] = "Dunder",
              ["date"] = new Dictionary<string, object>
                {
                  ["gt"] = new DateTime("2021-07-14T06:00:00.000Z"),
                  ["lt"] = new DateTime("2021-08-14T06:00:00.000Z")
                },
              ["page"] = 1
            });
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $searchResult = $facturapi->Customers->all([
              "q" => "Dunder",
              "date" => [
                "gt" => new DateTime("2021-07-14T06:00:00.000Z"),
                "lt" => new DateTime("2021-08-14T06:00:00.000Z")
              ],
              "page" => 1
            ]);
      parameters:
        - in: query
          name: q
          schema:
            type: string
          description: Consulta. Texto a buscar en `legal_name` (nombre fiscal) o en `tax_id` (RFC).
        - $ref: "#/components/parameters/SearchDate"
        - $ref: "#/components/parameters/SearchPage"
        - $ref: "#/components/parameters/SearchLimit"
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Resultado de la b√∫squeda
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CustomerSearchResult"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /customers/{customer_id}:
    get:
      operationId: getCustomer
      tags:
        - customer
      summary: Obtener cliente por ID
      description: Regresa el objeto 'Customer' relacionado al `id` especificado.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/customers/590ce6c56d04f840aa8438af \
              -H "Authorization: Bearer sk_test_API_KEY"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const customer = await facturapi.customers.retrieve('590ce6c56d04f840aa8438af');
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var customer = await facturapi.Customer.RetrieveAsync("590ce6c56d04f840aa8438af");
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $customer = $facturapi->Customers->retrieve( "5a3ee743f508333611ad6b3c" );
      parameters:
        - in: path
          name: customer_id
          schema:
            type: string
          required: true
          description: ID del objeto a obtener
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Objeto `Customer`
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Customer"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
    put:
      operationId: editCustomer
      tags:
        - customer
      summary: Editar cliente
      description: Actualiza la informaci√≥n de un cliente existente, asignando los valores de los par√°metros enviados. Los par√°metros que no se env√≠en en la petici√≥n no se modificar√°n.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/customers/590ce6c56d04f840aa8438af \
              -X PUT
              -H "Authorization: Bearer sk_test_API_KEY" \
              -H "Content-Type: application/json" \
              -d '{
                    "email": "jdoe@example.com",
                    "address": {
                      "street": "Santa Monica Ave."
                    }
                  }'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const customer = await facturapi.customers.update(
              '590ce6c56d04f840aa8438af',
              {
                email: 'jdoe@example.com',
                address: {
                  street: 'Santa Monica Ave.'
                }
              }
            );
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var customer = await facturapi.Customer.UpdateAsync(
              "590ce6c56d04f840aa8438af",
              new Dictionary<string, object>
              {
                ["email"] = "jdoe@example.com",
                ["address"] = new Dictionary<string, object>
                {
                  ["street"] = "Santa Monica Ave."
                }
              }
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $customer = $facturapi->Customers->update("590ce6c56d04f840aa8438af", [
              "email" => "jdoe@example.com",
              "legal_name" => "Dunder Mifflin S.A. de C.V.",
              "address" => [
                "street" => "Santa Monica Ave."
              ]
            ]);
      parameters:
        - in: path
          name: customer_id
          schema:
            type: string
          required: true
          description: ID del objeto a editar
      requestBody:
        $ref: "#/components/requestBodies/CustomerEdit"
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Objeto `Customer` eliminado correctamente
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Customer"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
    delete:
      operationId: deleteCustomer
      tags:
        - customer
      summary: Eliminar cliente
      description: Elimina el cliente de tu organizaci√≥n. Las facturas asociadas al cliente **no** se eliminar√°n.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/customers/590ce6c56d04f840aa8438af \
              -X DELETE \
              -H "Authorization: Bearer sk_test_API_KEY"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const removedCustomer = await facturapi.customers.del('590ce6c56d04f840aa8438af');
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var customer = await facturapi.Customer.DeleteAsync("590ce6c56d04f840aa8438af");
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $facturapi->Customers->delete( "5a3fefd9f508333611ad6b43" );
      parameters:
        - in: path
          name: customer_id
          schema:
            type: string
          required: true
          description: ID del objeto a eliminar
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Objeto `Customer` eliminado correctamente
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Customer"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /products:
    post:
      operationId: createProduct
      tags:
        - product
      summary: Crear producto
      description: |
        Registra un nuevo producto o servicio en tu cat√°logo de Facturapi.

        Puedes usar el ID del producto para crear facturas sin tener que enviar todos los datos del producto cada vez.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/products \
              -H "Authorization: Bearer sk_test_API_KEY" \
              -H "Content-Type: application/json" \
              -d '{
                    "description": "Ukelele",
                    "product_key": "60131324",
                    "price": 345.60,
                    "sku": "ABC1234"
                }'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const product = await facturapi.products.create({
              description: 'Ukelele',
              product_key: '60131324',
              price: 345.60,
              sku: 'ABC1234'
            });
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var product = await facturapi.Product.CreateAsync(new Dictionary<string, object>
            {
              ["description"] = "Ukelele",
              ["product_key"] = "60131324",
              ["price"] = 345.60,
              ["sku"] = "ABC1234"
            });
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $product = $facturapi->Products->create([
              "description" => "Ukelele",
              "product_key" => "60131324",
              "price" => 345.60,
              "sku" => "ABC1234"
            ]);
      requestBody:
        $ref: "#/components/requestBodies/ProductCreate"
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Nuevo objeto `Product` creado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Product"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
    get:
      operationId: listProducts
      tags:
        - product
      summary: Listar productos
      description: Regresa una lista paginada de todos los productos de una organizaci√≥n o realiza una b√∫squeda de acuerdo a par√°metros
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/products \
              -H "Authorization: Bearer sk_test_API_KEY"
              -G
              -d 'q=ukelele'
              -d 'page=1'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const searchResult = await facturapi.products.list({
              q: 'ukelele',
              page: 1
            });
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var searchResult = await facturapi.Product.ListAsync(new Dictionary<string, object>
            {
              ["q"] = "ukelele",
              ["date"] = new Dictionary<string, object>
                {
                  ["gt"] = new DateTime("2021-07-14T06:00:00.000Z"),
                  ["lt"] = new DateTime("2021-08-14T06:00:00.000Z")
                },
              ["page"] = 1
            });
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $searchResult = $facturapi->Products->all([
              "q" => "ukelele",
              "page" => 1
            ]);
      parameters:
        - in: query
          name: q
          schema:
            type: string
          description: Consulta.  Texto a buscar en la descripci√≥n del producto o SKU.
        - $ref: "#/components/parameters/SearchPage"
        - $ref: "#/components/parameters/SearchLimit"
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Resultado de la b√∫squeda
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductSearchResult"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /products/{product_id}:
    get:
      operationId: getProduct
      tags:
        - product
      summary: Obtener producto por ID
      description: Regresa el objeto `Product` relacionado al `id` especificado.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/products/590e22c26d04f840aa8438b2 \
              -H "Authorization: Bearer sk_test_API_KEY"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const product = await facturapi.products.retrieve('590e22c26d04f840aa8438b2');
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var product = await facturapi.Product.RetrieveAsync("590e22c26d04f840aa8438b2");
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $product = $facturapi->Product->retrieve( "590e22c26d04f840aa8438b2" );
      parameters:
        - in: path
          name: product_id
          schema:
            type: string
          required: true
          description: ID del objeto a obtener
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Objeto `Product`
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Product"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
    put:
      operationId: editProduct
      tags:
        - product
      summary: Editar producto
      description: Actualiza la informaci√≥n de un producto existente, asignando los valores de los par√°metros enviados. Los par√°metros que no se env√≠en en la petici√≥n no se modificar√°n.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/products/590e22c26d04f840aa8438b2 \
              -X PUT
              -H "Authorization: Bearer sk_test_API_KEY" \
              -H "Content-Type: application/json" \
              -d '{
                    "price": 456.70
                  }'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const product = await facturapi.products.update(
              '590e22c26d04f840aa8438b2',
              {
                email: 'jdoe@example.com',
                address: {
                  street: 'Santa Monica Ave.'
                }
              }
            );
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var product = await facturapi.Product.UpdateAsync(
              "590e22c26d04f840aa8438b2",
              new Dictionary<string, object>
              {
                ["price"] = 456.70
              }
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $product = $facturapi->Products->update("590e22c26d04f840aa8438b2", [
              "price" => 456.70
            ]);
      parameters:
        - in: path
          name: product_id
          schema:
            type: string
          required: true
          description: ID del objeto a editar
      requestBody:
        $ref: "#/components/requestBodies/ProductEdit"
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Objeto `Product` eliminado correctamente
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Product"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
    delete:
      operationId: deleteProduct
      tags:
        - product
      summary: Eliminar producto
      description: Elimina el producto de tu organizaci√≥n. Las facturas asociadas al producto **no** se eliminar√°n.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/products/590e22c26d04f840aa8438b2 \
              -X DELETE \
              -H "Authorization: Bearer sk_test_API_KEY"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const removedProduct = await facturapi.products.del('590e22c26d04f840aa8438b2');
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var product = await facturapi.Product.DeleteAsync("590e22c26d04f840aa8438b2");
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $facturapi->Products->delete( "590e22c26d04f840aa8438b2" );
      parameters:
        - in: path
          name: product_id
          schema:
            type: string
          required: true
          description: ID del objeto a eliminar
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Objeto `Product` eliminado correctamente
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Product"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /invoices:
    post:
      operationId: createInvoice
      tags:
        - invoice
      summary: Crear factura (CFDI)
      description: |
        Crea una nueva Factura. Si la factura es creada en ambiente Live, √©sta ser√° **timbrada y enviada al SAT**.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/invoices \
              -H "Authorization: Bearer sk_test_API_KEY" \
              -H "Content-Type: application/json" \
              -d '{
                "customer": {
                  "legal_name": "Dunder Mifflin S.A. de C.V.",
                  "email": "email@example.com",
                  "tax_id": "ABC101010111"
                },
                "items": [{
                  "quantity": 2,
                  "product": {
                    "description": "Ukelele",
                    "product_key": "60131324",
                    "price": 345.60
                  }
                }],
                "payment_form": "06",
                "folio_number": 914,
                "series": "F"
              }'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const invoice = await facturapi.invoices.create({
              customer: {
                legal_name: 'Dunder Mifflin S.A. de C.V.',
                email: 'email@example.com',
                tax_id: 'ABC101010111'
              },
              items: [{
                quantity: 2,
                product: {
                  description: 'Ukelele',
                  product_key: '60131324',
                  price: 345.60
                }
              }],
              payment_form: Facturapi.PaymentForm.DINERO_ELECTRONICO,
              folio_number: 914,
              series: 'F'
            });
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var invoice = await facturapi.Invoice.CreateAsync(new Dictionary<string, object>
            {
              ["customer"] = new Dictionary<string, object>
              {
                ["legal_name"] = "Dunder Mifflin S.A. de C.V.",
                ["email"] = "email@example.com",
                ["tax_id"] = "ABC101010111"
              },
              ["items"] = new Dictionary<string, object>[]
              {
                new Dictionary<string, object>
                {
                  ["product"] = new Dictionary<string, object>
                  {
                    ["description"] = "Ukelele",
                    ["product_key"] = "60131324",
                    ["price"] = 345.60
                  }
                }
              },
              ["payment_form"] = Facturapi.PaymentForm.DINERO_ELECTRONICO,
              ["folio_number"] = 914,
              ["series"] = "F"
            });
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $invoice = $facturapi->Invoices->create([
              "customer" => [
                "legal_name" => "Dunder Mifflin S.A. de C.V.",
                "email" => "email@example.com",
                "tax_id" => "ABC101010111"
              ],
              "items" => [
                [
                  "quantity" => 2,
                  "product" => [
                    "description" => "Ukelele",
                    "product_key" => "60131324",
                    "price" => 420.69,
                    "sku" => "ABC4567"
                  ]
                ] // Add as many products as you want to include in your invoice
              ],
              "payment_form" => \Facturapi\PaymentForm::EFECTIVO,
              "folio_number" => 581,
              "series" => "F"
            ]);
      requestBody:
        $ref: "#/components/requestBodies/InvoiceCreate"
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Nuevo objeto `Invoice` creado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Invoice"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
    get:
      operationId: listInvoices
      tags:
        - invoice
      summary: Listar facturas
      description: Regresa una lista paginada de todas las facturas de una organizaci√≥n o realiza una b√∫squeda de acuerdo a par√°metros
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            # Todas las facturas de la organizaci√≥n
            curl "https://www.facturapi.io/v1/invoices" \
              -G \
              -H "Authorization: Bearer sk_test_API_KEY"

            # Todas las facturas emitidas para cierto cliente
            curl "https://www.facturapi.io/v1/invoices" \
              -G \
              -H "Authorization: Bearer sk_test_API_KEY" \
              -d "customer=58e93bd8e86eb318b0197456"

            # P√°gina 3 de los resultados de b√∫squeda de texto libre
            # de facturas emitidas por cierto cliente entre 2017 y 2019
            curl "https://www.facturapi.io/v1/invoices" \
              -G \
              -H "Authorization: Bearer sk_test_API_KEY" \
              -d "q=Aspiradora+Robot&customer=58e93bd8e86eb318b0197456&date[gte]=2017-01-01T00:00:00.000Z&date[lt]=2020-01-01T00:00:00.000Z&page=3&limit=10"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');

            // Todas las facturas de la organizaci√≥n
            const invoiceSearch = await facturapi.invoices.list();

            // Todas las facturas emitidas para cierto cliente
            const invoiceSearch = await facturapi.invoices.list({
              customer: '590ce6c56d04f840aa8438af'
            });

            // P√°gina 3 de los resultados de b√∫squeda de texto libre
            // de facturas emitidas por cierto cliente entre 2017 y 2019
            const invoiceSearch = await facturapi.invoices.list({
              q: 'Aspiradora Robot',
              customer: '590ce6c56d04f840aa8438af',
              date: {
                gte: new Date('2017-01-01T00:00:00.000Z'),
                lt: new Date('2020-01-01T00:00:00.000Z')
              },
              page: 3,
              limit: 10,
            });
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");

            // Todas las facturas de la organizaci√≥n
            var searchResult = await facturapi.Invoice.ListAsync();

            // Todas las facturas emitidas para cierto cliente
            var searchResult = await facturapi.Invoice.ListAsync(
              new Dictionary<string, object>
              {
                ["customer"] = "590ce6c56d04f840aa8438af"
              }
            );

            // P√°gina 3 de los resultados de b√∫squeda de texto libre
            // de facturas emitidas por cierto cliente entre 2017 y 2019
            var searchResult = await facturapi.Invoice.ListAsync(
              new Dictionary<string, object>
              {
                ["q"] = "Aspiradora Robot",
                ["customer"] = "590ce6c56d04f840aa8438af",  
                ["date"] = new Dictionary<string, object>
                  {
                    ["gte"] = new DateTime("2017-01-01T00:00:00.000Z"),
                    ["lt"] = new DateTime("2020-01-01T00:00:00.000Z")
                  },
                ["page"] = 3,
                ["limit"] = 10,
              }
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );

            // Todas las facturas de la organizaci√≥n
            $invoices = $facturapi->Invoices->all();

            // Todas las facturas emitidas para cierto cliente
            $invoices = $facturapi->Invoices->all([
              customer => "590ce6c56d04f840aa8438af"
            ]);

            // P√°gina 3 de los resultados de b√∫squeda de texto libre
            // de facturas emitidas por cierto cliente entre 2017 y 2019
            $invoices = $facturapi->Invoices->all([
              q => "Aspiradora Robot",
              customer => "590ce6c56d04f840aa8438af"
              date => [
                gte => new DateTime("2017-01-01T00:00:00.000Z"),
                lt => new DateTime("2020-01-01T00:00:00.000Z")
              ],
              page => 3,
              limit => 10,
            ]);
      parameters:
        - in: query
          name: q
          schema:
            type: string
          description: |
            Consulta. Texto a buscar en la factura.

            La b√∫squeda se realizar√° por coincidencias **parciales** en los campos:

            - `items[].product.description`
            - `customer.legal_name`

            Y por coincidencias **exactas** en los campos:

            - `id`
            - `uuid`
            - `customer.tax_id`
            - `folio_number`
            - `total`
        - in: query
          name: customer
          schema:
            type: string
          description: Identificador del cliente. √ötil para obtener las facturas emitidas a un s√≥lo cliente.
        - $ref: "#/components/parameters/SearchDate"
        - $ref: "#/components/parameters/SearchPage"
        - $ref: "#/components/parameters/SearchLimit"
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Resultado de la b√∫squeda
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvoiceSearchResult"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /invoices/{invoice_id}:
    get:
      operationId: getInvoice
      tags:
        - invoice
      summary: Obtener factura por ID
      description: Regresa el objeto 'Invoice' relacionado al `id` especificado.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/invoices/58e93bd8e86eb318b019743d \
              -H "Authorization: Bearer sk_test_API_KEY"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const invoice = await facturapi.invoices.retrieve('58e93bd8e86eb318b019743d');
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var invoice = await facturapi.Invoice.RetrieveAsync("58e93bd8e86eb318b019743d");
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $invoice = $facturapi->Invoices->retrieve( "58e93bd8e86eb318b019743d" );
      parameters:
        - in: path
          name: invoice_id
          schema:
            type: string
          required: true
          description: ID del objeto a obtener
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Objeto `Invoice`
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Invoice"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
    delete:
      operationId: cancelInvoice
      tags:
        - invoice
      summary: Cancelar factura
      description: |
        Realiza una solicitud de cancelaci√≥n de factura ante el SAT, soportando el esquema de cancelaci√≥n 2022.

        Al usar este m√©todo pueden ocurrir 3 posibles resultados:

        - Que la llamada regrese un error con la explicaci√≥n de por qu√© no se pudo cancelar.
        - Que la llamada sea satisfactoria y regrese un objeto `invoice` con la propiedad `status: "canceled"`.
        - Que la llamada sea satisfactoria, pero que la cancelaci√≥n requiera de confirmaci√≥n de parte de tu cliente, en cuyo caso se obtendr√° como respuesta el objeto `invoice` con las propiedades `status: "valid"` y `cancellation_status: "pending"`.

        En el tercer escenario, el valor de `cancellation_status` ser√° actualizado autom√°ticamente por Facturapi cuando tu cliente acepte, rechace o deje expirar la solicitud, de tal manera que al consultar una factura (usando [Obtener Factura](#tag/invoice/operation/getInvoice)), la propiedad `cancellation_status` reflejar√° el estado m√°s reciente de la soliitud.

        Consulta los valores posibles de `cancellation_status` m√°s abajo.

        Despu√©s de la cancelaci√≥n la factura ya no tendr√° validez, el objeto cambiar√° su `status` a `"canceled"` y seguir√° estando disponible para futuras consultas.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/invoices/58e93bd8e86eb318b019743d?motive=02 \
              -H "Authorization: Bearer sk_test_API_KEY" \
              -X DELETE
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const invoice = await facturapi.invoices.cancel(
              '58e93bd8e86eb318b019743d',
              { motive: '02' }
            );
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var invoice = await facturapi.Invoice.CancelAsync(
              "58e93bd8e86eb318b019743d",
              new Dictionary<string, object>
              {
                ["motive"] = "02"
              }
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $facturapi->Invoices->cancel(
              "58e93bd8e86eb318b019743d",
              [
                "motive" => "02"
              ]
            );
      parameters:
        - in: path
          name: invoice_id
          schema:
            type: string
          required: true
          description: ID de la factura a cancelar
        - in: query
          name: motive
          required: true
          schema:
            type: string
            enum:
              - "01"
              - "02"
              - "03"
              - "04"
          description: |
            Clave que representa el motivo de la cancelaci√≥n de la factura.

            - `01`: **Comprobante emitido con errores con relaci√≥n**. Cuando la
              factura contiene alg√∫n error en las cantidades, claves o cualquier otro dato y ya
              se ha emitido el comprobante que la sustituye, el cual deber√° indicarse por medio
              del atributo `substitution`.
            - `02`: **Comprobante emitido con errores sin relaci√≥n**. Cuando la
              factura contiene alg√∫n error en las cantidades, claves o cualquier otro dato y no
              se requiere relacionar con otra factura.
            - `03`: **No se llev√≥ a cabo la operaci√≥n**. Cuando la venta o transacci√≥n no se concret√≥.
            - `04`: **Operaci√≥n nominativa relacionada en la factura global**. Cuando se requiere cancelar
              una factura al p√∫blico en general porque el cliente solicita su comprobante.
        - in: query
          name: substitution
          required: false
          schema:
            type: string
          description: |
            ID de la factura que sustituye a la factura que se est√° cancelando.

            Puedes usar el ID de Facturapi o el folio fiscal (UUID).
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Solicitud de cancelaci√≥n exitosa
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Invoice"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /invoices/{invoice_id}/{format}:
    get:
      operationId: downloadInvoice
      tags:
        - invoice
      summary: Descargar factura
      description: Descarga tu Factura en PDF, XML o ambos en un archivo comprimido ZIP.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            ## Descargar PDF y XML comprimidos en archivo ZIP
            curl https://www.facturapi.io/v1/invoices/58e93bd8e86eb318b019743d/zip \
              -H "Authorization: Bearer sk_test_API_KEY"

            ## Descargar s√≥lo el PDF
            curl https://www.facturapi.io/v1/invoices/58e93bd8e86eb318b019743d/pdf \
              -H "Authorization: Bearer sk_test_API_KEY"

            ## Descargar s√≥lo el XML
            curl https://www.facturapi.io/v1/invoices/58e93bd8e86eb318b019743d/xml \
              -H "Authorization: Bearer sk_test_API_KEY"
        - lang: JavaScript
          label: Node.js
          source: |
            const fs = require('fs');
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');

            // Descargar PDF y XML comprimidos en archivo ZIP
            const zipStream = await facturapi.invoices.downloadZip('58e93bd8e86eb318b019743d');
            const zipFile = fs.createWriteStream('./factura.zip');
            zipStream.pipe(zipFile);

            // Descargar s√≥lo el PDF
            const pdfStream = await facturapi.invoices.downloadPdf('58e93bd8e86eb318b019743d');
            const pdfFile = fs.createWriteStream('./factura.pdf');
            pdfStream.pipe(pdfFile);

            // Descargar s√≥lo el XML
            const xmlStream = await facturapi.invoices.downloadXml('58e93bd8e86eb318b019743d');
            const xmlFile = fs.createWriteStream('./factura.xml');
            xmlStream.pipe(xmlFile);
        - lang: csharp
          label: C#
          source: |
            // Descargar PDF y XML comprimidos en archivo ZIP
            var zipStream = await facturapi.Invoice.DownloadZipAsync("58e93bd8e86eb318b019743d");
            // Descargar s√≥lo el XML
            var xmlStream = await facturapi.Invoice.DownloadXmlAsync("58e93bd8e86eb318b019743d");
            // Descargar s√≥lo el PDF
            var pdfStream = await facturapi.Invoice.DownloadPdfAsync("58e93bd8e86eb318b019743d");

            // Para guardar la descarga en un archivo
            var file = new System.IO.FileStream("C:\\route\\to\\save\\invoice.zip", FileMode.Create);
            zipStream.CopyTo(file);
            file.Close();
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );

            // stream containing the PDF and XML as a ZIP file
            $zip = $facturapi->Invoices->download_zip("58e93bd8e86eb318b019743d");
            // stream containing the PDF file
            $pdf = $facturapi->Invoices->download_pdf("58e93bd8e86eb318b019743d"); 
            // stream containing the XML file
            $xml = $facturapi->Invoices->download_xml("58e93bd8e86eb318b019743d");
      parameters:
        - in: path
          name: invoice_id
          schema:
            type: string
          required: true
          description: ID del objeto a descargar
        - in: path
          name: format
          schema:
            type: string
            enum:
              - xml
              - pdf
              - zip
          required: true
          description: Formato del archivo de descarga
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Archivo del comprobante CFDI en el formato solicitado
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /invoices/{invoice_id}/email:
    post:
      operationId: sendInvoiceByEmail
      tags:
        - invoice
      summary: Enviar factura por correo electr√≥nico
      description: Env√≠a un correo electr√≥nico a la direcci√≥n de tu cliente, con los archivos XML y PDF adjuntos al mensaje.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            # Enviar al correo del cliente
            curl https://www.facturapi.io/v1/invoices/58e93bd8e86eb318b019743d/email \
              -H "Authorization: Bearer sk_test_API_KEY"
              -X POST

            # Enviar a otro correo
            curl https://www.facturapi.io/v1/invoices/58e93bd8e86eb318b019743d/email \
              -H "Authorization: Bearer sk_test_API_KEY"
              -X POST
              -H "Content-Type: application/json" \
              -d '{
                    "email": "another_email@example.com"
                  }'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');

            // Enviar al correo del cliente
            await facturapi.invoices.sendByEmail('58e93bd8e86eb318b019743d');

            // Enviar a otro correo
            await facturapi.invoices.sendByEmail(
              '58e93bd8e86eb318b019743d',
              { email: 'otro@correo.com' }
            );

            // Enviar a m√°s de un correo (m√°x. 10)
            await facturapi.invoices.sendByEmail(
              '58e93bd8e86eb318b019743d',
              { 
                email: [
                  'primer@correo.com',
                  'segundo@correo.com'
                ]
              }
            );
        - lang: csharp
          label: C#
          source: |
            // Enviar al correo del cliente
            await facturapi.Invoice.SendByEmailAsync("58e93bd8e86eb318b019743d");

            // Enviar a otro correo
            await facturapi.Invoice.SendByEmailAsync(
              "58e93bd8e86eb318b019743d",
              new Dictionary<string, object>
              {
                ["email"] = "otro@correo.com"
              }
            );

            // Enviar a m√°s de un correo
            await facturapi.Invoice.SendByEmailAsync(
              "58e93bd8e86eb318b019743d",
              new Dictionary<string, object>
              {
                ["email"] = new String[]
                {
                  "primer@correo.com",
                  "segundo@correo.com"
                }
              }
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );

            // Enviar al correo del cliente
            $facturapi->Invoices->send_by_email("58e93bd8e86eb318b019743d");

            // Enviar a otro correo
            $facturapi->Invoices->send_by_email(
              "58e93bd8e86eb318b019743d",
              "otro@correo.com"
            );

            // Enviar a m√°s de un correo (m√°x 10)
            $facturapi->Invoices->send_by_email(
              "58e93bd8e86eb318b019743d",
              [
                "primer@correo.com",
                "segundo@correo.com"
              ]
            );
      parameters:
        - in: path
          name: invoice_id
          schema:
            type: string
          required: true
          description: ID del objeto a obtener
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  description: Direcci√≥n de correo electr√≥nico a enviar la factura. Si no se env√≠a este par√°metro, la factura ser√° enviada al correo que el cliente tenga registrado.
                  oneOf:
                    - type: string
                      format: email
                      description: Direcci√≥n de correo eletr√≥nico
                      example: otro@correo.com
                    - type: array
                      example: ["primer@correo.com", "segundo@correo.com"]
                      description: Lista de direcciones de correo que recibir√°n la factura.
                      maxLength: 10
                      items:
                        type: string
                        format: email
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Archivo del comprobante CFDI en el formato solicitado
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"

  /receipts:
    post:
      operationId: createReceipt
      tags:
        - receipt
      summary: Crear recibo
      description: |
        Crea un nuevo Recibo, el cual funge como nota de venta.

        Todos los recibos generan una URL de autofactura que cliente puede
        visitar para llenar sus datos fiscales en un micrositio con el branding
        de la organizaci√≥n.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/receipts \
              -H "Authorization: Bearer sk_test_API_KEY" \
              -H "Content-Type: application/json" \
              -d '{
                    "folio_number": 1234,
                    "payment_form": "03",
                    "items": [{
                      "quantity": 1,
                      "product": {
                        "description": "Ukelele",
                        "product_key": "60131324",
                        "price": 345.60,
                        "sku": "ABC1234"
                      }
                    }]
                  }'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');

            const receipt = await facturapi.receipts.create({
              folio_number: 1234,
              payment_form: Facturapi.PaymentForm.DINERO_ELECTRONICO,
              items: [{
                quantity: 1,
                product: {
                  description: 'Ukelele',
                  product_key: '60131324',
                  price: 345.60,
                  sku: 'ABC1234'
                }
              }]
            });
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var receipt = await facturapi.Receipt.CreateAsync(new Dictionary<string, object>
            {
              ["folio_number"] = 1234,
              ["payment_form"] = Facturapi.PaymentForm.DINERO_ELECTRONICO,
              ["items"] = new Dictionary<string, object>[]
              {
                new Dictionary<string, object> {
                  ["description"] = "Ukelele",
                  ["product_key"] = "60131324",
                  ["price"] = 345.60,
                  ["sku"] = "ABC1234"
                }
              }
            });
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );

            $receipt = $facturapi->Receipts->create([
              "folio_number" => 1234,
              "payment_form" => "03",
              "items" => [
                [
                  "product" => [
                    "description" => "Ukelele",
                    "product_key" => "60131324",
                    "price" => 345.60,
                    "sku" => "ABC1234"
                  ]
                ]
              ]
            ]);
      requestBody:
        $ref: "#/components/requestBodies/ReceiptCreate"
      security:
        - "Secret User Key": []
      responses:
        "200":
          description: Nuevo objeto `Receipt` creado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Receipt"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
    get:
      operationId: listReceipts
      tags:
        - receipt
      summary: Listar recibos
      description: Regresa una lista paginada de todos los recibos de una organizaci√≥n o realiza una b√∫squeda de acuerdo a par√°metros
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            # Todos los recibos de la organizaci√≥n
            curl "https://www.facturapi.io/v1/receipts" \
              -G \
              -H "Authorization: Bearer sk_test_API_KEY"

            # P√°gina 3 de los resultados de b√∫squeda de texto libre
            # de recibos creados entre 2017 y 2019
            curl "https://www.facturapi.io/v1/receipts" \
              -G \
              -H "Authorization: Bearer sk_test_API_KEY" \
              -d "q=Aspiradora+Robot&date[gte]=2017-01-01T00:00:00.000Z&date[lt]=2020-01-01T00:00:00.000Z&page=3&limit=10"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');

            // Todos los recibos de la organizaci√≥n
            const receiptSearch = await facturapi.receipts.list();

            // P√°gina 3 de los resultados de b√∫squeda de texto libre
            // de recibos creados entre 2017 y 2019
            const receiptSearch = await facturapi.receipts.list({
              q: 'Aspiradora Robot',
              date: {
                gte: new Date('2017-01-01T00:00:00.000Z'),
                lt: new Date('2020-01-01T00:00:00.000Z')
              },
              page: 3,
              limit: 10,
            });
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");

            // Todos los recibos de la organizaci√≥n
            var searchResult = await facturapi.Receipt.ListAsync();

            // P√°gina 3 de los resultados de b√∫squeda de texto libre
            // de recibos creados entre 2017 y 2019
            var searchResult = await facturapi.Receipt.ListAsync(
              new Dictionary<string, object>
              {
                ["q"] = "Aspiradora Robot",
                ["date"] = new Dictionary<string, object>
                  {
                    ["gte"] = new DateTime("2017-01-01T00:00:00.000Z"),
                    ["lt"] = new DateTime("2020-01-01T00:00:00.000Z")
                  },
                ["page"] = 3,
                ["limit"] = 10,
              }
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );

            // Todos los recibos de la organizaci√≥n
            $searchResult = $facturapi->Receipts->all();

            // P√°gina 3 de los resultados de b√∫squeda de texto libre
            // de recibos creados entre 2017 y 2019
            $searchResult = $facturapi->Receipts->all([
              q => "Aspiradora Robot",
              date => [
                gte => new DateTime("2017-01-01T00:00:00.000Z"),
                lt => new DateTime("2020-01-01T00:00:00.000Z")
              ],
              page => 3,
              limit => 10,
            ]);
      parameters:
        - in: query
          name: q
          schema:
            type: string
          description: |
            Consulta. Texto a buscar en la descripci√≥n de los conceptos del recibo o el SKU.
        - $ref: "#/components/parameters/SearchDate"
        - $ref: "#/components/parameters/SearchPage"
        - $ref: "#/components/parameters/SearchLimit"
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Resultado de la b√∫squeda
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReceiptSearchResult"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /receipts/{receipt_id}:
    get:
      operationId: getReceipt
      tags:
        - receipt
      summary: Obtener recibo por ID
      description: Regresa el objeto 'Receipt' relacionado al `id` especificado.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/receipts/58e93bd8e86eb318b019743d \
              -H "Authorization: Bearer sk_test_API_KEY"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const receipt = await facturapi.receipts.retrieve('58e93bd8e86eb318b019743d');
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var receipt = await facturapi.Receipt.RetrieveAsync("58e93bd8e86eb318b019743d");
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $receipt = $facturapi->Receipts->retrieve( "58e93bd8e86eb318b019743d" );
      parameters:
        - in: path
          name: receipt_id
          schema:
            type: string
          required: true
          description: ID del objeto a obtener
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Objeto `Receipt`
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Receipt"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
    delete:
      operationId: cancelReceipt
      tags:
        - receipt
      summary: Cancelar recibo
      description: |
        Marca un recibo como cancelado, cambiando su propiedad `status` a `"canceled"`.

        Una vez cancelado, el recibo no podr√° ser facturado.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/receipts/5ebd8e56f5687a013ca0df46 \
              -X DELETE \
              -H "Authorization: Bearer sk_test_API_KEY"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const receipt = await facturapi.receipts.cancel('5ebd8e56f5687a013ca0df46');
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var receipt = await facturapi.Receipt.CancelAsync("5ebd8e56f5687a013ca0df46");
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $facturapi->Receipts->cancel("5ebd8e56f5687a013ca0df46");
      parameters:
        - in: path
          name: receipt_id
          schema:
            type: string
          required: true
          description: ID del recibo a cancelar
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Objeto 'Receipt' cancelado exitosamente
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Receipt"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /receipts/{receipt_id}/invoice:
    post:
      operationId: invoiceReceipt
      tags:
        - receipt
      summary: Facturar recibo
      description: |
        Crea una factura a partir de un recibo.

        S√≥lo pueden facturarse recibos abiertos (`status = "open"`)

        Una vez facturado, el `status` del recibo cambiar√° a `"invoiced_to_customer"`.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/receipts/5ebd8e56f5687a013ca0df46/invoice \
              -H "Authorization: Bearer sk_test_API_KEY" \
              -H "Content-Type: application/json" \
              -d '{
                    "customer": "58e93bd8e86eb318b0197456",
                    "folio_number": 914,
                    "series": "F"
                }'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');

            const invoice = await facturapi.receipts.invoice('5ebd8e56f5687a013ca0df46', {
              customer: '58e93bd8e86eb318b0197456',
              folio_number: 914,
              series: 'F'
            });
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var invoice = await facturapi.Receipt.InvoiceAsync("5ebd8e56f5687a013ca0df46", new Dictionary<string, object>
            {
              ["customer"] = "58e93bd8e86eb318b0197456",
              ["folio_number"] = 914,
              ["series"] = "F"
            });
        - lang: PHP
          source: |
            $facturapi = new Facturapi("sk_test_API_KEY");

            $invoice = $facturapi->Receipts->invoice("5a3f3e35f508333611ad6b3e", [
              "customer" => "58e93bd8e86eb318b0197456",
              "folio_number" => 914,
              "series" => "F"
            ]);
      requestBody:
        $ref: "#/components/requestBodies/ReceiptInvoice"
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Nuevo objeto `Invoice` creado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Invoice"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /receipts/global-invoice:
    post:
      operationId: createGlobalInvoice
      tags:
        - receipt
      summary: Crear factura global
      description: |
        Crea una factura global por los recibos abiertos (con `status = ‚Äúopen‚Äù`) de un cierto periodo.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/receipts/global-invoice \
              -H "Authorization: Bearer sk_test_API_KEY" \
              -H "Content-Type: application/json" \
              -d '{
                    "from": "2020-12-01T05:00:00.000Z",
                    "to": "2020-12-31T04:59:59.999Z",
                    "folio_number": 1234,
                    "series": "G"
                }'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');

            const invoice = await facturapi.receipts.createGlobalInvoice({
              from: '2020-12-01T05:00:00.000Z',
              to: '2020-12-31T04:59:59.999Z',
              folio_number: 1234,
              series: 'G'
            });
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var invoice = await facturapi.Receipt.CreateGlobalInvoiceAsync(new Dictionary<string, object>
            {
              ["from"] = "2020-12-01T05:00:00.000Z",
              ["to"] = "2020-12-31T04:59:59.999Z",
              ["folio_number"] = 1234,
              ["series"] = "G"
            });
        - lang: PHP
          source: |
            $facturapi = new Facturapi("sk_test_API_KEY");

            $invoice = $facturapi->Receipts->createGlobalInvoice([
              "from" => "2020-12-01T05:00:00.000Z",
              "to" => "2020-12-31T04:59:59.999Z",
              "folio_number" => 1234,
              "series" => "G"
            ]);
      requestBody:
        $ref: "#/components/requestBodies/ReceiptCreateGlobalInvoice"
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Nuevo objeto `Invoice` creado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Invoice"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"

  /retentions:
    post:
      operationId: createRetention
      tags:
        - retention
      summary: Crear retenci√≥n
      description: |
        Crea una nueva Retenci√≥n. Si el comprobante es creado en ambiente Live, √©sta ser√° **timbrado y enviado al SAT**.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/retentions \
              -H "Authorization: Bearer sk_test_API_KEY" \
              -H "Content-Type: application/json" \
              -d '{
                    "customer": "58e93bd8e86eb318b0197456",
                    "cve_retenc": "26",
                    "periodo": {
                      "mes_ini": 1,
                      "mes_fin": 12,
                      "ejerc": 2020
                    },
                    "totales": {
                      "monto_tot_operacion": 244.654321,
                      "monto_tot_exent": 145.123456,
                      "imp_retenidos": [
                        {
                          "monto_ret": 40,
                          "base_ret": 250
                        }
                      ]
                    }
                  }'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const retention = await facturapi.retentions.create({
              customer: '58e93bd8e86eb318b0197456',
              cve_retenc: '26',
              periodo: {
                mes_ini: 1,
                mes_fin: 12,
                ejerc: 2020
              },
              totales: {
                monto_tot_operacion: 244.654321,
                monto_tot_exent: 145.123456,
                imp_retenidos: [
                  {
                    monto_ret: 40,
                    base_ret: 250
                  }
                ]
              }
            });
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var retention = await facturapi.Retention.CreateAsync(new Dictionary<string, object>
            {
              ["customer"] = "58e93bd8e86eb318b0197456",
              ["cve_retenc"] = "26",
              ["periodo"] = new Dictionary<string, object>
              {
                ["mes_ini"] = 1,
                ["mes_fin"] = 12,
                ["ejerc"] = 2020
              },
              ["totales"] = new Dictionary<string, object>
              {
                ["monto_tot_operacion"] = 244.654321,
                ["monto_tot_exent"] = 145.123456,
                ["imp_retenidos"] = new Dictionary<string, object>[]
                {
                  new Dictionary<string, object>
                  {
                    ["]
                    ["monto_ret"] = 40,
                    ["base_ret"] = 250
                  }
                }
              }
            });
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $retention = $facturapi->Retentions->create([
              "customer" => "58e93bd8e86eb318b0197456",
              "cve_retenc" => "26",
              "periodo" => [
                "mes_ini" => 1,
                "mes_fin" => 12,
                "ejerc" => 2020
              ],
              "totales" => [
                "monto_tot_operacion" => 244.654321,
                "monto_tot_exent" => 145.123456,
                "imp_retenidos" => [
                  [
                    "impuesto" => "ISR",
                    "monto_ret" => 40,
                    "base_ret" => 250
                  ]
                ]
              ]
            ]);
      requestBody:
        $ref: "#/components/requestBodies/RetentionCreate"
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Nuevo objeto `Retention` creado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Retention"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
    get:
      operationId: listRetentions
      tags:
        - retention
      summary: Listar retenciones
      description: Regresa una lista paginada de todas las retenciones de una organizaci√≥n o realiza una b√∫squeda de acuerdo a par√°metros
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            # Todas las retenciones de la organizaci√≥n
            curl https://www.facturapi.io/v1/retentions \
              -H "Authorization: Bearer sk_test_API_KEY"

            # Todas las retenciones emitidas para cierto cliente
            curl "https://www.facturapi.io/v1/retentions" \
              -G \
              -H "Authorization: Bearer sk_test_API_KEY" \
              -d "customer=58e93bd8e86eb318b0197456"

            # P√°gina 3 de los resultados de b√∫squeda de texto libre
            # de retenciones emitidas entre 2017 y 2019
            curl "https://www.facturapi.io/v1/retentions" \
              -G \
              -H "Authorization: Bearer sk_test_API_KEY" \
              -d "q=John+Doe6&date[gte]=2017-01-01T00:00:00.000Z&date[lt]=2020-01-01T00:00:00.000Z&page=3&limit=10"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');

            // Todas las retenciones de la organizaci√≥n
            const retentionSearch = await facturapi.retentions.list();

            // Todas las retenciones emitidas para cierto cliente
            const retentionSearch = await facturapi.retentions.list({
              customer: '590ce6c56d04f840aa8438af'
            });

            // P√°gina 3 de los resultados de b√∫squeda de texto libre
            // de retenciones emitidas entre 2017 y 2019
            const retentionSearch = await facturapi.retentions.list({
              q: 'John Doe',
              date: {
                gte: new Date('2017-01-01T00:00:00.000Z'),
                lt: new Date('2020-01-01T00:00:00.000Z')
              },
              page: 3,
              limit: 10,
            });
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");

            // Todas las retenciones de la organizaci√≥n
            var searchResult = await facturapi.Retention.ListAsync();

            // Todas las retenciones emitidas para cierto cliente
            var searchResult = await facturapi.Retention.ListAsync(
              new Dictionary<string, object>
              {
                ["customer"] = "590ce6c56d04f840aa8438af"
              }
            );

            // P√°gina 3 de los resultados de b√∫squeda de texto libre
            // de retenciones emitidas entre 2017 y 2019
            var searchResult = await facturapi.Retention.ListAsync(
              new Dictionary<string, object>
              {
                ["q"] = "John Doe",
                ["date"] = new Dictionary<string, object>
                  {
                    ["gte"] = new DateTime("2017-01-01T00:00:00.000Z"),
                    ["lt"] = new DateTime("2020-01-01T00:00:00.000Z")
                  },
                ["page"] = 3,
                ["limit"] = 10,
              }
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );

            // Todas las retenciones de la organizaci√≥n
            $retentions = $facturapi->Retentions->all();

            // Todas las retenciones emitidas para cierto cliente
            $retentions = $facturapi->Retentions->all([
              customer => "590ce6c56d04f840aa8438af"
            ]);

            // P√°gina 3 de los resultados de b√∫squeda de texto libre
            // de retenciones emitidas entre 2017 y 2019
            $retentions = $facturapi->Retentions->all([
              q => "John Doe",
              date => [
                gte => new DateTime("2017-01-01T00:00:00.000Z"),
                lt => new DateTime("2020-01-01T00:00:00.000Z")
              ],
              page => 3,
              limit => 10,
            ]);
      parameters:
        - in: query
          name: q
          schema:
            type: string
          description: Consulta. Texto a buscar en el nombre fiscal del cliente o su RFC.
        - in: query
          name: customer
          schema:
            type: string
          description: Identificador del cliente. √ötil para obtener las retenciones emitidas a un s√≥lo cliente.
        - $ref: "#/components/parameters/SearchDate"
        - $ref: "#/components/parameters/SearchPage"
        - $ref: "#/components/parameters/SearchLimit"
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Resultado de la b√∫squeda
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RetentionSearchResult"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /retentions/{retention_id}:
    get:
      operationId: getRetention
      tags:
        - retention
      summary: Obtener retenci√≥n por ID
      description: Regresa el objeto 'Retention' relacionado al `id` especificado.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/retentions/6062d9fb226600001cd22f71 \
              -H "Authorization: Bearer sk_test_API_KEY"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const retention = await facturapi.retentions.retrieve('6062d9fb226600001cd22f71');
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var retention = await facturapi.Retention.RetrieveAsync("6062d9fb226600001cd22f71");
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $retention = $facturapi->Retentions->retrieve( "6062d9fb226600001cd22f71" );
      parameters:
        - in: path
          name: retention_id
          schema:
            type: string
          required: true
          description: ID del objeto a obtener
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Objeto `Retention`
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Retention"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
    delete:
      operationId: cancelRetention
      tags:
        - retention
      summary: Cancelar retenci√≥n
      description: |
        Realiza una solicitud de cancelaci√≥n de retenci√≥n ante el SAT.

        A diferencia de las facturas com√∫nes, la cancelaci√≥n de la retenci√≥n es inmediata y no requiere autorizaci√≥n de parte del receptor.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/retentions/6062d9fb226600001cd22f71 \
              -H "Authorization: Bearer sk_test_API_KEY" \
              -X DELETE
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const canceledRetention = await facturapi.retentions.cancel('6062d9fb226600001cd22f71');
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var canceledRetention = await facturapi.Retention.CancelAsync("6062d9fb226600001cd22f71");
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $canceledRetention = $facturapi->Retentions->cancel("6062d9fb226600001cd22f71");
      parameters:
        - in: path
          name: retention_id
          schema:
            type: string
          required: true
          description: ID de la retenci√≥n a cancelar
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Objeto `Retention` cancelado exitosamente
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Retention"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /retentions/{retention_id}/{format}:
    get:
      operationId: downloadRetention
      tags:
        - retention
      summary: Descargar retenci√≥n
      description: Descarga una retenci√≥n en PDF, XML o ambos en un archivo comprimido ZIP.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            ## Descargar PDF y XML comprimidos en archivo ZIP
            curl https://www.facturapi.io/v1/retentions/58e93bd8e86eb318b019743d/zip \
              -H "Authorization: Bearer sk_test_API_KEY"

            ## Descargar s√≥lo el PDF
            curl https://www.facturapi.io/v1/retentions/58e93bd8e86eb318b019743d/pdf \
              -H "Authorization: Bearer sk_test_API_KEY"

            ## Descargar s√≥lo el XML
            curl https://www.facturapi.io/v1/retentions/58e93bd8e86eb318b019743d/xml \
              -H "Authorization: Bearer sk_test_API_KEY"
        - lang: JavaScript
          label: Node.js
          source: |
            const fs = require('fs');
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');

            // Descargar PDF y XML comprimidos en archivo ZIP
            const zipStream = await facturapi.retentions.downloadZip('58e93bd8e86eb318b019743d');
            const zipFile = fs.createWriteStream('./retencion.zip');
            zipStream.pipe(zipFile);

            // Descargar s√≥lo el PDF
            const pdfStream = await facturapi.retentions.downloadPdf('58e93bd8e86eb318b019743d');
            const pdfFile = fs.createWriteStream('./retencion.pdf');
            pdfStream.pipe(pdfFile);

            // Descargar s√≥lo el XML
            const xmlStream = await facturapi.retentions.downloadXml('58e93bd8e86eb318b019743d');
            const xmlFile = fs.createWriteStream('./retencion.xml');
            xmlStream.pipe(xmlFile);
        - lang: csharp
          label: C#
          source: |
            // Descargar PDF y XML comprimidos en archivo ZIP
            var zipStream = await facturapi.Retention.DownloadZipAsync("58e93bd8e86eb318b019743d");
            // Descargar s√≥lo el XML
            var xmlStream = await facturapi.Retention.DownloadXmlAsync("58e93bd8e86eb318b019743d");
            // Descargar s√≥lo el PDF
            var pdfStream = await facturapi.Retention.DownloadPdfAsync("58e93bd8e86eb318b019743d");

            // Para guardar la descarga en un archivo
            var file = new System.IO.FileStream("C:\\route\\to\\save\\retention.zip", FileMode.Create);
            zipStream.CopyTo(file);
            file.Close();
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );

            // stream containing the PDF and XML as a ZIP file
            $zip = $facturapi->Retentions->download_zip("58e93bd8e86eb318b019743d");
            // stream containing the PDF file
            $pdf = $facturapi->Retentions->download_pdf("58e93bd8e86eb318b019743d"); 
            // stream containing the XML file
            $xml = $facturapi->Retentions->download_xml("58e93bd8e86eb318b019743d");
      parameters:
        - in: path
          name: retention_id
          schema:
            type: string
          required: true
          description: ID del objeto a descargar
        - in: path
          name: format
          schema:
            type: string
            enum:
              - xml
              - pdf
              - zip
          required: true
          description: Formato del archivo de descarga
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Archivo del comprobante CFDI en el formato solicitado
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /retentions/{retention_id}/email:
    post:
      operationId: sendRetentionByEmail
      tags:
        - retention
      summary: Enviar retenci√≥n por correo electr√≥nico
      description: Env√≠a un correo electr√≥nico a la direcci√≥n de tu cliente, con los archivos XML y PDF adjuntos al mensaje.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            # Enviar al correo del cliente
            curl https://www.facturapi.io/v1/retentions/58e93bd8e86eb318b019743d/email \
              -H "Authorization: Bearer sk_test_API_KEY"
              -X POST

            # Enviar a otro correo
            curl https://www.facturapi.io/v1/retentions/58e93bd8e86eb318b019743d/email \
              -H "Authorization: Bearer sk_test_API_KEY"
              -X POST
              -H "Content-Type: application/json" \
              -d '{
                    "email": "another_email@example.com"
                  }'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');

            // Enviar al correo del cliente
            await facturapi.retentions.sendByEmail('58e93bd8e86eb318b019743d');

            // Enviar a otro correo
            await facturapi.retentions.sendByEmail(
              '58e93bd8e86eb318b019743d',
              { email: 'otro@correo.com' }
            );

            // Enviar a m√°s de un correo (m√°x. 10)
            await facturapi.retentions.sendByEmail(
              '58e93bd8e86eb318b019743d',
              { 
                email: [
                  'primer@correo.com',
                  'segundo@correo.com'
                ]
              }
            );
        - lang: csharp
          label: C#
          source: |
            // Enviar al correo del cliente
            await facturapi.Retention.SendByEmailAsync("58e93bd8e86eb318b019743d");

            // Enviar a otro correo
            await facturapi.Retention.SendByEmailAsync(
              "58e93bd8e86eb318b019743d",
              new Dictionary<string, object>
              {
                ["email"] = "otro@correo.com"
              }
            );

            // Enviar a m√°s de un correo
            await facturapi.Retention.SendByEmailAsync(
              "58e93bd8e86eb318b019743d",
              new Dictionary<string, object>
              {
                ["email"] = new String[]
                {
                  "primer@correo.com",
                  "segundo@correo.com"
                }
              }
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );

            // Enviar al correo del cliente
            $facturapi->Retentions->send_by_email("58e93bd8e86eb318b019743d");

            // Enviar a otro correo
            $facturapi->Retentions->send_by_email(
              "58e93bd8e86eb318b019743d",
              "otro@correo.com"
            );

            // Enviar a m√°s de un correo (m√°x 10)
            $facturapi->Retentions->send_by_email(
              "58e93bd8e86eb318b019743d",
              [
                "primer@correo.com",
                "segundo@correo.com"
              ]
            );
      parameters:
        - in: path
          name: retention_id
          schema:
            type: string
          required: true
          description: ID del objeto a obtener
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  description: Direcci√≥n de correo electr√≥nico a enviar la retenci√≥n. Si no se env√≠a este par√°metro, la retenci√≥n ser√° enviada al correo que el cliente tenga registrado.
                  oneOf:
                    - type: string
                      format: email
                      description: Direcci√≥n de correo eletr√≥nico
                      example: otro@correo.com
                    - type: array
                      example: ["primer@correo.com", "segundo@correo.com"]
                      description: Lista de direcciones de correo que recibir√°n la retenci√≥n.
                      maxLength: 10
                      items:
                        type: string
                        format: email
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Archivo del comprobante en el formato solicitado
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"

  /organizations:
    post:
      operationId: createOrganization
      tags:
        - organization
      summary: Crear organizaci√≥n
      description: |
        Crea una nueva Organizaci√≥n que pertenecer√° a tu cuenta de usuario.

        Despu√©s de crear la organizaci√≥n y antes de poder emitir facturas con
        la organizaci√≥n, deber√°s de terminar de configurarla llamando a los
        m√©todos de [Actualizar datos fiscales](#tag/organization/operation/editOrganizationLegal) y
        [Subir certificados (CSD)](#tag/organization/operation/uploadOrganizationCertificate)

        Recuerda que los folios de tu suscripci√≥n podr√°n ser consumidos por
        cualquiera de las organizaaciones registradas bajo tu cuenta.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/organizations \
              -H "Authorization: Bearer sk_user_API_KEY" \
              -H "Content-Type: application/json" \
              -d '{
                  "name": "Skynet"
                }'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_user_API_KEY');
            const organization = await facturapi.organizations.create({
              name: 'Skynet'
            });
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_user_API_KEY");
            var organization = await facturapi.Organization.CreateAsync(new Dictionary<string, object>
            {
              ["name"] = "Skynet"
            });
        - lang: PHP
          source: |
            $facturapi = new Facturapi("sk_user_API_KEY");
            $organization = $facturapi->Organizations->create([
              "name" => "Skynet"
            ]);
      requestBody:
        $ref: "#/components/requestBodies/OrganizationCreate"
      security:
        - "Secret User Key": []
      responses:
        "200":
          description: Nuevo objeto `Organization` creado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Organization"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
    get:
      operationId: listOrganizations
      tags:
        - organization
      summary: Listar organizaciones
      description: Regresa una lista paginada de todas las organizationes registradas bajo tu cuenta, o realiza una b√∫squeda de acuerdo a par√°metros.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/organizations \
              -H "Authorization: Bearer sk_user_API_KEY"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');

            const organizationResults = await facturapi.organizations.list();
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");

            var searchResult = await facturapi.Organization.ListAsync();
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );

            $organizations = $facturapi->Organizations->all()
      parameters:
        - in: query
          name: q
          schema:
            type: string
          description: Consulta. Texto a buscar en `name` (nombre comercial), `legal_name` (nombre fiscal) o en `tax_id` (RFC).
        - $ref: "#/components/parameters/SearchDate"
        - $ref: "#/components/parameters/SearchPage"
        - $ref: "#/components/parameters/SearchLimit"
      security:
        - "Secret User Key": []
      responses:
        "200":
          description: Resultado de la b√∫squeda
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrganizationSearchResult"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /organizations/{organization_id}/legal:
    put:
      operationId: editOrganizationLegal
      tags:
        - organization
      summary: Editar datos fiscales
      description: |
        Actualiza los datos fiscales de la organizaci√≥n.

        Si est√°s buscando c√≥mo editar el RFC, recuerda que la propiedad
        `tax_id` se asigna autom√°ticamente al subir los Certificados de Sello
        Digital.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/organizations/5a2a307be93a2f00129ea035/legal \
              -X PUT \
              -H "Authorization: Bearer sk_user_API_KEY" \
              -H "Content-Type: application/json" \
              -d '{
                    "name": "Skynet",
                    "legal_name": "Skynet S.A. de C.V.",
                    "tax_system": "601",
                    "website": "www.sky.net",
                    "phone": "555-555-5555",
                    "address": {
                      "exterior": "1414",
                      "interior": "12",
                      "zip": "44940",
                      "neighborhood": "Villa Toscana",
                      "city": "Guadalajara",
                      "municipality": "Guadalajara",
                      "state": "Jalisco",
                      "country": "M√©xico"
                    }
                }'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_user_API_KEY');
            const organization = await facturapi.organizations.updateLegal(
              '5a2a307be93a2f00129ea035',
              {
                name: 'Skynet',
                legal_name: 'Skynet S.A. de C.V.',
                tax_system: Facturapi.TaxSystem.GENERAL_LEY_DE_PERSONAS_MORALES,
                website: 'www.sky.net',
                phone: '555-555-5555',
                address: {
                  exterior: '1414',
                  interior: '12',
                  zip: '44940',
                  neighborhood: 'Villa Toscana',
                  city: 'Guadalajara',
                  municipality: 'Guadalajara',
                  state: 'Jalisco',
                  country: 'M√©xico'
                }
              }
            );
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_user_API_KEY");
            var organization = await facturapi.Organization.UpdateLegalAsync(
              "5a2a307be93a2f00129ea035",
              new Dictionary<string, object>
              {
                ["name"] = "Skynet",
                ["legal_name"] = "Skynet S.A. de C.V.",
                ["tax_system"] = "601",
                ["website"] = "www.sky.net",
                ["phone"] = "555-555-5555",
                ["address"] = new Dictionary<string, object>
                {
                  ["exterior"] = "1414",
                  ["interior"] = "12",
                  ["zip"] = "44940",
                  ["neighborhood"] = "Villa Toscana",
                  ["city"] = "Guadalajara",
                  ["municipality"] = "Guadalajara",
                  ["state"] = "Jalisco",
                  ["country"] = "M√©xico"
                }
              }
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi("sk_user_API_KEY");
            $organization = $facturapi->Organizations->updateLegal(
              "5a2a307be93a2f00129ea035", [
                "name" => "Skynet",
                "legal_name" => "Skynet S.A. de C.V.",
                "tax_system" => "601",
                "website" => "www.sky.net",
                "phone" => "555-555-5555",
                "address" => [
                  "exterior" => "1414",
                  "interior" => "12",
                  "zip" => "44940",
                  "neighborhood" => "Villa Toscana",
                  "city" => "Guadalajara",
                  "municipality" => "Guadalajara",
                  "state" => "Jalisco",
                  "country" => "M√©xico"
                )
              ]
            ];
      parameters:
        - in: path
          name: organization_id
          schema:
            type: string
          required: true
          description: ID de la organizaci√≥n
      requestBody:
        $ref: "#/components/requestBodies/OrganizationEditLegal"
      security:
        - "Secret User Key": []
      responses:
        "200":
          description: Objeto `Organization` modificado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Organization"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /organizations/{organization_id}/certificate:
    put:
      operationId: uploadOrganizationCertificate
      tags:
        - organization
      summary: Subir certificados (CSD)
      description: |
        Sube los archivos del Certificado de Sello Digital (CSD) proporcionado
        por el SAT. Esta llamada tambi√©n debe usarse para reemplazar los
        certificados existentes en caso de solicitar nuevos.

        Al actualizar tus certificados se leer√° el RFC y asignar√°
        autom√°ticamente a `legal.tax_id`.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/organizations/5a2a307be93a2f00129ea035/certificate \
              -X PUT \
              -H "Authorization: Bearer sk_user_API_KEY" \
              -H "Content-Type: multipart/form-data" \
              -F 'cer=@/path/to/your/CSD.cer' \
              -F 'key=@/path/to/your/CSD.key' \
              -F 'password=CONTRASE√ëA_DEL_CERTIFICADO'
        - lang: JavaScript
          label: Node.js
          source: |
            const fs = require('fs');
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_user_API_KEY');

            const cerFileStream = fs.createReadStream('/path/to/your/CSD.cer');
            const keyFileStream = fs.createReadStream('/path/to/your/CSD.key');

            const organization = await facturapi.organizations.uploadCertificate(
              '5a2a307be93a2f00129ea035',
              cerFileStream,
              keyFileStream,
              'CONTRASE√ëA_DEL_CERTIFICADO'
            );
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_user_API_KEY");

            var cerFileStream = File.OpenRead(@"C:\path\to\your\CSD.cer");
            var keyFileStream = File.OpenRead(@"C:\path\to\your\CSD.key");

            var organization = await facturapi.Organization.UploadCertificateAsync(
              "5a2a307be93a2f00129ea035",
              cerFileStream,
              keyFileStream,
              "CONTRASE√ëA_DEL_CERTIFICADO"
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi("sk_user_API_KEY");

            $organization = $facturapi->Organizations->uploadCertificate(
              "5a2a307be93a2f00129ea035",
              [
                "cer" => "/path/to/CSD.cer",
                "key" => "/path/to/CSD.key",
                "password" => "mYp455w0rD1553cUr3!"
              ]
            );
      parameters:
        - in: path
          name: organization_id
          schema:
            type: string
          required: true
          description: ID de la organizaci√≥n
      requestBody:
        $ref: "#/components/requestBodies/OrganizationUploadCerts"
      security:
        - "Secret User Key": []
      responses:
        "200":
          description: Objeto `Organization` modificado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Organization"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /organizations/{organization_id}/logo:
    put:
      operationId: uploadOrganizationLogo
      tags:
        - organization
      summary: Subir logotipo
      description: |
        Sube el logotipo de la organizaci√≥n que ser√° colocado en el PDF y en
        los correos que se env√≠an al cliente con la factura adjunta.

        El archivo debe ser una imagen en formato JPG o PNG y tener un tama√±o
        no mayor a 500 KB. Las dimensiones recomendadas son 800 √ó 500px.

        Si la organizaci√≥n ya tiene un logotipo, esta llamada reemplaza el
        logotipo anterior.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/organizations/5a2a307be93a2f00129ea035/logo \
              -X PUT \
              -H "Authorization: Bearer sk_user_API_KEY" \
              -H "Content-Type: multipart/form-data" \
              -F 'file=@/path/to/your/logo.jpg'
        - lang: JavaScript
          label: Node.js
          source: |
            const fs = require('fs');
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_user_API_KEY');

            const fileStream = fs.createReadStream('/path/to/your/logo.jpg');
            const organization = await facturapi.organizations.uploadLogo(
              '5a2a307be93a2f00129ea035',
              fileStream
            );
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_user_API_KEY");

            var fileStream = File.OpenRead(@"C:\path\to\your\logo.jpg");

            var organization = await facturapi.Organization.UploadLogoAsync(
              "5a2a307be93a2f00129ea035",
              fileStream
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi("sk_user_API_KEY");

            $organization = $facturapi->Organizations->uploadLogo(
              "5a2a307be93a2f00129ea035",
              "/path/to/logo.jpg"
            ));
      parameters:
        - in: path
          name: organization_id
          schema:
            type: string
          required: true
          description: ID de la organizaci√≥n
      requestBody:
        $ref: "#/components/requestBodies/OrganizationUploadLogo"
      security:
        - "Secret User Key": []
      responses:
        "200":
          description: Objeto `Organization` modificado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Organization"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /organizations/{organization_id}/customization:
    put:
      operationId: editOrganizationCustomization
      tags:
        - organization
      summary: Editar personalizaci√≥n
      description: |
        Actualiza la informaci√≥n relacionada con la identidad o branding de la organizaci√≥n.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/organizations/5a2a307be93a2f00129ea035/customization \
              -X PUT \
              -H "Authorization: Bearer sk_user_API_KEY" \
              -H "Content-Type: application/json" \
              -d '{
                    "color": "#BADA55",
                    "pdf_extra": {
                      "codes": false,
                      "product_key": true
                    }
                }'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_user_API_KEY');

            const organization = await facturapi.organizations.updateCustomization(
              '5a2a307be93a2f00129ea035',
              {
                color: '#BADA55',
                pdf_extra: {
                  codes: false,
                  product_key: true
                }
              }
            );
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_user_API_KEY");

            var organization = await facturapi.Organization.UpdateCustomizationAsync(
              "5a2a307be93a2f00129ea035",
              new Dictionary<string, object>
              {
                ["color"] = "#BADA55",
                ["pdf_extra"] = new Dictionary<string, object>
                {
                  ["codes"] = false,
                  ["product_key"] = true
                }
              }
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi("sk_user_API_KEY");

            $organization = $facturapi->Organizations->updateCustomization(
              "5a2a307be93a2f00129ea035",
              array(
                "color" => "#BADA55",
                "pdf_extra" => array(
                  "codes" => false,
                  "product_key" => true
                )
              )
            );
      parameters:
        - in: path
          name: organization_id
          schema:
            type: string
          required: true
          description: ID de la organizaci√≥n
      requestBody:
        $ref: "#/components/requestBodies/OrganizationEditCustomization"
      security:
        - "Secret User Key": []
      responses:
        "200":
          description: Objeto `Organization` modificado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Organization"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /organizations/{organization_id}/receipts:
    put:
      operationId: editOrganizationReceiptsSettings
      tags:
        - organization
      summary: Editar config. recibos
      description: |
        Actualiza la configuraci√≥n de recibos de la organizaci√≥n.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/organizations/5a2a307be93a2f00129ea035/receipts \
              -X PUT \
              -H "Authorization: Bearer sk_user_API_KEY" \
              -H "Content-Type: application/json" \
              -d '{
                    "invoicing_period": "month",
                    "duration_days": 14,
                    "next_folio_number": 100,
                    "ask_address": "hidden"
                }'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_user_API_KEY');

            const organization = await facturapi.organizations.updateReceiptSettings(
              '5a2a307be93a2f00129ea035',
              {
                invoicing_period: "month",
                duration_days: 14,
                next_folio_number: 100,
                ask_address: 'hidden'
              }
            );
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_user_API_KEY");

            var organization = await facturapi.Organization.UpdateReceiptSettingsAsync(
              "5a2a307be93a2f00129ea035",
              new Dictionary<string, object>
              {
                ["invoicing_period"] = "month",
                ["duration_days"] = 14,
                ["next_folio_number"] = 100,
                ["ask_address"] = "hidden"
              }
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi("sk_user_API_KEY");

            $organization = $facturapi->Organizations->updateReceiptSettings(
              "5a2a307be93a2f00129ea035",
              [
                "invoicing_period" => "month",
                "duration_days" => 14,
                "next_folio_number" => 100,
                "ask_address" => "hidden"
              ]
            );
      parameters:
        - in: path
          name: organization_id
          schema:
            type: string
          required: true
          description: ID de la organizaci√≥n
      requestBody:
        $ref: "#/components/requestBodies/OrganizationEditReceiptsSettings"
      security:
        - "Secret User Key": []
      responses:
        "200":
          description: Objeto `Organization` modificado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Organization"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /organizations/domain-check:
    get:
      operationId: checkDomainAvailability
      tags:
        - organization
      summary: Revisar dominio disponible
      description: Revisa si un identificador est√° disponible para elegir como dominio para el portal de autofactura.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/organizations/domain-check?domain=empresa-demo \
              -H "Authorization: Bearer sk_user_API_KEY"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');

            const organization = await facturapi.organizations.checkDomainIsAvailable({
              domain: 'empresa-demo'
            });
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var organization = await facturapi.Organization.CheckDomainIsAvailableAsync(
              new Dictionary<string, object>
              {
                ["domain"] = "empresa-demo"
              }
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $organization = $facturapi->Organizations->checkDomainIsAvailable(
              ["domain" => "empresa-demo"]
            );
      parameters:
        - in: query
          name: domain
          schema:
            $ref: "#/components/schemas/DomainField"
      security:
        - "Secret User Key": []
      responses:
        "200":
          description: Objeto `Organization`
          content:
            application/json:
              schema:
                type: object
                properties:
                  available:
                    type: boolean
                    example: true
                    description: Indica si el dominio est√° diponible
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /organizations/{organization_id}/domain:
    put:
      operationId: editOrganizationDomain
      tags:
        - organization
      summary: Elegir dominio de autofactura
      description: |
        Elige el dominio que utilizar√° esta organizaci√≥n en su micrositio de
        autofactura. Una vez elegido el dominio, deber√°s ponerte en contacto
        con nosotros si necesitas cambiarlo.

        El dominio que elijas ser√° el que aparecer√° en el campo
        `self_invoice_url` al crear un nuevo recibo, de la siguiente manera:

        `https://factura.space/{DOMAIN}/{RECEIPT_KEY}`
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/organizations/5a2a307be93a2f00129ea035/domain \
              -X PUT \
              -H "Authorization: Bearer sk_user_API_KEY" \
              -H "Content-Type: application/json" \
              -d '{
                    "domain": "empresa-demo"
                }'
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_user_API_KEY');

            const organization = await facturapi.organizations.updateDomain(
              '5a2a307be93a2f00129ea035',
              { domain: 'empresa-demo' }
            );
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_user_API_KEY");

            var organization = await facturapi.Organization.UpdateDomainAsync(
              "5a2a307be93a2f00129ea035",
              new Dictionary<string, object>
              {
                ["domain"] = "empresa-demo"
              }
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi("sk_user_API_KEY");

            $organization = $facturapi->Organizations->updateDomain(
              "5a2a307be93a2f00129ea035",
              array( "domain" => "empresa-demo" )
            );
      parameters:
        - in: path
          name: organization_id
          schema:
            type: string
          required: true
          description: ID de la organizaci√≥n
      requestBody:
        $ref: "#/components/requestBodies/OrganizationEditDomain"
      security:
        - "Secret User Key": []
      responses:
        "200":
          description: Objeto `Organization` modificado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Organization"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /organizations/{organization_id}:
    get:
      operationId: getOrganization
      tags:
        - organization
      summary: Obtener organizaci√≥n por ID
      description: Regresa el objeto 'Organization' relacionado al `id` especificado.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/organizations/5a2a307be93a2f00129ea035 \
              -H "Authorization: Bearer sk_user_API_KEY"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');
            const organization = await facturapi.organizations.retrieve(
              '5a2a307be93a2f00129ea035'
            );
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var organization = await facturapi.Organization.RetrieveAsync(
              "5a2a307be93a2f00129ea035"
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $organization = $facturapi->Organizations->retrieve("5a2a307be93a2f00129ea035");
      parameters:
        - in: path
          name: organization_id
          schema:
            type: string
          required: true
          description: ID de la organizaci√≥n
      security:
        - "Secret User Key": []
      responses:
        "200":
          description: Objeto `Organization`
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Organization"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
    delete:
      operationId: deleteOrganization
      tags:
        - organization
      summary: Eliminar organizaci√≥n
      description: |
        Elimina la organizaci√≥n de tu cuenta de Facturapi. Una vez eliminada,
        ya no podr√°s acceder a sus recursos, tales como clientes, productos,
        facturas, recibos o retenciones.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/organizations/5a2a307be93a2f00129ea035 \
              -X DELETE \
              -H "Authorization: Bearer sk_user_API_KEY"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_user_API_KEY');
            const organization = await facturapi.organizations.del(
              '5a2a307be93a2f00129ea035'
            );
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_user_API_KEY");
            var organization = await facturapi.Organization.DeleteAsync(
              "5a2a307be93a2f00129ea035"
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_user_API_KEY" );
            $organization = $facturapi->Organizations->delete(
              "5a2a307be93a2f00129ea035"
            );
      parameters:
        - in: path
          name: organization_id
          schema:
            type: string
          required: true
          description: ID del objeto a eliminar
      security:
        - "Secret User Key": []
      responses:
        "200":
          description: Objeto `Organization` eliminado correctamente
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Organization"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /organizations/{organization_id}/apikeys:
    get:
      operationId: getOrganizationApiKeys
      tags:
        - organization
      summary: Obtener Api Keys
      description: Obtiene las llaves secretas de ambiente Test y Live de la organizaci√≥n.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/organizations/5a2a307be93a2f00129ea035/apikeys \
              -H "Authorization: Bearer sk_user_API_KEY"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');

            const apiKeys = await facturapi.organizations.getApiKeys(
              '5a2a307be93a2f00129ea035'
            );
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            var apiKeys = await facturapi.Organization.GetApiKeysAsync(
              "5a2a307be93a2f00129ea035"
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            $organization = $facturapi->Organizations->getApiKeys(
              "5a2a307be93a2f00129ea035"
            );
      parameters:
        - in: path
          name: organization_id
          schema:
            type: string
          required: true
          description: ID de la organizaci√≥n
      security:
        - "Secret User Key": []
      responses:
        "200":
          description: Objeto `Organization`
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrganizationApiKeys"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"

  /check:
    get:
      tags:
        - tools
      summary: Health check (Pulso)
      description: Indica el estatus de disponibilidad de la API.
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: La API est√° operando con normalidad.
          content:
            application/json:
              schema:
                description: a
                type: object
                properties:
                  ok:
                    type: boolean
                    example: true
        "401":
          description: Error de autenticaci√≥n. Aseg√∫rate de estar usando tu llave secreta.
        "502":
          description: Servicio temporalmente no disponible.
  /tools/tax_id_validation:
    get:
      tags:
        - tools
      summary: Validar RFC
      description: |
        Consulta el estado de un RFC en la lista de **EFOS** (Empresas que
        Facturan Operaciones Simuladas). Al aparecer en esta lista, el RFC es o
        fue sospechoso de incurrir en simulaci√≥n de operaciones fiscales
        (empresas factureras).

        La respuesta (detallada m√°s abajo) incluye los resultados de esta
        validaci√≥n. Se incluye la propiedad
        booleana `is_valid`, que Facturapi resuelve interpretando la respuesta.
        Un valor de `true` para esta propiedad indica que el RFC no tiene asuntos
        por resolver y est√° libre de problemas; y lo contrario para `false`.
        Adicionalmente puedes consultar la propiedad data para ver los valores
        en bruto de la consulta al SAT.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/tools/tax_id_validation?tax_id=BBA830831LJ2 \
              -H "Authorization: Bearer sk_test_API_KEY"
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');

            const validation = await facturapi.tools.validateTaxId('BBA830831LJ2');
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");
            
            var customer = await facturapi.Tools.ValidateTaxIdAsync("BBA830831LJ2");
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );
            
            $customer = $facturapi->Tools->validateTaxId("BBA830831LJ2");
      parameters:
        - in: query
          name: tax_id
          required: true
          schema:
            type: string
            description: RFC a validar
            example: BBA830831LJ2
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Resultado de la validaci√≥n
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TaxIdValidationResult"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  
  /catalogs/products:
    get:
      tags:
        - sat_keys
      summary: Producto/Servicio
      description: Busca en el cat√°logo Productos/Servicios del SAT, el cual contiene la clave a incluir en la factura.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/catalogs/products?q=ukelele \
              -H "Authorization: Bearer sk_test_API_KEY" 
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');

            const searchResult = await facturapi.catalogs.searchProducts({
              q: 'ukelele'
            });
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");

            var searchResult = await facturapi.Catalog.SearchProducts(
              new Dictionary<string, object>
              {
                ["q"] = "ukelele"
              }
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );

            $result = $facturapi->Catalogs->searchProducts([
              "q" => "ukelele"
            ]);
      parameters:
        - in: query
          name: q
          schema:
            type: string
          description: Consulta. Texto a buscar en la descripci√≥n de la categor√≠a.
        - $ref: "#/components/parameters/SearchPage"
        - $ref: "#/components/parameters/SearchLimit"
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Resultado de la b√∫squeda
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductCatalogSearchResult"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
  /catalogs/units:
    get:
      tags:
        - sat_keys
      summary: Unidades de medida
      description: Busca en el cat√°logo de Unidades de Medida del SAT.
      x-codeSamples:
        - lang: Bash
          label: cURL
          source: |
            curl https://www.facturapi.io/v1/catalogs/units?q=pulgada \
              -H "Authorization: Bearer sk_test_API_KEY" 
        - lang: JavaScript
          label: Node.js
          source: |
            const Facturapi = require('facturapi');
            const facturapi = new Facturapi('sk_test_API_KEY');

            const searchResult = await facturapi.catalogs.searchUnits({
              q: 'pulgada'
            });
        - lang: csharp
          label: C#
          source: |
            var facturapi = new FacturapiClient("sk_test_API_KEY");

            var searchResult = await facturapi.Catalog.SearchUnits(
              new Dictionary<string, object>
              {
                ["q"] = "pulgada"
              }
            );
        - lang: PHP
          source: |
            $facturapi = new Facturapi( "sk_test_API_KEY" );

            $result = $facturapi->Catalogs->searchUnits([
              "q" => "pulgada"
            ]);
      parameters:
        - in: query
          name: q
          schema:
            type: string
          description: Consulta. Texto a buscar en la descripci√≥n de la unidad de medida.
        - $ref: "#/components/parameters/SearchPage"
        - $ref: "#/components/parameters/SearchLimit"
      security:
        - "Secret Live Key": []
        - "Secret Test Key": []
      responses:
        "200":
          description: Resultado de la b√∫squeda
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UnitCatalogSearchResult"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthenticated"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/UnexpectedError"
components:
  responses:
    BadRequest:
      description: Error en par√°metros de la petici√≥n
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GenericError"
    Unauthenticated:
      description: Error de autenticaci√≥n
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GenericError"
    NotFound:
      description: No se encontr√≥ el recurso especificado.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GenericError"
    UnexpectedError:
      description: Error inesperado
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GenericError"

  requestBodies:
    CustomerCreate:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/CustomerCreateInput"
    CustomerEdit:
      content:
        application/json:
          schema:
            allOf:
              - $ref: "#/components/schemas/CustomerProperties"
    ProductCreate:
      content:
        application/json:
          schema:
            allOf:
              - $ref: "#/components/schemas/ProductRequiredProperties"
              - $ref: "#/components/schemas/ProductProperties"
    ProductEdit:
      content:
        application/json:
          schema:
            allOf:
              - $ref: "#/components/schemas/ProductProperties"
    InvoiceCreate:
      content:
        application/json:
          schema:
            oneOf:
              - $ref: "#/components/schemas/InvoiceIngresoInput"
              - $ref: "#/components/schemas/InvoiceEgresoInput"
              - $ref: "#/components/schemas/InvoicePagoInput"
              - $ref: "#/components/schemas/InvoiceNominaInput"
              - $ref: "#/components/schemas/InvoiceTrasladoInput"
    ReceiptCreate:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ReceiptInput"
    ReceiptInvoice:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/InvoiceReceiptInput"
    ReceiptCreateGlobalInvoice:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GlobalInvoiceInput"
    RetentionCreate:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/RetentionInput"
    OrganizationCreate:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/OrganizationCreateInput"
    OrganizationEditLegal:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/OrganizationLegalInput"
    OrganizationUploadCerts:
      content:
        multipart/form-data:
          schema:
            $ref: "#/components/schemas/OrganizationCertsInput"
    OrganizationUploadLogo:
      content:
        multipart/form-data:
          schema:
            $ref: "#/components/schemas/OrganizationLogoInput"
    OrganizationEditCustomization:
      content:
        multipart/form-data:
          schema:
            $ref: "#/components/schemas/OrganizationCustomizationInput"
    OrganizationEditReceiptsSettings:
      content:
        multipart/form-data:
          schema:
            $ref: "#/components/schemas/OrganizationReceiptsInput"
    OrganizationEditDomain:
      content:
        multipart/form-data:
          schema:
            $ref: "#/components/schemas/OrganizationDomainInput"

  parameters:
    SearchDate:
      in: query
      name: date
      style: deepObject
      schema:
        $ref: "#/components/schemas/DateRange"
      description: Objeto con rango de fechas solicitado.
    SearchPage:
      in: query
      name: page
      schema:
        type: integer
        minimum: 1
      description: P√°gina de resultados a regresar, empezando desde la p√°gina 1.
    SearchLimit:
      in: query
      name: limit
      schema:
        type: integer
        minimum: 1
        maximum: 50
      description: N√∫mero del 1 al 50 que representa la cantidad m√°xima de resultados a regresar con motivos de paginaci√≥n.

  schemas:
    DateRange:
      type: object
      properties:
        gt:
          type: string
          format: date-time
          title: Greater than
          description: L√≠mite inferior exclusivo del rango de fechas a solicitar.
        gte:
          type: string
          format: date-time
          title: Greater than or equals
          description: L√≠mite inferior inclusivo del rango de fechas a solicitar.
        lt:
          type: string
          format: date-time
          title: Lesser than
          description: L√≠mite superior exclusivo del rango de fechas a solicitar.
        lte:
          type: string
          format: date-time
          title: Lesser than or equals
          description: L√≠mite superior inclusivo del rango de fechas a solicitar.
    GenericError:
      type: object
      properties:
        message:
          type: string
          title: Descripci√≥n del error
          description: Indica qu√© sali√≥ mal y puede incluir una sugerencia sobre c√≥mo solucionar el error.

    # Common base objects
    SearchResult:
      type: object
      properties:
        page:
          type: integer
          example: 1
          title: P√°gina
          description: N√∫mero de p√°gina de resultados
        total_pages:
          type: integer
          example: 1
          title: P√°ginas totales
          description: N√∫mero total de p√°ginas de resultados
        total_results:
          type: integer
          example: 1
          title: Resultados totales
          description: N√∫mero de elementos individuales en todas las p√°ginas de resultados
    ResourceAutoGeneratedProps:
      type: object
      properties:
        id:
          type: string
          description: ID del objeto
          example: "590ce6c56d04f840aa8438af"
        created_at:
          type: string
          format: date-time
          description: Fecha de registro
          example: "2017-05-05T20:55:33.468Z"
        livemode:
          type: boolean
          description: Si el valor es `true`, indica que el objeto fue creado en ambiente Live; o si es `false`, en ambiente Test.
          example: false

    # Global objects
    TaxIdValidationResult:
      type: object
      properties:
        efos:
          type: object
          description: |
            Resultado de la validaci√≥n en la lista de Empresas que
            Facturan Operaciones Simuladas del SAT.
          properties:
            is_valid:
              type: boolean
              example: true
              description: |
                Indica si el RFC tiene alg√∫n asunto relacionado con esta lista.
                `true`: El RFC no est√° en la lista de EFOS o su situaci√≥n fue
                apelada y result√≥ favorable. `false`: El RFC est√° registrado como
                ‚ÄúPresunto‚Äù o ‚ÄúDefinitivo‚Äù en la lista de EFOS.
            data:
              type: object
              description: |
                Objeto con el resultado de la b√∫queda ante el SAT.
                Toda la informaci√≥n contenida en este objeto proviene del SAT.
              properties:
                mensaje:
                  type: string
                  description: |
                    Disponible s√≥lo cuando el RFC no fue encontrado en la lista,
                    lo cual es bueno.
                fechaLista:
                  type: string
                  example: Informaci√≥n actualizada al 17 de septiembre de 2021
                  description: Texto que indica la fecha de actualizaci√≥n de la lista.
                detalles:
                  type: array
                  description: Arreglo con los resultados de la b√∫squeda en la lista de EFOS.
                  items:
                    type: object
                    properties:
                      rfc:
                        type: string
                        example: NOR170627727
                        description: El RFC consultado, a manera de confirmaci√≥n.
                      razonSocial:
                        type: string
                        example: NORMANDIA FERRE, S.A. DE C.V.
                        description: Raz√≥n social del contribuyente.
                      situacionContribuyente:
                        type: string
                        example: Definitivo
                        description: |
                          Texto que indica la situaci√≥n actual. Consulta
                          [esta tabla](#situaci√≥n-del-contribuyente) para ver
                          el detalle de los distintos valores.
                      numFechaPresuncion:
                        type: string
                        example: 500-05-2020-23758 de fecha 03 de noviembre de 2020
                        description: Texto con identificador y fecha del reporte de presunci√≥n.
                      pubFechaSatPresuntos:
                        type: string
                        format: "DD/MM/YYYY"
                        example:  03/11/2020
                        description: Fecha de publicaci√≥n de presunci√≥n.
                      numGlobalPresuncion:
                        type: string
                        example: 500-05-2020-23758 de fecha 03 de noviembre de 2020
                        description: Texto con identificador y fecha de publicaci√≥n en el listado global de presunci√≥n.
                      pubFechaDofPresuntos:
                        type: string
                        format: "DD/MM/YYYY"
                        example: 18/11/2020
                        description: Fecha de publicaci√≥n en el Diario Oficial de la Federaci√≥n (DOF).
                      pubSatDefinitivos: 
                        type: string
                        example: 500-05-2021-151
                        description: Identificador de la publicaci√≥n de estado ‚ÄúDefinitivo‚Äù.
                      pubDofDefinitivos: 
                        type: string
                        format: "DD/MM/YYYY"
                        example: 25/05/2021
                        description: Fecha de la publicaci√≥n de estado ‚ÄúDefinitivo‚Äù en el DOF.
                      numFechaSentFav:
                        type: string
                        example: 500-05-2021-15156 de fecha 25 de mayo de 2021
                        description: Texto con identificador y fecha de sentencia favorable.
                      pubSatSentFav: 
                        type: string
                        example: 08/06/2021
                        format: "DD/MM/YYYY"
                        description: Fecha de sentencia favorable
                      
    ProductCatalogResult:
      type: object
      properties:
        key:
          type: string
          description: Clave del cat√°logo
          example: 60131324
        description:
          type: string
          description: Descripci√≥n
          example: Ukelele
        score:
          type: number
          description: |
            N√∫mero del 0 al 1 que representa el nivel de coincidencia del
            resultado con respecto a la consulta de b√∫squeda.
          example: 0.8
    UnitCatalogResult:
      type: object
      properties:
        key:
          type: string
          description: Clave del cat√°logo
          example: INH
        description:
          type: string
          description: Descripci√≥n
          example: Pulgada
        score:
          type: number
          description: |
            N√∫mero del 0 al 1 que representa el nivel de coincidencia del
            resultado con respecto a la consulta de b√∫squeda.
          example: 0.9

    ProductCatalogSearchResult:
      allOf:
        - $ref: "#/components/schemas/SearchResult"
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: "#/components/schemas/ProductCatalogResult"
    UnitCatalogSearchResult:
      allOf:
        - $ref: "#/components/schemas/SearchResult"
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: "#/components/schemas/UnitCatalogResult"

    
    LocalTax:
      type: object
      required:
        - rate
        - type
      properties:
        rate:
          type: number
          description: Tasa del impuesto
        type:
          type: string
          description: Nombre del impuesto. Texto libre.
        withholding:
          type: boolean
          default: false
          description: Indica si se trata de un impuesto retenido (`true`), o un impuesto trasladado (`false`)
    BaseTax:
      title: Tax
      type: object
      discriminator:
        propertyName: type
        mapping:
          IVA: "#/components/schemas/BaseTax"
          ISR: "#/components/schemas/BaseTax"
          IEPS: "#/components/schemas/IepsTax"
      properties:
        rate:
          type: number
          default: 0.16
          description: Tasa del impuesto
        type:
          type: string
          default: IVA
          description: Tipo de impuesto.
          enum:
            - IVA
            - ISR
            - IEPS
        factor:
          type: string
          default: Tasa
          enum:
            - Tasa
            - Cuota
            - Exento
          description: Tipo factor
        withholding:
          type: boolean
          default: false
          description: Indica si se trata de un impuesto retenido (`true`), o un impuesto trasladado (`false`)
    IepsTax:
      type: object
      allOf:
        - $ref: "#/components/schemas/BaseTax"
        - type: object
          properties:
            ieps_mode:
              type: string
              default: sum_before_taxes
              enum:
                - sum_before_taxes
                - break_down
                - unit
              description: |
                Indica la manera de cobrar el impuesto, y puede tener los valores:

                `"sum_before_taxes"`: Aplica primero el IEPS al subtotal y usa el resultado como base del resto de impuestos en el producto.

                `"break_down"`: Cobra y desgloza el IEPS al mismo nivel que el resto de los impuestos en el producto.

                `"unit"`: Aplica el IEPS antes del precio unitario, y usa el precio unitario original como base para el resto de impuestos.

                Consulta con tu contador qu√© caso aplica para tu giro de empresa y producto.

    Stamp:
      type: object
      description: Informaci√≥n sobre el timbre fiscal digital agregado por el PAC.
      properties:
        signature:
          type: string
          description: Sello digital del comprobante fiscal.
        date:
          type: string
          format: date-time
          description: Fecha de timbrado en formato ISO8601 (UTC String).
        sat_cert_number:
          type: string
          description: N√∫mero de serie del certificado del SAT usado para timbrar.
        sat_signature:
          type: string
          description: Sello digital del timbre fiscal digital.

    LineItem:
      type: object
      properties:
        quantity:
          type: number
          description: Cantidad de unidades inclu√≠das del mismo concepto.
          example: 1
        discount:
          type: number
          description: Monto total de descuento aplicado a este concepto.
          example: 0
        product:
          $ref: "#/components/schemas/LineItemProduct"
          # description: Objeto con informaci√≥n del producto o servicio facturado.
    LineItemInput:
      title: LineItem
      required:
        - product
      type: object
      description: Conceptos incluidos en el documento
      properties:
        quantity:
          type: number
          default: 1
          description: Cantidad de unidades inclu√≠das del mismo concepto.
          example: 1
        discount:
          type: number
          description: Monto total de descuento aplicado a este concepto.
          default: 0
          example: 0
        product:
          description: Objeto con informaci√≥n del producto o servicio facturado.
          oneOf:
            - $ref: "#/components/schemas/LineItemProductInput"
            - type: string
              title: product_id
              description: ID de un producto previamente registrado en Facturapi
        customs_keys:
          type: array
          items:
            type: string
          description: N√∫meros de pedimento asociados a este concepto.
        complement:
          type: string
          format: xml
          description: C√≥digo XML de tu complemento. Recuerda que debes a√±adir el prefijo y las URLs usando el par√°metro namespaces.
        parts:
          type: array
          items:
            $ref: "#/components/schemas/PartInput"
    LineItemTrasladoInput:
      title: LineItem
      required:
        - product
      type: object
      description: Conceptos incluidos en el documento
      properties:
        quantity:
          type: number
          default: 1
          description: Cantidad de unidades inclu√≠das del mismo concepto.
          example: 1
        product:
          description: Objeto con informaci√≥n del producto o servicio facturado.
          oneOf:
            - $ref: "#/components/schemas/LineItemTrasladoProductInput"
            - type: string
              title: product_id
              description: ID de un producto previamente registrado en Facturapi
        customs_keys:
          type: array
          items:
            type: string
          description: N√∫meros de pedimento asociados a este concepto.
        complement:
          type: string
          format: xml
          description: C√≥digo XML de tu complemento. Recuerda que debes a√±adir el prefijo y las URLs usando el par√°metro namespaces.
        parts:
          type: array
          items:
            $ref: "#/components/schemas/PartInput"

    CustomComplementProperties:
      title: CustomComplement
      type: object
      properties:
        type:
          type: string
          enum:
            - custom
          description: Tipo de complemento.
        data:
          type: string
          format: xml
          description: C√≥digo XML de tu complemento tal cual como quieres que se inserte en el XML. Debe contener s√≥lamente un nodo XML ra√≠z.
    CustomComplementInput:
      title: CustomComplement
      allOf:
        - type: object
          required:
            - type
            - data
        - $ref: "#/components/schemas/CustomComplementProperties"

    NominaComplementDataInput:
      title: NominaComplementData
      description: Objeto con la informaci√≥n del complemento de n√≥mina.
      allOf:
        - type: object
          required:
            - fecha_inicial_pago
            - fecha_final_pago
            - num_dias_pagados
            - receptor
            - percepciones
        - $ref: "#/components/schemas/NominaComplementDataDirectProperties"
        - $ref: "#/components/schemas/NominaComplementDataNestedInput"
    NominaComplementDataProperties:
      description: Complemento de N√≥mina.
      allOf:
        - $ref: "#/components/schemas/NominaComplementDataDirectProperties"
        - $ref: "#/components/schemas/NominaComplementDataNestedProperties"
    NominaComplementDataDirectProperties:
      type: object
      properties:
        tipo_nomina:
          type: string
          default: O
          enum:
            - O
            - E
          description: |
            Tipo de n√≥mina.
            - `‚ÄúO‚Äù` (Ordinaria): Cuando corresponde a un pago que se realiza de manera habitual, como sueldos.
            - `‚ÄúE‚Äù` (Extraordinaria): Para pagos fuera de lo habitual, como liquidaciones, aguinaldos o bonos.
        fecha_pago:
          type: string
          format: date
          default: now
          description: Fecha de pago de la n√≥mina al trabajador.
        fecha_inicial_pago:
          type: string
          format: date
          description: Fecha inicial del periodo de pago.
        fecha_final_pago:
          type: string
          format: date
          description: Fecha final del periodo de pago.
        num_dias_pagados:
          type: number
          minimum: 0
          exclusiveMinimum: true
          description: N√∫mero de d√≠as pagados. Puede ser entero o fracci√≥n.
    NominaComplementDataNestedInput:
      type: object
      properties:
        emisor:
          $ref: "#/components/schemas/NominaEmisorProperties"
        receptor:
          $ref: "#/components/schemas/NominaReceptorInput"
        percepciones:
          $ref: "#/components/schemas/NominaPercepcionesInput"
        deducciones:
          type: array
          description: Arreglo de objetos donde se expresan las deducciones aplicables.
          items:
            $ref: "#/components/schemas/NominaDeduccionInput"
        otros_pagos:
          type: array
          description: Arreglo de objetos para expresar otros pagos aplicables.
          items:
            title: OtroPago
            allOf:
              - $ref: "#/components/schemas/NominaOtroPagoInput"
              - type: object
                properties:
                  compensacion_saldos_a_favor:
                    $ref: "#/components/schemas/NominaCompensacionInput"
        incapacidades:
          type: array
          description: Arreglo de objetos con informaci√≥n de incapacidades.
          items:
            $ref: "#/components/schemas/NominaIncapacidadInput"
    NominaComplementDataNestedProperties:
      type: object
      properties:
        emisor:
          $ref: "#/components/schemas/NominaEmisorProperties"
        receptor:
          $ref: "#/components/schemas/NominaReceptorProperties"
        percepciones:
          $ref: "#/components/schemas/NominaPercepcionesProperties"
        deducciones:
          type: array
          description: Arreglo de objetos donde se expresan las deducciones aplicables.
          items:
            $ref: "#/components/schemas/NominaDeduccionProperties"
        otros_pagos:
          type: array
          description: Arreglo de objetos para expresar otros pagos aplicables.
          items:
            allOf:
              - $ref: "#/components/schemas/NominaOtroPagoDirectProperties"
              - type: object
                properties:
                  compensacion_saldos_a_favor:
                    $ref: "#/components/schemas/NominaCompensacionProperties"
        incapacidades:
          type: array
          description: Arreglo de objetos con informaci√≥n de incapacidades.
          items:
            $ref: "#/components/schemas/NominaIncapacidadProperties"

    NominaIncapacidadInput:
      title: Incapacidad
      allOf:
        - type: object
          required:
            - dias_incapacidad
            - tipo_incapacidad
        - $ref: "#/components/schemas/NominaIncapacidadProperties"
    NominaIncapacidadProperties:
      type: object
      properties:
        dias_incapacidad:
          type: integer
          description: N√∫mero de d√≠as enteros que el trabajador se incapacit√≥ en el periodo.
        tipo_incapacidad:
          type: string
          description: Clave del cat√°logo [Tipo de Incapacidad](#tipo-de-incapacidad).
        importe_monetario:
          type: number
          description: Monto del importe monetario de la incapacidad.
    NominaOtroPagoInput:
      title: OtroPago
      allOf:
        - type: object
          required:
            - tipo_otro_pago
            - clave
            - importe
        - $ref: "#/components/schemas/NominaOtroPagoDirectProperties"
        - type: object
          properties:
            compensacion_saldos_a_favor:
              $ref: "#/components/schemas/NominaCompensacionInput"
    NominaOtroPagoDirectProperties:
      type: object
      properties:
        tipo_otro_pago:
          type: string
          description: Clave del cat√°logo [Tipo de Otro Pago](#tipo-de-otro-pago).
        clave:
          type: string
          minLength: 3
          maxLength: 15
          description: Clave de otro pago de n√≥mina propia de la contabilidad de cada patr√≥n.
        concepto:
          type: string
          description: Descripci√≥n alternativa correspondiente a la clave utilizada.
        importe:
          type: number
          description: Importe por concepto de otro pago.
        subsidio_causado:
          type: number
          description: |
            Subsudio causado conforme a la tabla del subsidio para el empleo
            publicada en el Anexo 8 de la Resoluci√≥n Miscel√°nea Fiscal vigente.

            Este valor ser√° insertado dentro del nodo `SubsidioAlEmpleo`, y es
            requerido cuando el valor de `tipo_otro_pago` es `"002"`.
    NominaCompensacionInput:
      allOf:
        - type: object
          required:
            - saldo_a_favor
            - ano
            - remanente_sal_fav
        - $ref: "#/components/schemas/NominaCompensacionProperties"
    NominaCompensacionProperties:
      type: object
      description: Objeto con informaci√≥n referente a la compensaci√≥n de saldos a favor de un trabajador.
      properties:
        saldo_a_favor:
          type: number
          description: Monto por saldo a favor determinado por el patr√≥n al trabajador en periodos o ejercicios anteriores.
        ano:
          type: integer
          description: A√±o en que se determin√≥ el saldo a favor del trabajador.
        remanente_sal_fav:
          type: number
          description: Remanente del saldo a favor del trabajador.
    NominaDeduccionInput:
      title: Deduccion
      allOf:
        - type: object
          required:
            - tipo_deduccion
            - clave
            - importe
        - $ref: "#/components/schemas/NominaDeduccionProperties"
    NominaDeduccionProperties:
      type: object
      properties:
        tipo_deduccion:
          type: string
          description: Clave del cat√°logo [Tipo de deducci√≥n](#tipo-de-deducci√≥n).
        concepto:
          type: string
          description: Concepto de la deducci√≥n. Si no se env√≠a, se utilizar√° la descripci√≥n del cat√°logo del tipo de deducci√≥n.
        clave:
          type: string
          minLength: 3
          maxLength: 15
          description: Clave de control interno que asigna el patr√≥n a cada deducci√≥n (descuento) de n√≥mina propia de su contabilidad.
        importe:
          type: number
          description: Importe del concepto de deducci√≥n.
    NominaPercepcionesInput:
      type: object
      title: Percepciones
      description: Objeto para indicar las percepciones aplicables.
      required:
        - percepcion
      properties:
        percepcion:
          type: array
          description: Objeto con informaci√≥n detallada de cada percepci√≥n.
          items:
            $ref: "#/components/schemas/NominaPercepcionInput"
        jubilacion_pension_retiro:
          $ref: "#/components/schemas/NominaJubilacionInput"
        separacion_indemnizacion:
          $ref: "#/components/schemas/NominaSeparacionInput"
    NominaPercepcionesProperties:
      type: object
      title: Percepciones
      description: Objeto para indicar las percepciones aplicables.
      properties:
        percepcion:
          type: array
          description: Objeto con informaci√≥n detallada de cada percepci√≥n.
          items:
            $ref: "#/components/schemas/NominaPercepcionProperties"
        jubilacion_pension_retiro:
          $ref: "#/components/schemas/NominaJubilacionProperties"
        separacion_indemnizacion:
          $ref: "#/components/schemas/NominaSeparacionProperties"
    NominaSeparacionInput:
      title: Separacion
      allOf:
        - type: object
          required:
            - total_pagado
            - num_anos_servicio
            - ultimo_sueldo_mens_ord
            - ingreso_acumulable
            - ingreso_no_acumulable
        - $ref: "#/components/schemas/NominaSeparacionProperties"
    NominaSeparacionProperties:
      type: object
      title: Jubilacion
      description: Objeto con informaci√≥n detallada de pagos por separaci√≥n (despido) o indemnizaci√≥n.
      properties:
        total_pagado:
          type: number
          description: Monto total pagado por concepto de separaci√≥n o indemnizaci√≥n.
        num_anos_servicio:
          type: integer
          description: A√±os de servicio que labor√≥ el trabajador, redondeado al entero inmediato superior.
        ultimo_sueldo_mens_ord:
          type: number
          description: √öltimo sueldo mensual ordinario percibido por el trabajador.
        ingreso_acumulable:
          type: number
          description: Monto por ingresos acumulables.
        ingreso_no_acumulable:
          type: number
          description: Monto por ingresos no acumulables.
    NominaJubilacionInput:
      title: Jubilacion
      allOf:
        - type: object
          required:
            - ingreso_acumulable
            - ingreso_no_acumulable
        - $ref: "#/components/schemas/NominaJubilacionProperties"
    NominaJubilacionProperties:
      type: object
      description: Objeto con informaci√≥n detallada de pagos por jubilaci√≥n, pensiones o haberes de retiro.
      properties:
        total_una_exhibicion:
          type: number
          description: Monto total del pago entregado en una sola exhibici√≥n.
        total_parcialidad:
          type: number
          description: Monto total del pago entregado en parcialidades.
        monto_diario:
          type: number
          description: Monto diario percibido por el trabajador cuando el pago se realiza en parcialidades.
        ingreso_acumulable:
          type: number
          description: Ingresos acumulables percibidos por el trabajador.
        ingreso_no_acumulable:
          type: number
          description: Ingresos no acumulables percibidos por el trabajador.
    NominaPercepcionProperties:
      title: Percepcion
      allOf:
        - $ref: "#/components/schemas/NominaPercepcionDirectProperties"
        - $ref: "#/components/schemas/NominaPercepcionNestedProperties"
    NominaPercepcionInput:
      title: Percepcion
      allOf:
        - type: object
          required:
            - tipo_percepcion
            - clave
            - importe_gravado
            - importe_exento
        - $ref: "#/components/schemas/NominaPercepcionDirectProperties"
        - $ref: "#/components/schemas/NominaPercepcionNestedInput"
    NominaPercepcionDirectProperties:
      type: object
      properties:
        tipo_percepcion:
          type: string
          description: Clave del cat√°logo [Tipo de percepci√≥n](#tipo-de-percepcion).
        concepto:
          type: string
          description: Concepto de la percepci√≥n. Si no se env√≠a, se utilizar√° la descripci√≥n del cat√°logo del tipo de percepci√≥n.
        clave:
          type: string
          minLength: 3
          maxLength: 15
          description: Clave de control interno que asigna el patr√≥n a cada percepci√≥n de n√≥mina propia de su contabilidad.
        importe_gravado:
          type: number
          description: Importe gravado por el concepto indicado en el tipo de percepci√≥n.
        importe_exento:
          type: number
          description: Importe exento por el concepto indicado en el tipo de percepci√≥n.
    NominaPercepcionNestedInput:
      type: object
      properties:
        acciones_o_titulos:
          $ref: "#/components/schemas/NominaAccionesInput"
        horas_extra:
          type: array
          description: Arreglo de objetos para expresar las horas extra aplicables. Requerido cuando el tipo de percepci√≥n es ‚Äú019‚Äù (Horas extras).
          items:
            $ref: "#/components/schemas/NominaHorasExtraInput"
    NominaPercepcionNestedProperties:
      type: object
      properties:
        acciones_o_titulos:
          $ref: "#/components/schemas/NominaAccionesProperties"
        horas_extra:
          type: array
          description: Arreglo de objetos para expresar las horas extra aplicables. Requerido cuando el tipo de percepci√≥n es ‚Äú019‚Äù (Horas extras).
          items:
            $ref: "#/components/schemas/NominaHorasExtraProperties"
    NominaHorasExtraInput:
      title: HorasExtra
      allOf:
        - type: object
          required:
            - dias
            - tipo_horas
            - horas_extra
            - importe_pagado
        - $ref: "#/components/schemas/NominaHorasExtraProperties"
    NominaHorasExtraProperties:
      type: object
      title: HorasExtra
      properties:
        dias:
          type: integer
          description: N√∫mero de d√≠as en que el trabajador labor√≥ horas extra adicionales a su jornada normal de trabajo.
        tipo_horas:
          type: string
          description: Clave del cat√°logo [Tipo de Horas](#tipo-de-Horas).
        horas_extra:
          type: integer
          description: N√∫mero de horas extra trabajadas en el periodo.
        importe_pagado:
          type: number
          description: Importe pagado por las horas extra.
    NominaAccionesInput:
      title: Accion
      allOf:
        - type: object
          required:
            - valor_mercado
            - precio_al_otorgarse
        - $ref: "#/components/schemas/NominaAccionesProperties"
    NominaAccionesProperties:
      type: object
      title: Accion
      description: Objeto para expresar ingresos por acciones o t√≠tulos valor que representan bienes. Es requerido cuando existan ingresos por sueldos derivados de adquisici√≥n de acciones o t√≠tulos.
      properties:
        valor_mercado:
          type: number
          description: Valor de mercado de las Acciones o T√≠tulos valor al ejercer la opci√≥n.
        precio_al_otorgarse:
          type: number
          description: Precio establecido al otorgarse la opci√≥n de ingresos en acciones o t√≠tulos valor.
    NominaReceptorProperties:
      type: object
      title: Receptor
      description: Informaci√≥n del trabajador.
      allOf:
        - $ref: "#/components/schemas/NominaReceptorDirectProperties"
        - $ref: "#/components/schemas/NominaReceptorNestedProperties"
    NominaReceptorInput:
      type: object
      title: Receptor
      description: Informaci√≥n del trabajador.
      allOf:
        - type: object
          required:
            - curp
            - tipo_contrato
            - tipo_regimen
            - num_empleado
            - periodicidad_pago
            - clave_ent_fed
        - $ref: "#/components/schemas/NominaReceptorDirectProperties"
        - $ref: "#/components/schemas/NominaReceptorNestedInput"
    NominaReceptorDirectProperties:
      type: object
      properties:
        curp:
          type: string
          description: CURP del trabajador.
        num_seguridad_social:
          type: string
          description: N√∫mero de seguridad social.
        fecha_inicio_rel_laboral:
          type: string
          format: date
          description: Fecha de inicio de la relaci√≥n laboral entre el empleador y el empleado.
        antiguedad:
          oneOf:
            - type: string
            - type: boolean
          default: true
          description: Antig√ºedad del empleado en el formato especificado por el SAT. Si se env√≠a un `string`, se espera que √©ste contenga la antig√ºedad en el formato que especifica el SAT. Si se env√≠a el valor booleano `false`, este campo no se incluir√° en la factura. Si se env√≠a el valor booleano `true` y `fecha_inicio_rel_laboral` existe, este valor se calcular√° con la diferencia entre la fecha de inicio de relaci√≥n laboral y la fecha de pago.
        tipo_contrato:
          type: string
          description: Clave del cat√°logo del SAT [Tipo de Contrato](#tipo-de-contrato).
        sindicalizado:
          type: boolean
          default: false
          description: Indica si el trabajador est√° asociado a un sindicato.
        tipo_jornada:
          type: string
          description: Clave del cat√°logo del SAT [Tipo de Jornada](#tipo-de-jornada).
        tipo_regimen:
          type: string
          description: Clave del cat√°logo del SAT [Tipo de R√©gimen](#tipo-de-r√©gimen).
        num_empleado:
          type: string
          minLength: 1
          maxLength: 15
          description: N√∫mero interno de empleado, asignado por el empleador.
        departamento:
          type: string
          description: Nombre del departamento o √°rea a la que pertenece el trabajador.
        puesto:
          type: string
          description: Nombre del puesto asignado al empleado o el nombre de la actividad que realiza.
        riesgo_puesto:
          type: string
          description: Clave del cat√°logo del SAT [Riesgo del Puesto](#riesgo-del-puesto).
        periodicidad_pago:
          type: string
          description: Clave del cat√°logo del SAT [Periodicidad de Pago](#periodicidad-del-pago).
        banco:
          type: string
          description: Clave del banco de acuerdo al cat√°logo del SAT ‚ÄúBancos‚Äù que puedes consultar utilizando nuestra [herramienta de b√∫squeda](https://dashboard.facturapi.io/catalogs/bank).
        cuenta_bancaria:
          type: string
          description: |
            N√∫mero de cuenta bancaria (11 caracteres) o n√∫mero de tel√©fono celular (10 caracteres) o n√∫mero de tarjeta (15 √≥ 16 caracteres) o la CLABE (18 caracteres) o n√∫mero de monedero electr√≥nico donde se realiza el dep√≥sito de n√≥mina.
        salario_base_cot_apor:
          type: number
          description: Importe de la retribuci√≥n en efectivo por cuota diaria, gratificaciones, percepciones, alimentaci√≥n, habitaci√≥n, primas, comisiones, prestaciones en especie, etc.
        salario_diario_integrado:
          type: number
          description: Salario que se integra con los pagos hechos en efectivo por cuota diaria, gratificaciones, percepciones, habitaci√≥n, primas, comisiones, prestaciones en especie y cualquier otra cantidad o prestaci√≥n que se entregue al trabajador por su trabajo.
        clave_ent_fed:
          type: string
          description: Clave de la entidad federativa en donde el trabajador prest√≥ sus servicios al empleador, que puedes consultar utilizando nuestra [herramienta de b√∫squeda](https://dashboard.facturapi.io/catalogs/state).
    NominaReceptorNestedProperties:
      type: object
      properties:
        sub_contratacion:
          type: array
          description: Arreglo de objetos para expresar informaci√≥n sobre la empresa que se beneficia del trabajo del empleado, en casos donde el emisor preste servicios de subcontrataci√≥n.
          items:
            $ref: "#/components/schemas/NominaSubContratacionProperties"
    NominaReceptorNestedInput:
      type: object
      properties:
        sub_contratacion:
          type: array
          description: Arreglo de objetos para expresar informaci√≥n sobre la empresa que se beneficia del trabajo del empleado, en casos donde el emisor preste servicios de subcontrataci√≥n.
          items:
            allOf:
              - $ref: "#/components/schemas/NominaSubContratacionRequiredProperties"
              - $ref: "#/components/schemas/NominaSubContratacionProperties"
    NominaSubContratacionRequiredProperties:
      type: object
      required:
        - rfc_labora
        - porcentaje_tiempo
    NominaSubContratacionProperties:
      type: object
      properties:
        rfc_labora:
          type: string
          description: RFC de la persona o empresa que subcontrata, es decir, de la persona o empresa en donde el trabajador prest√≥ directamente sus servicios.
        porcentaje_tiempo:
          type: number
          minimum: 0.001
          maximum: 100.000
          description: Porcentaje de tiempo en que el trabajador prest√≥ sus servicios a la persona o empresa que lo subcontrat√≥.
    NominaEmisorProperties:
      type: object
      title: Emisor
      description: Informaci√≥n del emisor, en caso de ser requerida.
      properties:
        curp:
          type: string
          minLength: 18
          maxLength: 18
          description: Requerido cuando el empleador es persona f√≠sica. CURP del empleador.
        registro_patronal:
          type: string
          description: Clave de registro patronal asignada por la instituci√≥n de seguridad social al patr√≥n.
        rfc_patron_origen:
          minLength: 12
          maxLength: 13
          type: string
          description: RFC de la persona que fungi√≥ como patr√≥n. Se usa cuando el pago se realiza a trav√©s de un tercero.
        entidad_sncf:
          type: object
          description: Informaci√≥n para que las entidades adheridas al Sistema Nacional de Coordinaci√≥n Fiscal realicen la identificaci√≥n del origen de los recursos.
          properties:
            origen_recurso:
              type: string
              enum:
                - IP
                - IF
                - IM
              description: |
                Clave de origen de recurso.

                - `‚ÄúIP‚Äù`: Ingresos Propios
                - `‚ÄúIF‚Äù`: Ingresos Federales
                - `‚ÄúIM‚Äù`: Ingresos mixtos.
            monto_recurso_propio:
              type: number
              description: |
                Inporte de recursos propios. Requerido cuando el origen del recurso es por ingresos mixtos.

    NominaOrCustomComplementProperties:
      title: Complement
      type: object
      discriminator:
        propertyName: type
        mapping:
          nomina: "#/components/schemas/NominaComplementProperties"
          custom: "#/components/schemas/CustomComplementProperties"
      properties:
        type:
          type: string
          enum:
            - nomina
            - custom
          description: Tipo de complemento.

    NominaOrCustomComplementInput:
      type: object
      title: Complement
      discriminator:
        propertyName: type
        mapping:
          nomina: "#/components/schemas/NominaComplementInput"
          custom: "#/components/schemas/CustomComplementInput"
      required:
        - type
        - data
      properties:
        type:
          type: string
          enum:
            - nomina
            - custom
          description: Tipo de complemento.
    NominaComplementProperties:
      allOf:
        - $ref: "#/components/schemas/NominaOrCustomComplementProperties"
        - type: object
          properties:
            data:
              $ref: "#/components/schemas/NominaComplementDataProperties"
    NominaComplementInput:
      allOf:
        - $ref: "#/components/schemas/NominaOrCustomComplementInput"
        - type: object
          properties:
            data:
              $ref: "#/components/schemas/NominaComplementDataInput"
    NamespaceRequiredProperties:
      type: object
      required:
        - prefix
        - uri
        - schema_location
    NamespaceProperties:
      type: object
      title: Namespace
      properties:
        prefix:
          type: string
          description: Prefijo o nombre del namespace.
          example: iedu
        uri:
          type: string
          format: url
          description: Direcci√≥n URL asociada al namespace.
          example: http://www.sat.gob.mx/iedu
        schema_location:
          type: string
          format: url
          example: http://www.sat.gob.mx/sitio_interet/cfd/iedu/iedu.xsd
          description: Direcci√≥n URL del esquema de validaci√≥n XSD.

    CommonAddressProperties:
      type: object
      properties:
        street:
          type: string
          description: Nombre de la calle
          example: Blvd. Atardecer
        exterior:
          type: string
          description: N√∫mero exterior.
          example: 142
        interior:
          type: string
          description: N√∫mero interior.
          example: 4
        neighborhood:
          type: string
          description: Colonia
          example: Villas del Marro
        city:
          type: string
          description: Ciudad
          example: Huatabampo
        municipality:
          type: string
          description: Municipio o delegaci√≥n
          example: Huatabampo
        zip:
          type: string
          description: C√≥digo postal
          example: 86500

    # Main resources
    Customer:
      title: Objeto Customer
      allOf:
        - $ref: "#/components/schemas/ResourceAutoGeneratedProps"
        - $ref: "#/components/schemas/CustomerProperties"
    CustomerSearchResult:
      allOf:
        - $ref: "#/components/schemas/SearchResult"
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: "#/components/schemas/Customer"
    CustomerRequiredProperties:
      type: object
      required:
        - legal_name
        - tax_id
    CustomerProperties:
      type: object
      properties:
        legal_name:
          type: string
          description: Nombre Fiscal o Raz√≥n Social del cliente.
          example: Dunder Mifflin S.A. de C.V.
        tax_id:
          type: string
          example: ABC101010111
          description: En clientes de M√©xico contiene el RFC del cliente. Para extranjeros es opcional y representa el n√∫mero de registro de identificac√≥n tributaria, es decir, el equivalente al RFC en el pa√≠s del cliente.
        email:
          type: string
          format: email
          description: Direcci√≥n de correo electr√≥nico al cual enviar las facturas generadas.
          example: email@example.com
        phone:
          type: string
          description: Tel√©fono del cliente.
          example: 6474010101
        address:
          allOf:
            - $ref: "#/components/schemas/CommonAddressProperties"
            - type: object
              description: Domicilio fiscal.
              properties:
                state:
                  type: string
                  description: Si el pa√≠s es M√©xico ("MEX"), contiene el nombre del Estado o Entidad Federativa. Para extranjeros contiene el c√≥digo de Estado de acuerdo al est√°ndar [ISO 3166-2](https://en.wikipedia.org/wiki/ISO_3166-2), que puedes consultar en nuestro [Cat√°logo de Estados](https://dashboard.facturapi.io/catalogs/state).
                  example: Sonora
                country:
                  type: string
                  description: C√≥digo de pa√≠s acorde al est√°ndar [ISO 3166-1 alpha-3](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3), del [Cat√°logo de Pa√≠ses](https://dashboard.facturapi.io/catalogs/country).
                  example: MEX
                  default: MEX
    CustomerCreateInput:
      title: Customer
      allOf:
        - $ref: "#/components/schemas/CustomerRequiredProperties"
        - $ref: "#/components/schemas/CustomerProperties"

    LineItemProductInput:
      title: Product
      allOf:
        - $ref: "#/components/schemas/ProductRequiredProperties"
        - $ref: "#/components/schemas/ProductProperties"

    LineItemTrasladoProductInput:
      title: Product
      required:
        - description
      type: object
      properties:
        description:
          type: string
          description: Descripci√≥n del bien o servicio como aparecer√° en la factura.
          example: Ukelele
        product_key:
          type: string
          description: Clave de producto/servicio, del cat√°logo del SAT. Nosotros te proporcionamos una manera m√°s conveniente de encontrarlo utilizando nuestra [herramienta de b√∫squeda de claves](https://dashboard.facturapi.io/tools/keys).
          example: 60131324
        unit_key:
          type: string
          default: H87
          description: |
            Clave de unidad de medida, del cat√°logo del SAT. El valor por default `"H87"` (elemento) es la clave para representar una pieza o unidad de venta (l√°piz, cuaderno, televisi√≥n, etc).
            Si la unidad de tu producto es kilogramos, litros, horas u otra unidad, te proporcionamos una manera conveniente de encontrar la clave utilizando nuestra [herramienta de b√∫squeda de claves](https://dashboard.facturapi.io/tools/keys).
        unit_name:
          type: string
          default: Elemento
          description: Palabra que representa la unidad de medida de tu producto. Debe estar relacionada con la clave de unidad `unit_key`.
        sku:
          type: string
          description: Identificador de uso interno designado por la empresa. Puede tener cualquier valor.

    LineItemProductEgresoInput:
      title: Product
      allOf:
        - $ref: "#/components/schemas/ProductEgresoRequiredProperties"
        - $ref: "#/components/schemas/ProductEgresoProperties"

    LineItemProduct:
      allOf:
        - type: object
          properties:
            id:
              nullable: true
              type: string
              description: ID del producto base. S√≥lo presente si se utiliz√≥ como base un objeto `Product` guardado previamente.
              example: 58e93bd8e86eb318b0197454
        - $ref: "#/components/schemas/ProductProperties"
    PartInput:
      type: object
      required:
        - description
        - product_key
      properties:
        description:
          type: string
          description: Descripci√≥n del producto o servicio.
        product_key:
          type: string
          description: Clave de producto/servicio, del cat√°logo del SAT. Nosotros te proporcionamos una manera m√°s conveniente de encontrarlo utilizando nuestra herramienta de b√∫squeda de claves.
        quantity:
          type: number
          description: Cantidad
          example: 1
        sku:
          type: string
          description: Identificador de uso interno designado por la empresa. Puede tener cualquier valor.
        unit_price:
          type: number
          description: Precio unitario
        unit_name:
          type: string
          description: Nombre de la unidad de medida que expresa la cantidad.
        customs_keys:
          type: array
          items:
            type: string
          description: N√∫meros de pedimento aduanal asociados a esta parte.

    Product:
      title: Objeto Product
      allOf:
        - $ref: "#/components/schemas/ResourceAutoGeneratedProps"
        - $ref: "#/components/schemas/ProductProperties"
    ProductSearchResult:
      allOf:
        - $ref: "#/components/schemas/SearchResult"
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: "#/components/schemas/Product"
    ProductRequiredProperties:
      type: object
      required:
        - description
        - product_key
        - price
    ProductEgresoRequiredProperties:
      type: object
      required:
        - description
        - price
    ProductProperties:
      type: object
      properties:
        description:
          type: string
          description: Descripci√≥n del bien o servicio como aparecer√° en la factura.
          example: Ukelele
        product_key:
          type: string
          description: Clave de producto/servicio, del cat√°logo del SAT. Nosotros te proporcionamos una manera m√°s conveniente de encontrarlo utilizando nuestra [herramienta de b√∫squeda de claves](https://dashboard.facturapi.io/tools/keys).
          example: 60131324
        price:
          type: number
          description: Precio por unidad del bien o servicio. Este valor representar√° el precio con IVA inclu√≠do o sin √©l, dependiendo del valor de `tax_included`.
          example: 345.60
        tax_included:
          type: boolean
          default: true
          description: |
            `true`: Indica que todos los impuestos aplicables est√°n inclu√≠dos en el precio (atributo price) y se desglosar√°n autom√°ticamente al emitir la factura.

            `false`: Indica que el atributo price no incluye impuestos, por lo que aquellos impuestos a aplicar se sumar√°n en el precio final.
        taxes:
          type: array
          default: IVA trasladado 16%
          description: Lista de impuestos que deber√°n aplicarse a este producto. Si el par√°metro se omite o es nulo, se guardar√° con un elemento que representa el IVA trasladado del 16%, que es el impuesto m√°s com√∫n. En caso de mandar expl√≠citamente un arreglo vac√≠o, se entiende que el producto est√° exento de impuestos.
          items:
            $ref: "#/components/schemas/BaseTax"
        local_taxes:
          type: array
          description: Arreglo de impuestos locales (estatales o municipales), en caso de haberlos.
          default: []
          items:
            $ref: "#/components/schemas/LocalTax"
        unit_key:
          type: string
          default: H87
          description: |
            Clave de unidad de medida, del cat√°logo del SAT. El valor por default `"H87"` (elemento) es la clave para representar una pieza o unidad de venta (l√°piz, cuaderno, televisi√≥n, etc).
            Si la unidad de tu producto es kilogramos, litros, horas u otra unidad, te proporcionamos una manera conveniente de encontrar la clave utilizando nuestra [herramienta de b√∫squeda de claves](https://dashboard.facturapi.io/tools/keys).
        unit_name:
          type: string
          default: Elemento
          description: Palabra que representa la unidad de medida de tu producto. Debe estar relacionada con la clave de unidad `unit_key`.
        sku:
          type: string
          description: Identificador de uso interno designado por la empresa. Puede tener cualquier valor.
    ProductEgresoProperties:
      type: object
      properties:
        description:
          type: string
          description: Resumen de la operaci√≥n en una sola descripci√≥n. Deben mencionarse cada uno de los productos que contempla el descuento, devoluci√≥n o bonificaci√≥n aplicada y que contienen las facturas relacionadas. Si el egreso est√° basado en un pocentaje (como al aplicar un 30% de descuento), dicho porcentaje debe incluirse en la descripci√≥n junto al nombre del producto que corresponda.
          example: Ukelele
        price:
          type: number
          description: Suma total de la cantidad devuelta, descontada o bonificada.
          example: 345.60
        tax_included:
          type: boolean
          default: true
          description: |
            `true`: Indica que todos los impuestos aplicables est√°n inclu√≠dos en el precio (atributo price) y se desglosar√°n autom√°ticamente al emitir la factura.

            `false`: Indica que el atributo price no incluye impuestos, por lo que aquellos impuestos a aplicar se sumar√°n en el precio final.
        taxes:
          type: array
          default: IVA trasladado 16%
          description: Lista de impuestos que deber√°n aplicarse a este producto. Si el par√°metro se omite o es nulo, se guardar√° con un elemento que representa el IVA trasladado del 16%, que es el impuesto m√°s com√∫n. En caso de mandar expl√≠citamente un arreglo vac√≠o, se entiende que el producto est√° exento de impuestos.
          items:
            $ref: "#/components/schemas/BaseTax"
        local_taxes:
          type: array
          description: Arreglo de impuestos locales (estatales o municipales), en caso de haberlos.
          default: []
          items:
            $ref: "#/components/schemas/LocalTax"
    PaymentInput:
      title: Payment
      required:
        - payment_form
        - related
      type: object
      properties:
        payment_form:
          type: string
          description: C√≥digo de la forma de pago seg√∫n el [cat√°logo del SAT](#forma-de-pago). Tambi√©n puedes utilizar la constante `PaymentForm` inclu√≠da en nuestras librer√≠as.
        related:
          type: array
          description: Arreglo que incluye un elemento por cada comprobante de ingreso relacionado a este pago. Lo m√°s com√∫n es que el pago est√© relacionado a un s√≥lo comprobante de ingreso. Un caso en el que se agrega m√°s de un elemento es cuando se recibe (por ejemplo) un s√≥lo dep√≥sito que ampara el pago de 2 facturas relacionadas. En lugar de expedir un comprobante de recepci√≥n de pago por cada factura, debes expedir s√≥lo uno relacionando los 2 comprobantes.
          items:
            type: object
            required:
              - uuid
              - amount
              - installment
              - last_balance
            properties:
              uuid:
                type: string
                format: uuid
                description: Folio fiscal √≥ UUID del comprobante de ingreso relacionado.
              amount:
                type: number
                description: |
                  Cantidad del pago correspondiente al comprobante relacionado,
                  usando el m√©todo de pago indicado en este elemento del arreglo
                  `payments`. Este valor debe ser expresado en la moneda definida
                  en `payments[].related_documents[].currency`.
              installment:
                type: integer
                description: N√∫mero de parcialidad del pago.
              last_balance:
                type: number
                description: Cantidad que estaba pendiente por pagar antes de recibir este pago. Este valor se expresa en la moneda definida en `payments[].related[].currency`.
              currency:
                type: string
                minLength: 3
                maxLength: 3
                default: MXN
                description: Si la moneda utilizada en la factura relacionada no es moneda nacional (MXN), debe especificarse su valor acorde al est√°ndar [ISO 4217](https://es.wikipedia.org/wiki/ISO_4217).
              exchange:
                type: number
                description: |
                  Obligatorio cuando la moneda del documento relacionado es distinta a la moneda de pago. Tipo de cambio entre las dos monedas al momento del pago. Ejemplo: La factura de iingreso relacionada se registra en USD, mientras que el pago actual se realiza en MXN, este atributo deber√≠a registrarse como `0.45` (USD/MXN).
              folio_number:
                type: integer
                description: Opcionalmente se puede incluir el n√∫mero de folio del documento relacionado.
              series:
                type: string
                description: Opcionalmente se puede incluir la serie del documento relacionado.
        currency:
          type: string
          minLength: 3
          maxLength: 3
          default: MXN
          description: C√≥digo de la moneda, acorde al est√°ndar [ISO 4217](https://es.wikipedia.org/wiki/ISO_4217).
        exchange:
          type: number
          default: 1
          description: Tipo de cambio conforme a la moneda usada. Representa el n√∫mero de pesos mexicanos que equivalen a una unidad de la divisa se√±alada en el atributo `currency`.
        date:
          type: string
          format: date-time
          default: now
          description: Fecha en que se recibi√≥ el pago. S√≥lo es necesario incluirla si el pago se efectu√≥ en una fecha anterior a la emisi√≥n de este comprobante. No se permiten fechas futuras.
        numOperacion:
          type: string
          description: N√∫mero de cheque, de autorizaci√≥n, de referencia, clave de rastreo SPEI, l√≠nea de captura o alg√∫n n√∫mero de referencia que permita identificar la operaci√≥n correspondiente al pago efectuado.
        rfcEmisorCtaOrd:
          type: string
          description: RFC de la entidad emisora de la cuenta de origen, es decir, la operadora, banco, instituci√≥n financiera, emisor de monedero electr√≥nico, etc.
        nomBancoOrdExt:
          type: string
          description: Nombre del banco ordenante.
        ctaOrdenante:
          type: string
          description: N√∫mero de cuenta con la que se realiz√≥ el pago.
        rfcEmisorCtaBen:
          type: string
          description: RFC de la entidad de la cuenta operadora destino, es decir, la operadora, banco, instituci√≥n financiera, emisor de monedero electr√≥nico, etc.
        ctaBeneficiario:
          type: string
          description: N√∫mero de cuenta donde se recibi√≥ el pago.
        tipoCadPago:
          type: string
          description: Clave del tipo de cadena de pago que genera la entidad receptora del pago. Si existe este campo, es obligatorio registrar los campos `certPago`, `cadPago` y `selloPago`.
        certPago:
          type: string
          format: base64
          description: Certificado que corresponde al pago, como una cadena de texto en formato base 64.
        cadPago:
          type: string
          description: Cadena original del comprobante de pago generado por la entidad emisora de la cuenta beneficiaria.
        selloPago:
          type: string
          format: base64
          description: Sello digital que se asocie al pago expresado como una cadena de texto en formato base 64.

    CustomerInfo:
      type: object
      description: Objeto con informaci√≥n parcial del cliente receptor del comprobante. Para obtener el objeto `Customer` completo, deber√°s consultarlo con el m√©todo de [Obtener Cliente]('#/operation/getCustomer').
      properties:
        id:
          type: string
          description: ID del objeto `customer` relacionado a la factura, en caso de no haber sido eliminado
          example: 58e93bd8e86eb318b0197456
        legal_name:
          type: string
          description: Nombre Fiscal o Raz√≥n Social del cliente.
          example: Dunder Mifflin S.A. de C.V.
        tax_id:
          type: string
          description: RFC del cliente.
          example: ABC101010111
        address:
          type: object
          properties:
            country:
              type: string
              format: ISO 3166-1 alpha-3
              description: C√≥digo de Pa√≠s acorde al est√°ndar ISO 3166-1 alpha-3, del Cat√°logo de Pa√≠ses.
              example: MEX

    Invoice:
      title: Objeto Invoice
      allOf:
        - $ref: "#/components/schemas/ResourceAutoGeneratedProps"
        - $ref: "#/components/schemas/InvoiceProperties"
    InvoiceSearchResult:
      allOf:
        - $ref: "#/components/schemas/SearchResult"
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: "#/components/schemas/Invoice"
    InvoiceRequiredProperties:
      type: object
      required:
        - description
        - invoice_key
        - price
    InvoiceProperties:
      type: object
      properties:
        status:
          type: string
          enum:
            - valid
            - canceled
          description: |
            Estado actual de la factura.
          example: valid
        cancellation_status:
          type: string
          enum:
            - none
            - pending
            - accepted
            - rejected
            - expired
          description: |
            Estado actual de la solicitud de cancelaci√≥n, en caso de haberla realizado. Puedes leer m√°s a detalle en la secci√≥n de [Cancelar Factura](#tag/invoice/operation/deleteInvoice)).
          example: none
        verification_url:
          type: string
          format: uri
          description: Direcci√≥n URL para verificar el estado del CFDI en el portal del SAT. Este link es el mismo que aparece en el c√≥digo QR, en el PDF de la factura.
          example: https://verificacfdi.facturaelectronica.sat.gob.mx/default.aspx?id=45BEC0CA-5F1E-491E-9417-698EA48C382A&re=AAA010101AAA&rr=ABC101010111&tt=345.600000&fe=bWApPw==
        cancellation_receipt:
          type: string
          format: xml
          description: Si el comprobante fue cancelado, este campo contiene el acuse de recibo de cancelaci√≥n en formato XML.
        type:
          type: string
          enum:
            - I
            - E
            - P
            - N
            - T
          description: |
            Tipo de comprobante. Puede tener los valores `"I"`: Ingreso, `"P"`: Pago, `"E"`: Egreso, `"N"`: N√≥mina, `"T"`: Traslado.
        customer:
          $ref: "#/components/schemas/CustomerInfo"
        total:
          type: number
          description: Monto total facturado.
          example: 10944.82
        uuid:
          type: string
          format: uuid
          description: Folio fiscal de la factura, asignado por el SAT.
          example: 39c85a3f-275b-4341-b259-e8971d9f8a94
        folio_number:
          type: integer
          description: N√∫mero de folio autoincremental para control interno y sin validez fiscal.
          example: 914
        series:
          type: string
          description: Serie. Caracteres designados por la empresa para control interno y sin validez fiscal. En el PDF se imprime junto al //www.facturapi.io/img/logo.svg
          example: F
        external_id:
          type: string
          description: Identificador opcional que puedes usar para relacionar esta factura con tus registros para despu√©s buscar por este n√∫mero.
        payment_form:
          type: string
          description: C√≥digo que representa la forma de pago, de acuerdo al [cat√°logo del SAT](#forma-de-pago).
          example: 06
        items:
          type: array
          description: Conceptos incluidos en el documento
          items:
            $ref: "#/components/schemas/LineItem"
        related:
          type: array
          items:
            type: string
            format: uuid
          description: Folios fiscales de los CFDIs relacionados.
        relation:
          type: string
          description: Clave de relaci√≥n del cat√°logo del SAT.
        currency:
          type: string
          example: MXN
          description: C√≥digo de la moneda, acorde al est√°ndar [ISO 4217](https://es.wikipedia.org/wiki/ISO_4217).
        exchange:
          type: number
          minimum: 0
          example: 1
          description: Tipo de cambio conforme a la moneda usada. Representa el n√∫mero de pesos mexicanos que equivalen a una unidad de la divisa se√±alada en el atributo `currency`.
        complements:
          type: array
          default: []
          items:
            $ref: "#/components/schemas/NominaOrCustomComplementProperties"
          description: Complementos a incluir en la factura.
        pdf_custom_section:
          type: string
          format: html
          description: En caso de que necesites incluir m√°s informaci√≥n en el PDF, este campo te permite insertar c√≥digo HTML con tu propio contenido.
        addenda:
          type: string
          format: xml
          description: C√≥digo XML con la Addenda que se necesite agregar a la factura.
        namespaces:
          type: array
          description: Namespaces a insertar en el nodo ra√≠z de la factura. Requerido en complementos y addenda.
          items:
            $ref: "#/components/schemas/NamespaceProperties"
        stamp:
          $ref: "#/components/schemas/Stamp"

    InvoiceableCommonInput:
      type: object
      properties:
        folio_number:
          type: integer
          default: autoincremental
          description: N√∫mero de folio asignado por la empresa para control interno. Si se omite, se asignar√° el valor autoincremental de la organizaci√≥n.
        series:
          type: string
          maxLength: 25
          nullable: true
          description: Serie. Caracteres designados por la empresa para control interno y sin validez fiscal.
        pdf_custom_section:
          type: string
          nullable: true
          format: xml
          description: |
            En caso de que necesites incluir m√°s informaci√≥n en el PDF, este campo te permite enviar c√≥digo HTML con tu propio contenido.

            Por seguridad, el c√≥digo que puedes enviar est√° limitado a las siguientes etiquetas: `h1`, `h2`, `h3`, `h4`, `h5`, `h6`, `div`, `p`, `span`, `small`, `br`, `b`, `i`, `ul`, `ol`, `li`, `strong`, `table`, `thead`, `tbody`, `tfoot`, `tr`, `th` y `td`. No se permiten atributos ni estilos.
        addenda:
          type: string
          nullable: true
          format: xml
          description: C√≥digo XML con la Addenda que se necesite agregar a la factura.
        namespaces:
          type: array
          default: []
          description: Si icluiste uno de los par√°metros `addenda`, `complements`, o `items[].complement` y √©stos incluyen un namespace especial, debes enviar la informaci√≥n necesaria para incluir estos namespaces en el XML de la factura.
          items:
            allOf:
              - $ref: "#/components/schemas/NamespaceRequiredProperties"
              - $ref: "#/components/schemas/NamespaceProperties"
    InvoiceCommonInputProperties:
      allOf:
        - type: object
          properties:
            customer:
              description: Cliente receptor de la factura.
              oneOf:
                - $ref: "#/components/schemas/CustomerCreateInput"
                - type: string
                  title: customer_id
                  description: ID del objeto 'customer' previamente registrado en Facturapi.
                  example: 58e93bd8e86eb318b0197456
            date:
              type: string
              format: date-time
              default: now
              description: Fecha de expedici√≥n del comprobante en formato ISO8601 (UTC String). No puede ser anterior a 72 horas en el pasado, ni posterior al presente.
            external_id:
              type: string
              nullable: true
              description: Identificador opcional que puedes usar para relacionar esta factura con tus registros y poder hacer b√∫squedas usando este identificador. Facturapi no valida que este campo sea √∫nico.
        - $ref: "#/components/schemas/InvoiceableCommonInput"
    InvoiceIngresoInput:
      title: Ingreso
      required:
        - customer
        - items
        - payment_form
      allOf:
        - type: object
          properties:
            type:
              type: string
              enum:
                - I
              default: I
              description: Tipo de comprobante. El valor default es `‚ÄúI‚Äù` (Ingreso).
            items:
              type: array
              description: Conceptos a incluir en la factura.
              items:
                $ref: "#/components/schemas/LineItemInput"
            payment_form:
              type: string
              minLength: 2
              maxLength: 2
              description: C√≥digo que representa la forma de pago, de acuerdo al [cat√°logo del SAT](#forma-de-pago).
            payment_method:
              type: string
              default: PUE
              enum:
                - PUE
                - PPD
              description: |
                C√≥digo del m√©todo de pago seg√∫n el cat√°logo del SAT.

                - `PUE`: Pago en Una sola Exhibici√≥n
                - `PPD`: Pago en Parcialidades o Diferido
            use:
              type: string
              default: G01
              description: C√≥digo de Uso CFDI seg√∫n el cat√°logo del SAT. Puedes ver los c√≥digos en [esta tabla](#uso-cfdi), o utilizar las constantes inclu√≠das en nuestras librer√≠as.
            currency:
              type: string
              default: MXN
              description: C√≥digo de la moneda, acorde al est√°ndar [ISO 4217](https://es.wikipedia.org/wiki/ISO_4217).
            exchange:
              type: number
              default: 1
              description: Tipo de cambio conforme a la moneda usada. Representa el n√∫mero de pesos mexicanos (MXN) que equivalen a una unidad de la divisa se√±alada en el atributo `currency`.
            conditions:
              type: string
              nullable: true
              minLength: 1
              maxLength: 1000
              description: Condiciones de pago
            related:
              type: array
              default: []
              items:
                type: string
              description: Folios fiscales (UUID) de facturas relacionadas.
            relation:
              type: string
              nullable: true
              description: Clave de relaci√≥n del cat√°logo del SAT (que puedes consultar en [esta tabla](#relacion-entre-facturas)). Es requerido cuando se env√≠e el par√°metro `related`.
            complements:
              type: array
              default: []
              items:
                $ref: "#/components/schemas/CustomComplementInput"
              description: Complementos a incluir en la factura. Puedes incluir cualquier complemento en la factura si t√∫ mismo construyes el nodo XML del complemento y usas el tipo `custom`. No olvides que **es necesario agregar el prefijo y las URLs necesarias usando el par√°metro `namespaces`**. Tambi√©n recuerda agregar la informaci√≥n del complemento al PDF usando el par√°metro `pdf_custom_section`.
        - $ref: "#/components/schemas/InvoiceCommonInputProperties"
    InvoiceEgresoInput:
      title: Egreso
      allOf:
        - type: object
          required:
            - type
            - customer
            - payment_form
            - related
            - products
          properties:
            type:
              type: string
              enum:
                - E
            payment_form:
              type: string
              minLength: 2
              maxLength: 2
              description: C√≥digo que representa la forma de pago, de acuerdo al [cat√°logo del SAT](#forma-de-pago).
            related:
              type: array
              default: []
              items:
                type: string
              description: Folios fiscales (UUID) de facturas relacionadas.
            relation:
              type: string
              default: 01
              description: Clave de relaci√≥n del cat√°logo del SAT (que puedes consultar en [esta tabla](#relacion-entre-facturas)).
            products:
              type: array
              items:
                $ref: "#/components/schemas/LineItemProductEgresoInput"
              description: Objetos con detalles del concepto a facturar.
            currency:
              type: string
              default: MXN
              description: C√≥digo de la moneda, acorde al est√°ndar [ISO 4217](https://es.wikipedia.org/wiki/ISO_4217).
            exchange:
              type: number
              default: 1
              description: Tipo de cambio conforme a la moneda usada. Representa el n√∫mero de pesos mexicanos (MXN) que equivalen a una unidad de la divisa se√±alada en el atributo `currency`.
            complements:
              type: array
              default: []
              items:
                $ref: "#/components/schemas/CustomComplementInput"
              description: Complementos a incluir en la factura. Puedes incluir cualquier complemento en la factura si t√∫ mismo construyes el nodo XML del complemento y usas el tipo `custom`. No olvides que **es necesario agregar el prefijo y las URLs necesarias usando el par√°metro `namespaces`**. Tambi√©n recuerda agregar la informaci√≥n del complemento al PDF usando el par√°metro `pdf_custom_section`.
        - $ref: "#/components/schemas/InvoiceCommonInputProperties"
    InvoicePagoInput:
      title: Pago
      allOf:
        - type: object
          required:
            - type
            - payments
            - customer
          properties:
            type:
              type: string
              enum:
                - P
            payments:
              type: array
              description: Pagos a incluir en este comprobante. Lo m√°s com√∫n es incluir un s√≥lo pago. Un caso en el que se debe de agregar m√°s de uno es cuando el pago se realiza con 2 formas de pago distintas; por ejemplo, cuando se paga una parte con tarjeta y otra en efectivo.
              items:
                $ref: "#/components/schemas/PaymentInput"
            related:
              type: array
              default: []
              items:
                type: string
              description: Folios fiscales (UUID) de facturas relacionadas.
            relation:
              type: string
              nullable: true
              description: Clave de relaci√≥n del cat√°logo del SAT (que puedes consultar en [esta tabla](#relacion-entre-facturas)).
            complements:
              type: array
              default: []
              items:
                $ref: "#/components/schemas/CustomComplementInput"
              description: Complementos a incluir en la factura. Puedes incluir cualquier complemento en la factura si t√∫ mismo construyes el nodo XML del complemento y usas el tipo `custom`. No olvides que **es necesario agregar el prefijo y las URLs necesarias usando el par√°metro `namespaces`**. Tambi√©n recuerda agregar la informaci√≥n del complemento al PDF usando el par√°metro `pdf_custom_section`.
        - $ref: "#/components/schemas/InvoiceCommonInputProperties"
    InvoiceNominaInput:
      title: N√≥mina
      allOf:
        - type: object
          required:
            - type
            - complements
            - customer
          properties:
            type:
              type: string
              enum:
                - N
            complements:
              type: array
              default: []
              items:
                $ref: "#/components/schemas/NominaOrCustomComplementInput"
              description: Complementos a incluir en la factura.
            related:
              type: array
              default: []
              items:
                type: string
              description: Folios fiscales (UUID) de facturas relacionadas.
            relation:
              type: string
              nullable: true
              description: Clave de relaci√≥n del cat√°logo del SAT (que puedes consultar en [esta tabla](#relacion-entre-facturas)).
        - $ref: "#/components/schemas/InvoiceCommonInputProperties"
    InvoiceTrasladoInput:
      title: Traslado
      allOf:
        - type: object
          required:
            - type
            - items
            - customer
          properties:
            type:
              type: string
              enum:
                - T
            items:
              type: array
              description: Conceptos a incluir en la factura.
              items:
                $ref: "#/components/schemas/LineItemTrasladoInput"
            complements:
              type: array
              default: []
              items:
                $ref: "#/components/schemas/CustomComplementInput"
              description: Complementos a incluir en la factura. Puedes incluir cualquier complemento en la factura si t√∫ mismo construyes el nodo XML del complemento y usas el tipo `custom`. No olvides que **es necesario agregar el prefijo y las URLs necesarias usando el par√°metro `namespaces`**. Tambi√©n recuerda agregar la informaci√≥n del complemento al PDF usando el par√°metro `pdf_custom_section`.
            use:
              type: string
              default: G01
              description: C√≥digo de Uso CFDI seg√∫n el cat√°logo del SAT. Puedes ver los c√≥digos en [esta tabla](#uso-cfdi), o utilizar las constantes inclu√≠das en nuestras librer√≠as.
            currency:
              type: string
              default: MXN
              description: C√≥digo de la moneda, acorde al est√°ndar [ISO 4217](https://es.wikipedia.org/wiki/ISO_4217).
            exchange:
              type: number
              default: 1
              description: Tipo de cambio conforme a la moneda usada. Representa el n√∫mero de pesos mexicanos (MXN) que equivalen a una unidad de la divisa se√±alada en el atributo `currency`.
            related:
              type: array
              default: []
              items:
                type: string
              description: Folios fiscales (UUID) de facturas relacionadas.
            relation:
              type: string
              nullable: true
              description: Clave de relaci√≥n del cat√°logo del SAT (que puedes consultar en [esta tabla](#relacion-entre-facturas)).
        - $ref: "#/components/schemas/InvoiceCommonInputProperties"

    Receipt:
      title: Objeto Receipt
      allOf:
        - $ref: "#/components/schemas/ResourceAutoGeneratedProps"
        - $ref: "#/components/schemas/ReceiptProperties"
    ReceiptProperties:
      allOf:
        - type: object
          properties:
            expires_at:
              type: string
              format: date-time
              example: 2021-09-17T15:21:23.456Z
              description: |
                Fecha de expiraci√≥n en formato ISO8601 (UTC String).
                Es la fecha l√≠mite para que el cliente pueda facturar su recibo en el portal de autofactura.
                Se calcula autom√°ticamente a partir de las configuraciones de recibo de la organizaci√≥n.
            status:
              type: string
              enum:
                - open
                - canceled
                - invoiced_to_customer
                - invoiced_globally
              description: Estado actual del recibo.
            self_invoice_url:
              type: string
              format: url
              example: https://factura.space/empresa-demo/r9YqYarL
              description: |
                Direcci√≥n URL para realizar autofactura. Incluye el `key` del recibo.
                Puedes usarla para generar un bot√≥n o un QR de facturaci√≥n para tus clientes.
            total:
              type: number
              example: 356.78
              description: Monto total de la operaci√≥n
            invoice:
              type: string
              example: 614496b471d422de4b6cfcc4
              description: ID de la factura asociada, en caso de estar facturado.
            key:
              type: string
              example: r9YqYarL
              description: Autogenerado. Identificador √∫nico alfanum√©rico corto, √∫til para acceder a la autofactura desde tu micrositio en factura.space
            items:
              type: array
              description: Conceptos incluidos en el recibo
              items:
                $ref: "#/components/schemas/LineItem"
        - $ref: "#/components/schemas/ReceiptEditableProperties"
    ReceiptInput:
      allOf:
        - type: object
          required:
            - items
            - payment_form
          properties:
            items:
              type: array
              description: Conceptos a incluir en el recibo.
              items:
                $ref: "#/components/schemas/LineItemInput"
        - $ref: "#/components/schemas/ReceiptEditableProperties"
    ReceiptEditableProperties:
      type: object
      properties:
        payment_form:
          type: string
          example: "03"
          description: C√≥digo que representa la forma de pago, seg√∫n el [cat√°logo del SAT](#forma-de-pago).
        folio_number:
          type: integer
          example: 120
          description: Autoincremental. N√∫mero de folio del recibo para control interno y sin validez fiscal.
        currency:
          type: string
          example: MXN
          description: C√≥digo de la moneda, acorde al est√°ndar [ISO 4217](https://es.wikipedia.org/wiki/ISO_4217).
        exchange:
          type: number
          minimum: 0
          example: 1
          description: Tipo de cambio conforme a la moneda usada. Representa el n√∫mero de pesos mexicanos que equivalen a una unidad de la divisa se√±alada en el atributo `currency`.
        branch:
          type: string
          description: Nombre de la sucursal donde se expidi√≥ el recibo.
    ReceiptSearchResult:
      allOf:
        - $ref: "#/components/schemas/SearchResult"
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: "#/components/schemas/Receipt"
    InvoiceReceiptInput:
      type: object
      required:
        - customer
      allOf:
        - type: object
          properties:
            customer:
              description: Cliente receptor de la factura.
              oneOf:
                - $ref: "#/components/schemas/CustomerCreateInput"
                - type: string
                  title: customer_id
                  description: ID del objeto 'customer' previamente registrado en Facturapi.
                  example: 58e93bd8e86eb318b0197456
            use:
              type: string
              default: G01
              description: C√≥digo de Uso CFDI seg√∫n el cat√°logo del SAT. Puedes ver los c√≥digos en [esta tabla](#uso-cfdi), o utilizar las constantes inclu√≠das en nuestras librer√≠as.
            conditions:
              type: string
              nullable: true
              minLength: 1
              maxLength: 1000
              description: Condiciones de pago
        - $ref: "#/components/schemas/InvoiceableCommonInput"
    GlobalInvoiceInput:
      type: object
      properties:
        from:
          type: string
          format: date-time
          default: Inicio del √∫ltimo periodo
          description: Fecha inicial de los recibos que se incluir√°n en la factura global. Por default, este valor es el inicio del √∫ltimo periodo (d√≠a, semana, mes), seg√∫n tengas configurado en tu configuraci√≥n de recibos de tu organizaci√≥n.
        to:
          type: string
          format: date-time
          default: Fin del √∫ltimo periodo
          description: |
            Fecha final de los recibos que se incluir√°n en la factura global.
            Por default, este valor es el fin del √∫ltimo periodo (d√≠a, semana,
            mes), seg√∫n tengas configurado en tu configuraci√≥n de recibos de
            tu organizaci√≥n.
        folio_number:
          type: integer
          default: autoincremental
          description: N√∫mero de folio asignado por la empresa para control interno. Si se omite, se asignar√° el valor autoincremental de la organizaci√≥n.
        series:
          type: string
          maxLength: 25
          nullable: true
          description: Serie. Caracteres designados por la empresa para control interno y sin validez fiscal.

    Retention:
      title: Objeto Retention
      allOf:
        - $ref: "#/components/schemas/ResourceAutoGeneratedProps"
        - $ref: "#/components/schemas/RetentionReadOnlyProperties"
        - $ref: "#/components/schemas/RetentionProperties"
    RetentionReadOnlyProperties:
      type: object
      properties:
        status:
          type: string
          enum:
            - valid
            - canceled
          description: |
            Estado actual de la retenci√≥n.
          example: valid
        verification_url:
          type: string
          format: uri
          description: Direcci√≥n URL para verificar el estado de la retenci√≥n en el portal del SAT. Este link es el mismo que aparece en el c√≥digo QR, en el PDF de la retenci√≥n.
          example: https://verificacfdi.facturaelectronica.sat.gob.mx/default.aspx?id=45BEC0CA-5F1E-491E-9417-698EA48C382A&re=AAA010101AAA&rr=ABC101010111&tt=345.600000&fe=bWApPw==
        cancellation_receipt:
          type: string
          format: xml
          description: Si el comprobante fue cancelado, este campo contiene el acuse de recibo de cancelaci√≥n en formato XML.
        type:
          type: string
          enum:
            - Retenci√≥n
          example: Retenci√≥n
          description: Tipo de comprobante.
        uuid:
          type: string
          format: uuid
          description: Folio fiscal de la retenci√≥n, asignado por el SAT.
          example: 39c85a3f-275b-4341-b259-e8971d9f8a94
        stamp:
          $ref: "#/components/schemas/Stamp"
        customer:
          $ref: "#/components/schemas/CustomerInfo"
    RetentionProperties:
      type: object
      properties:
        cve_retenc:
          type: string
          example: 01
          description: Clave de la retenci√≥n o informaci√≥n de pagos de acuerdo al cat√°logo del SAT.
        fecha_exp:
          type: string
          format: date-time
          example: "2021-09-15T06:03:23.000Z"
          description: Fecha de expedici√≥n del comprobante en formato ISO8601 (UTC String).
        desc_retenc:
          type: string
          description: Si la clave de la retenci√≥n es ‚Äú25‚Äù (Otro tipo de retenciones), este campo se usa para registrar la descripci√≥n de la retenci√≥n.
        folio_int:
          type: string
          description: Identificador alfanum√©rico para control interno de la empresa y sin relevancia fiscal.
        periodo:
          type: object
          description: Informaci√≥n sobre el periodo de la retenci√≥n.
          properties:
            mes_ini:
              type: integer
              minimum: 1
              maximum: 12
              description: Mes inicial del periodo de la retenci√≥n.
            mes_fin:
              type: integer
              minimum: 1
              maximum: 12
              description: Mes final del periodo de la retenci√≥n.
            ejerc:
              type: integer
              description: A√±o o ejercicio fiscal en que se realiz√≥ la retenci√≥n.
        totales:
          type: object
          description: Informaci√≥n sobre el total de retenciones efectuadas en el periodo correspondiente.
          properties:
            monto_tot_operacion:
              type: number
              minimum: 0
              description: Monto total de la operaci√≥n, con precisi√≥n de hasta 6 decimales.
            monto_tot_grav:
              type: number
              minimum: 0
              description: Monto total gravado.
            monto_tot_exent:
              type: number
              minimum: 0
              description: Monto total exento.
            monto_tot_ret:
              type: number
              minimum: 0
              description: Suma de los montos de impuestos retenidos.
            imp_retenidos:
              type: array
              description: Colecci√≥n de impuestos retenidos.
              items:
                type: object
                properties:
                  base_ret:
                    type: number
                    minimum: 0
                    description: Base del impuesto retenido.
                  impuesto:
                    type: string
                    enum:
                      - IVA
                      - ISR
                    example: IVA
                    description: Clave del tipo de impuesto retenido, del cat√°logo del SAT.
                  monto_ret:
                    type: number
                    minimum: 0
                    description: Importe del impuesto retenido
                  pago_provisional:
                    type: boolean
                    description: |
                      - `true`: Pago provisional
                      - `false`: Pago definitivo
        external_id:
          type: string
          description: Identificador opcional que puedes usar para relacionar esta retenci√≥n con tus registros y poder hacer b√∫squedas usando este identificador. Facturapi no valida que este campo sea √∫nico.
        complements:
          type: array
          default: []
          items:
            $ref: "#/components/schemas/CustomComplementProperties"
          description: Complementos a incluir en la factura.
        pdf_custom_section:
          type: string
          format: html
          description: En caso de que necesites incluir m√°s informaci√≥n en el PDF, este campo te permite insertar c√≥digo HTML con tu propio contenido.
        addenda:
          type: string
          format: xml
          description: C√≥digo XML con la Addenda que se necesite agregar a la factura.
        namespaces:
          type: array
          description: Namespaces a insertar en el nodo ra√≠z de la factura. Requerido en complementos y addenda.
          items:
            $ref: "#/components/schemas/NamespaceProperties"
    RetentionSearchResult:
      allOf:
        - $ref: "#/components/schemas/SearchResult"
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: "#/components/schemas/Retention"
    RetentionInput:
      type: object
      required:
        - customer
        - cve_retenc
        - periodo
        - totales
      properties:
        customer:
          description: Cliente receptor de la factura.
          oneOf:
            - $ref: "#/components/schemas/CustomerCreateInput"
            - type: string
              title: customer_id
              description: ID del objeto 'customer' previamente registrado en Facturapi.
              example: 58e93bd8e86eb318b0197456
        cve_retenc:
          type: string
          example: 26
          description: Clave de la retenci√≥n o informaci√≥n de pagos de acuerdo al [cat√°logo del SAT](#clave-de-retenci√≥n).
        fecha_exp:
          type: string
          format: date-time
          example: "2021-09-15T06:03:23.000Z"
          description: Fecha de expedici√≥n del comprobante en formato ISO8601 (UTC String).
        desc_retenc:
          type: string
          description: Si la clave de la retenci√≥n es ‚Äú25‚Äù (Otro tipo de retenciones), este campo se usa para registrar la descripci√≥n de la retenci√≥n.
        folio_int:
          type: string
          example: R123
          description: Identificador alfanum√©rico para control interno de la empresa y sin relevancia fiscal.
        periodo:
          type: object
          description: Informaci√≥n sobre el periodo de la retenci√≥n.
          required:
            - mes_ini
            - mes_fin
            - ejerc
          properties:
            mes_ini:
              type: integer
              minimum: 1
              maximum: 12
              example: 9
              description: Mes inicial del periodo de la retenci√≥n.
            mes_fin:
              type: integer
              minimum: 1
              maximum: 12
              example: 9
              description: Mes final del periodo de la retenci√≥n.
            ejerc:
              type: integer
              example: 2021
              description: A√±o o ejercicio fiscal en que se realiz√≥ la retenci√≥n.
        totales:
          type: object
          description: Informaci√≥n sobre el total de retenciones efectuadas en el periodo correspondiente.
          required:
            - monto_tot_operacion
            - monto_tot_exent
            - imp_retenidos
          properties:
            monto_tot_operacion:
              type: number
              minimum: 0
              description: Monto total de la operaci√≥n, con precisi√≥n de hasta 6 decimales.
            monto_tot_grav:
              type: number
              minimum: 0
              description: Monto total gravado.
            monto_tot_exent:
              type: number
              minimum: 0
              description: Monto total exento.
            monto_tot_ret:
              type: number
              minimum: 0
              description: Suma de los montos de impuestos retenidos.
            imp_retenidos:
              type: array
              description: Colecci√≥n de impuestos retenidos.
              required:
                - monto_ret
              items:
                type: object
                properties:
                  base_ret:
                    type: number
                    minimum: 0
                    description: Base del impuesto retenido.
                  impuesto:
                    type: string
                    enum:
                      - IVA
                      - ISR
                    example: IVA
                    description: Clave del tipo de impuesto retenido, del cat√°logo del SAT.
                  monto_ret:
                    type: number
                    minimum: 0
                    description: Importe del impuesto retenido
                  pago_provisional:
                    type: boolean
                    description: |
                      - `true`: Pago provisional
                      - `false`: Pago definitivo
        external_id:
          type: string
          description: Identificador opcional que puedes usar para relacionar esta retenci√≥n con tus registros y poder hacer b√∫squedas usando este identificador. Facturapi no valida que este campo sea √∫nico.
        complements:
          type: array
          default: []
          items:
            $ref: "#/components/schemas/CustomComplementInput"
          description: Complementos a incluir en la factura.
        pdf_custom_section:
          type: string
          format: html
          description: En caso de que necesites incluir m√°s informaci√≥n en el PDF, este campo te permite insertar c√≥digo HTML con tu propio contenido.
        addenda:
          type: string
          format: xml
          description: C√≥digo XML con la Addenda que se necesite agregar a la factura.
        namespaces:
          type: array
          description: Namespaces a insertar en el nodo ra√≠z de la factura. Requerido en complementos y addenda.
          items:
            allOf:
              - $ref: "#/components/schemas/NamespaceRequiredProperties"
              - $ref: "#/components/schemas/NamespaceProperties"

    OrganizationAddress:
      allOf:
        - $ref: "#/components/schemas/CommonAddressProperties"
        - type: object
          description: Domicilio fiscal de la organizaci√≥n emisora.
          properties:
            state:
              type: string
              description: Nombre del Estado o Entidad Federativa.
              example: Sonora
    OrganizationSearchResult:
      allOf:
        - $ref: "#/components/schemas/SearchResult"
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: "#/components/schemas/Organization"
    Organization:
      title: Objeto Organization
      type: object
      properties:
        id:
          type: string
          description: ID del objeto
          example: "5a2a307be93a2f00129ea035"
        created_at:
          type: string
          format: date-time
          description: Fecha de registro
          example: "2017-05-05T20:55:33.468Z"
        is_production_ready:
          type: boolean
          description: Indica si la organizaci√≥n tiene informaci√≥n necesaria para facturar en ambiente Live.
        pending_steps:
          type: array
          description: Lista de pasos que se necesitan completar para que esta organizaci√≥n pueda emitir facturas v√°lidas en ambiente Live.
          items:
            type: object
            properties:
              type:
                type: string
                enum:
                  - legal
                  - logo
                  - certificate
                description: C√≥digo que representa el tiop de paso que se requiere completar
              description:
                type: string
                description: Texto que describe el paso que se requiere completar y que puedes usar para mostr√°rselo al usuario.
        legal:
          type: object
          description: Datos fiscales de la empresa.
          properties:
            name:
              type: string
              description: Nombre comercial de la organizaci√≥n.
            legal_name:
              type: string
              description: Nombre Fiscal o Raz√≥n Social de la organizaci√≥n.
            tax_system:
              type: string
              description: C√≥digo de R√©gimen Fiscal, del [cat√°logo del SAT](#tipo-de-r√©gimen).
            website:
              type: string
              description: Sitio web de la organizaci√≥n, que se utilizar√° al enviar la factura por correo electr√≥nico.
            phone:
              type: string
              description: Tel√©fono de la organizaci√≥n, que aparecer√° en el PDF de la factura.
            address:
              allOf:
                - type: object
                  description: Domicilio fiscal de la organizaci√≥n.
                - $ref: "#/components/schemas/OrganizationAddress"

    OrganizationCreateInput:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          maxLength: 100
          description: Nombre comercial de la organizaci√≥n.
    OrganizationLegalInput:
      type: object
      required:
        - name
        - legal_name
        - tax_system
        - address
      properties:
        name:
          type: string
          maxLength: 100
          description: Nombre comercial de la organizaci√≥n.
        legal_name:
          type: string
          maxLength: 100
          description: Nombre Fiscal o Raz√≥n Social de la organizaci√≥n.
        tax_system:
          type: string
          maxLength: 3
          minLength: 3
          description: C√≥digo del R√©gimen Fiscal, del [cat√°logo del SAT](#r√©gimen-fiscal).
        website:
          type: string
          description: Sitio web de la organizaci√≥n, que aparecer√° en el PDF y correos de facturas y recibos.
        support_email:
          type: string
          description: Direcci√≥n de correo electr√≥nico para aclaraciones. Aparecer√° en el PDF y correos de facturas y recibos.
        phone:
          type: string
          description: Tel√©fono de la organizaci√≥n, que aparecer√° en el PDF y correos de facturas y recibos.
        address:
          allOf:
            - type: object
              description: Domicilio fiscal de la organizaci√≥n emisora.
              required:
                - zip
                - street
                - exterior
            - $ref: "#/components/schemas/OrganizationAddress"
    OrganizationCertsInput:
      type: object
      required:
        - cer
        - key
        - password
      properties:
        cer:
          type: string
          format: binary
          description: Contenido binario del archivo con extensi√≥n `.cer` del certificado CSD.
        key:
          type: string
          format: binary
          description: Contenido binario del archivo con extensi√≥n `.key` del certificado CSD.
        password:
          type: string
          description: Contrase√±a de la llave del certificado.
    OrganizationLogoInput:
      type: object
      required:
        - file
      properties:
        file:
          type: string
          format: binary
          description: |
            Contenido binario del archivo con la imagen que se usar√° como
            logotipo. Formatos soportados:
            - jpg
            - png
            - svg
    OrganizationCustomizationInput:
      type: object
      properties:
        color:
          type: string
          format: hex
          example: #BADA55
          description: Color en representaci√≥n Hexadecimal RGB de 6 caracteres. El caracter de almohadilla (#) al inicio es opcional.
        next_folio_number:
          type: integer
          example: 123
          description: N√∫mero de folio que se asignar√° a la siguiente factura en ambiente Live (y que se incrementar√° autom√°ticamente por cada nueva factura).
        next_folio_number_test:
          type: integer
          example: 123
          description: N√∫mero de folio que se asignar√° a la siguiente factura en ambiente Test (y que se incrementar√° autom√°ticamente por cada nueva factura).
        pdf_extra:
          type: object
          description: Configura qu√© campos opcionales se queiren mostrar en el PDF. El SAT no obliga a mostrar estos campos, pero pueden activarse seg√∫n la preferencia de la organizaci√≥n.
          properties:
            codes:
              type: boolean
              default: false
              description: |
                Mostrar c√≥digos de cat√°logos del SAT junto a sus descripciones. Ejemplo: ‚ÄúKGM Kilogramo‚Äù.
            product_key:
              type: boolean
              default: false
              description: |
                Mostrar la clave de producto-servicio.
    OrganizationReceiptsInput:
      type: object
      properties:
        invoicing_period:
          type: string
          default: month
          enum:
            - day
            - week
            - month
            - two_months
          description: |
            Periodicidad con la que la empresa decide realizar una factura global (al p√∫blico en general) por todos los recibos no facturados.
        duration_days:
          type: integer
          default: 7
          description: |
            D√≠as m√°ximos para facturar por medio del portal de autofactura
            despu√©s de emitido el recibo y antes del √∫ltimo d√≠a del ‚ÄúPeriodo de
            facturaci√≥n‚Äù (`invoicing_period`). El valor `0` desactiva esta
            opci√≥n, haciendo que los recibos expiren siempre el √∫ltimo d√≠a del
            periodo.
        next_folio_number:
          type: integer
          description: N√∫mero de folio que se asignar√° al siguiente recibo creado en esta organizaci√≥n en ambiente Live.
        next_folio_number_test:
          type: integer
          description: N√∫mero de folio que se asignar√° al siguiente recibo creado en esta organizaci√≥n en ambiente Test.
        ask_address:
          type: string
          enum:
            - optional
            - hidden
            - required
          default: optional
          description: |
            Opci√≥n que define si se le debe pedir el domicilio al usuario en el sitio de autofactura. Puede tener los siguientes valores:
            - `optional`: El usuario tendr√° la opci√≥n de agregar su domicilio si as√≠ lo desea, pero no ser√° obligatorio.
            - `hidden`: El usuario no tendr√° la opci√≥n de agregar su domicilio.
            - `required`: El usuario deber√° llenar la informaci√≥n sobre su domicilio para crear su factura.
    DomainField:
      type: string
      maxLength: 50
      minLength: 4
      pattern: ^[a-z][a-z0-9-_]{2,48}[a-z0-9]$
      description: |
        Nombre del dominio. Se permiten caracteres alfanum√©ricos, s√≥lo min√∫sculas,
        gui√≥n (-) y gui√≥n bajo (_). Debe empezar con una letra y
        terminar en letra o n√∫mero.
    OrganizationDomainInput:
      type: object
      required:
        - domain
      properties:
        domain:
          $ref: "#/components/schemas/DomainField"
    OrganizationApiKeys:
      type: object
      properties:
        live_key:
          type: string
          description: Llave secreta para crear recursos para la organizaci√≥n en ambiente Live
        test_key:
          type: string
          description: Llave secreta para crear recursos para la organizaci√≥n en ambiente Test
  securitySchemes:
    "Secret Live Key":
      type: http
      scheme: bearer
      bearerFormat: sk_live_XXXXXXXXXXXX
      description: √önica por organizaci√≥n. Permite crear, obtener y administrar recursos en ambiente Live para una organizaci√≥n en espec√≠fico.
    "Secret Test Key":
      type: http
      scheme: bearer
      bearerFormat: sk_test_XXXXXXXXXXXX
      description: √önica por organizaci√≥n. Permite crear, obtener y administrar recursos en ambiente Test para una organizaci√≥n en espec√≠fico.
    "Secret User Key":
      type: http
      scheme: bearer
      bearerFormat: sk_user_XXXXXXXXXXXX
      description: √önica por cuenta. Permite crear y configurar organizaciones pertenecientes a la cuenta del usuario.
