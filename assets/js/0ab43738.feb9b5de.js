"use strict";(self.webpackChunkfacturapi_docs=self.webpackChunkfacturapi_docs||[]).push([["8589"],{5121:function(e,n,a){a.r(n),a.d(n,{frontMatter:()=>c,default:()=>h,toc:()=>d,metadata:()=>r,assets:()=>u,contentTitle:()=>o});var r=JSON.parse('{"id":"guides/customer-edit-link","title":"Enlaces de edici\xf3n de datos fiscales","description":"Facturapi te permite crear un enlace temporal para que tus clientes llenen y","source":"@site/docs/guides/customer-edit-link.mdx","sourceDirName":"guides","slug":"/guides/customer-edit-link","permalink":"/docs/guides/customer-edit-link","draft":false,"unlisted":false,"editUrl":"https://github.com/facturapi/facturapi-docs/edit/main/website/docs/guides/customer-edit-link.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Registrar y validar clientes","permalink":"/docs/guides/customers"},"next":{"title":"Productos","permalink":"/docs/guides/products"}}'),i=a(5893),t=a(65),l=a(7902),s=a(5525);let c={sidebar_position:2},o="Enlaces de edici\xf3n de datos fiscales",u={},d=[{value:"Crear un enlace de edici\xf3n para un nuevo cliente",id:"crear-un-enlace-de-edici\xf3n-para-un-nuevo-cliente",level:2},{value:"Crear un enlace de edici\xf3n para un cliente existente",id:"crear-un-enlace-de-edici\xf3n-para-un-cliente-existente",level:2},{value:"Enviar un enlace de edici\xf3n por correo electr\xf3nico",id:"enviar-un-enlace-de-edici\xf3n-por-correo-electr\xf3nico",level:2}];function p(e){let n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"enlaces-de-edici\xf3n-de-datos-fiscales",children:"Enlaces de edici\xf3n de datos fiscales"})}),"\n",(0,i.jsx)(n.p,{children:"Facturapi te permite crear un enlace temporal para que tus clientes llenen y\nguarden sus datos fiscales por s\xed mismos. Una vez guardados, sus datos fiscales\nestar\xe1n disponibles en el objeto Customer que utilizaste para crear el enlace."}),"\n",(0,i.jsx)(n.p,{children:"Un enlace de edici\xf3n de datos fiscales tiene el siguiente formato:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"https://auto.facturapi.io/tax-info/<EDIT_SECRET_KEY>\n"})}),"\n",(0,i.jsx)(n.p,{children:"El portal web donde tus clientes llenar\xe1n sus datos fiscales tendr\xe1 el\nlogotipo y colores de la organizaci\xf3n que cre\xf3 el enlace."}),"\n",(0,i.jsx)(n.p,{children:"El enlace tendr\xe1 una duraci\xf3n de 7 d\xedas, con posibilidad de renovarse generando\nun nuevo enlace en cualquier momento, sobreescribiendo el anterior."}),"\n",(0,i.jsx)(n.h2,{id:"crear-un-enlace-de-edici\xf3n-para-un-nuevo-cliente",children:"Crear un enlace de edici\xf3n para un nuevo cliente"}),"\n",(0,i.jsxs)(n.p,{children:["Para crear un enlace de edici\xf3n de datos fiscales para un nuevo cliente, simplemente\ncrea un objeto Customer pasando el query parameter ",(0,i.jsx)(n.code,{children:"createEditLink"})," como ",(0,i.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,i.jsxs)(l.Z,{groupId:"codeExamples",children:[(0,i.jsx)(s.Z,{value:"js",label:"Node.js",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const newCustomer = facturapi.customers.create({\n  email: 'email@example.com'\n}, {\n  createEditLink: true\n});\n"})})}),(0,i.jsx)(s.Z,{value:"cs",label:"C#",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'var newCustomer = facturapi.Customer.CreateAsync(new Dictionary<string, object>\n{\n  ["email"] = "email@example.com"\n}, new Dictionary<string, object>\n{\n  ["createEditLink"] = true\n});\n'})})}),(0,i.jsx)(s.Z,{value:"php",label:"PHP",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:'$newCustomer = $facturapi->Customers->create([\n  "email" => "email@example.com"\n], [\n  "createEditLink" => true\n]);\n'})})}),(0,i.jsx)(s.Z,{value:"curl",label:"cURL",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl https://www.facturapi.io/v2/customers?createEditLink=true \\\n  -H "Authorization Bearer sk_test_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n        "email": "email@example.com"\n    }\'\n'})})})]}),"\n",(0,i.jsxs)(n.p,{children:["Al crear un nuevo cliente con el query parameter ",(0,i.jsx)(n.code,{children:"createEditLink"})," como `true, todos los campos del objeto Customer se vuelven opcionales."]}),"\n",(0,i.jsx)(n.p,{children:"El objeto de respuesta incluir\xe1 los siguientes campos:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"edit_link"}),": El enlace temporal para que el cliente edite sus datos fiscales."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"edit_link_expires_at"}),": La fecha de expiraci\xf3n del enlace. 7 d\xedas despu\xe9s de la creaci\xf3n del enlace."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "67bf1239b15b44fb9269e6a8",\n  // ...rest of the customer object\n  "edit_link": "https://auto.facturapi.io/tax-info/EDIT_SECRET_KEY",\n  "edit_link_expires_at": "2025-02-26T23:59:59Z"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Una vez que el cliente haya llenado sus datos fiscales, puedes recuperar el objeto Customer actualizado para acceder a la nueva informaci\xf3n."}),"\n",(0,i.jsxs)(l.Z,{groupId:"codeExamples",children:[(0,i.jsx)(s.Z,{value:"js",label:"Node.js",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const customer = await facturapi.customers.retrieve('67bf1239b15b44fb9269e6a8');\n"})})}),(0,i.jsx)(s.Z,{value:"cs",label:"C#",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'var customer = await facturapi.Customer.RetrieveAsync("67bf1239b15b44fb9269e6a8");\n'})})}),(0,i.jsx)(s.Z,{value:"php",label:"PHP",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:'$customer = $facturapi->Customers->retrieve("67bf1239b15b44fb9269e6a8");\n'})})}),(0,i.jsx)(s.Z,{value:"curl",label:"cURL",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl https://www.facturapi.io/v2/customers/67bf1239b15b44fb\n  -H "Authorization Bearer sk_test_API_KEY"\n'})})})]}),"\n",(0,i.jsx)(n.p,{children:"Respuesta: Objeto Customer actualizado con la nueva informaci\xf3n fiscal."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "67bf1239b15b44fb9269e6a8",\n  "legal_name": "Dunder Mifflin",\n  "tax_id": "ABC101010111",\n  "tax_system": "601",\n  "email": "email@example.com",\n  "address": {\n    "country": "MEX",\n    "state": "Sonora",\n    "city": "Huatabampo",\n    "zip": "85900"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"crear-un-enlace-de-edici\xf3n-para-un-cliente-existente",children:"Crear un enlace de edici\xf3n para un cliente existente"}),"\n",(0,i.jsxs)(n.p,{children:["Si ya tienes un cliente creado y deseas generar un enlace de edici\xf3n para que\nactualice sus datos fiscales, simplemente actualiza el cliente pasando el query\nparameter ",(0,i.jsx)(n.code,{children:"createEditLink"})," como ",(0,i.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Esto tambi\xe9n es \xfatil cuando deseas renovar el enlace para un cliente existente,\nrevocando el enlace anterior."}),"\n",(0,i.jsxs)(l.Z,{groupId:"codeExamples",children:[(0,i.jsx)(s.Z,{value:"js",label:"Node.js",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const customer = await facturapi.customers.update('67bf1239b15b44fb9269e6a8', {}, {\n  createEditLink: true\n});\n"})})}),(0,i.jsx)(s.Z,{value:"cs",label:"C#",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'var customer = await facturapi.Customer.UpdateAsync("67bf1239b15b44fb9269e6a8", new Dictionary<string, object>(), new Dictionary<string, object>\n{\n  ["createEditLink"] = true\n});\n'})})}),(0,i.jsx)(s.Z,{value:"php",label:"PHP",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:'$customer = $facturapi->Customers->update("67bf1239b15b44fb9269e6a8", [], [\n  "createEditLink" => true\n]);\n'})})}),(0,i.jsx)(s.Z,{value:"curl",label:"cURL",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl https://www.facturapi.io/v2/customers/67bf1239b15b44fb9269e6a8?createEditLink=true \\\n  -H "Authorization Bearer sk_test_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -X PUT\n'})})})]}),"\n",(0,i.jsxs)(n.p,{children:["El objeto de respuesta incluir\xe1 el enlace en el campo ",(0,i.jsx)(n.code,{children:"edit_link"})," y la fecha de expiraci\xf3n en ",(0,i.jsx)(n.code,{children:"edit_link_expires_at"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "67bf1239b15b44fb9269e6a8",\n  // ...rest of the customer object\n  "edit_link": "https://auto.facturapi.io/tax-info/EDIT_SECRET_KEY",\n  "edit_link_expires_at": "2025-02-26T23:59:59Z"\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"enviar-un-enlace-de-edici\xf3n-por-correo-electr\xf3nico",children:"Enviar un enlace de edici\xf3n por correo electr\xf3nico"}),"\n",(0,i.jsxs)(n.p,{children:["Si deseas enviar el enlace de edici\xf3n por correo electr\xf3nico al cliente, puedes\nhacerlo utilizando el m\xe9todo ",(0,i.jsx)(n.code,{children:"sendEditLinkByEmail"}),"."]}),"\n",(0,i.jsxs)(l.Z,{groupId:"codeExamples",children:[(0,i.jsx)(s.Z,{value:"js",label:"Node.js",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"await facturapi.customers.sendEditLinkByEmail('67bf1239b15b44fb9269e6a8', {\n  email: 'email@example.com' // Opcional, si no se proporciona, se usar\xe1 el correo electr\xf3nico del cliente\n});\n"})})}),(0,i.jsx)(s.Z,{value:"cs",label:"C#",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'await facturapi.Customer.SendEditLinkByEmailAsync("67bf1239b15b44fb9269e6a8", new Dictionary<string, object>\n{\n  ["email"] = "email@example.com" // Opcional, si no se proporciona, se usar\xe1 el correo electr\xf3nico del cliente\n});\n'})})}),(0,i.jsx)(s.Z,{value:"php",label:"PHP",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:'$customer = $facturapi->Customers->sendEditLinkByEmail("67bf1239b15b44fb9269e6a8", [\n  "email" => "email@example.com" // Opcional, si no se proporciona, se usar\xe1 el correo electr\xf3nico del cliente\n]);\n'})})}),(0,i.jsx)(s.Z,{value:"curl",label:"cURL",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl https://www.facturapi.io/v2/customers/67bf1239b15b44fb9269e6a8/email-edit-link \\\n  -H "Authorization Bearer sk_test_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -X POST\n'})})})]})]})}function h(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},5525:function(e,n,a){a.d(n,{Z:()=>t});var r=a(5893);a(7294);var i=a(7026);function t({children:e,hidden:n,className:a}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,i.Z)("tabItem_Ymn6",a),hidden:n,children:e})}},7902:function(e,n,a){a.d(n,{Z:()=>j});var r=a(5893),i=a(7294),t=a(7026),l=a(9599),s=a(6550),c=a(2e3),o=a(4520),u=a(8341),d=a(6009);function p(e){return i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){let{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h({value:e,tabValues:n}){return n.some(n=>n.value===e)}var m=a(7227);function f({className:e,block:n,selectedValue:a,selectValue:i,tabValues:s}){let c=[],{blockElementScrollPositionUntilNextRender:o}=(0,l.o5)(),u=e=>{let n=e.currentTarget,r=s[c.indexOf(n)].value;r!==a&&(o(n),i(r))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{let a=c.indexOf(e.currentTarget)+1;n=c[a]??c[0];break}case"ArrowLeft":{let a=c.indexOf(e.currentTarget)-1;n=c[a]??c[c.length-1]}}n?.focus()};return(0,r.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.Z)("tabs",{"tabs--block":n},e),children:s.map(({value:e,label:n,attributes:i})=>(0,r.jsx)("li",{role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,ref:e=>{c.push(e)},onKeyDown:d,onClick:u,...i,className:(0,t.Z)("tabs__item","tabItem_LNqP",i?.className,{"tabs__item--active":a===e}),children:n??e},e))})}function b({lazy:e,children:n,selectedValue:a}){let l=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){let e=l.find(e=>e.props.value===a);return e?(0,i.cloneElement)(e,{className:(0,t.Z)("margin-top--md",e.props.className)}):null}return(0,r.jsx)("div",{className:"margin-top--md",children:l.map((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==a}))})}function x(e){let n=function(e){let{defaultValue:n,queryString:a=!1,groupId:r}=e,t=function(e){let{values:n,children:a}=e;return(0,i.useMemo)(()=>{let e=n??p(a).map(({props:{value:e,label:n,attributes:a,default:r}})=>({value:e,label:n,attributes:a,default:r})),r=(0,u.lx)(e,(e,n)=>e.value===n.value);if(r.length>0)throw Error(`Docusaurus error: Duplicate values "${r.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[n,a])}(e),[l,m]=(0,i.useState)(()=>(function({defaultValue:e,tabValues:n}){if(0===n.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!h({value:e,tabValues:n}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let a=n.find(e=>e.default)??n[0];if(!a)throw Error("Unexpected error: 0 tabValues");return a.value})({defaultValue:n,tabValues:t})),[f,b]=function({queryString:e=!1,groupId:n}){let a=(0,s.k6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,o._X)(r),(0,i.useCallback)(e=>{if(!r)return;let n=new URLSearchParams(a.location.search);n.set(r,e),a.replace({...a.location,search:n.toString()})},[r,a])]}({queryString:a,groupId:r}),[x,j]=function({groupId:e}){let n=e?`docusaurus.tab.${e}`:null,[a,r]=(0,d.Nk)(n);return[a,(0,i.useCallback)(e=>{n&&r.set(e)},[n,r])]}({groupId:r}),v=(()=>{let e=f??x;return h({value:e,tabValues:t})?e:null})();return(0,c.Z)(()=>{v&&m(v)},[v]),{selectedValue:l,selectValue:(0,i.useCallback)(e=>{if(!h({value:e,tabValues:t}))throw Error(`Can't select invalid tab value=${e}`);m(e),b(e),j(e)},[b,j,t]),tabValues:t}}(e);return(0,r.jsxs)("div",{className:(0,t.Z)("tabs-container","tabList__CuJ"),children:[(0,r.jsx)(f,{...n,...e}),(0,r.jsx)(b,{...n,...e})]})}function j(e){let n=(0,m.Z)();return(0,r.jsx)(x,{...e,children:p(e.children)},String(n))}},65:function(e,n,a){a.d(n,{Z:()=>s,a:()=>l});var r=a(7294);let i={},t=r.createContext(i);function l(e){let n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);