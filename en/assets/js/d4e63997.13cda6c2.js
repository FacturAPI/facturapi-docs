"use strict";(self.webpackChunkfacturapi_docs=self.webpackChunkfacturapi_docs||[]).push([["205"],{9378:function(e,t,n){n.r(t),n.d(t,{frontMatter:()=>o,default:()=>p,toc:()=>d,metadata:()=>r,assets:()=>u,contentTitle:()=>c});var r=JSON.parse('{"id":"guides/customer-edit-link","title":"Customer edit links","description":"Facturapi allows you to create a temporary link for your customers to fill in","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/guides/customer-edit-link.mdx","sourceDirName":"guides","slug":"/guides/customer-edit-link","permalink":"/en/docs/guides/customer-edit-link","draft":false,"unlisted":false,"editUrl":"https://github.com/facturapi/facturapi-docs/edit/main/website/docs/guides/customer-edit-link.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Customer registration and validation","permalink":"/en/docs/guides/customers"},"next":{"title":"Products","permalink":"/en/docs/guides/products"}}'),a=n(5893),i=n(65),s=n(7902),l=n(5525);let o={sidebar_position:2},c="Customer edit links",u={},d=[{value:"Create an edit link for a new customer",id:"create-an-edit-link-for-a-new-customer",level:2},{value:"Create an edit link for an existing customer",id:"create-an-edit-link-for-an-existing-customer",level:2}];function h(e){let t={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"customer-edit-links",children:"Customer edit links"})}),"\n",(0,a.jsx)(t.p,{children:"Facturapi allows you to create a temporary link for your customers to fill in\nand save their tax information by themselves. Once saved, their tax information\nwill be available in the Customer object you used to create the link."}),"\n",(0,a.jsx)(t.p,{children:"A tax information edit link has the following format:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"https://auto.facturapi.io/tax-info/<EDIT_SECRET_KEY>\n"})}),"\n",(0,a.jsx)(t.p,{children:"The web portal where your customers will fill in their tax information will\nhave the logo and colors of the organization that created the link."}),"\n",(0,a.jsx)(t.p,{children:"The link will last for 7 days, with the possibility of renewal by generating a\nnew link at any time, overwriting the previous one."}),"\n",(0,a.jsx)(t.h2,{id:"create-an-edit-link-for-a-new-customer",children:"Create an edit link for a new customer"}),"\n",(0,a.jsxs)(t.p,{children:["To create a tax information edit link for a new customer, simply create a\nCustomer object passing the query parameter ",(0,a.jsx)(t.code,{children:"createEditLink"})," as ",(0,a.jsx)(t.code,{children:"true"}),"."]}),"\n",(0,a.jsxs)(s.Z,{groupId:"codeExamples",children:[(0,a.jsx)(l.Z,{value:"js",label:"Node.js",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"const newCustomer = facturapi.customers.create({\n  email: 'email@example.com'\n}, {\n  createEditLink: true\n});\n"})})}),(0,a.jsx)(l.Z,{value:"cs",label:"C#",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-csharp",children:'var newCustomer = facturapi.Customer.CreateAsync(new Dictionary<string, object>\n{\n  ["email"] = "email@example.com"\n}, new Dictionary<string, object>\n{\n  ["createEditLink"] = true\n});\n'})})}),(0,a.jsx)(l.Z,{value:"php",label:"PHP",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-php",children:'$newCustomer = $facturapi->Customers->create([\n  "email" => "email@example.com"\n], [\n  "createEditLink" => true\n]);\n'})})}),(0,a.jsx)(l.Z,{value:"curl",label:"cURL",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:'curl https://www.facturapi.io/v2/customers?createEditLink=true \\\n  -H "Authorization Bearer sk_test_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n        "email": "email@example.com"\n    }\'\n'})})})]}),"\n",(0,a.jsxs)(t.p,{children:["When creating a new customer with the query parameter ",(0,a.jsx)(t.code,{children:"createEditLink"})," as\n",(0,a.jsx)(t.code,{children:"true"}),", all fields of the Customer object become optional."]}),"\n",(0,a.jsx)(t.p,{children:"The response object will include the following fields:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"edit_link"}),": The temporary link for the customer to edit their tax\ninformation."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"edit_link_expires_at"}),": The expiration date of the link. 7 days after the\nlink creation."]}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",children:'{\n  "id": "67bf1239b15b44fb9269e6a8",\n  // ...rest of the customer object\n  "edit_link": "https://auto.facturapi.io/tax-info/EDIT_SECRET_KEY",\n  "edit_link_expires_at": "2025-02-26T23:59:59Z"\n}\n'})}),"\n",(0,a.jsx)(t.p,{children:"Once the customer has filled in their tax information, you can retrieve the\nupdated Customer object to access the new information."}),"\n",(0,a.jsxs)(s.Z,{groupId:"codeExamples",children:[(0,a.jsx)(l.Z,{value:"js",label:"Node.js",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"const customer = await facturapi.customers.retrieve('67bf1239b15b44fb9269e6a8');\n"})})}),(0,a.jsx)(l.Z,{value:"cs",label:"C#",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-csharp",children:'var customer = await facturapi.Customer.RetrieveAsync("67bf1239b15b44fb9269e6a8");\n'})})}),(0,a.jsx)(l.Z,{value:"php",label:"PHP",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-php",children:'$customer = $facturapi->Customers->retrieve("67bf1239b15b44fb9269e6a8");\n'})})}),(0,a.jsx)(l.Z,{value:"curl",label:"cURL",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:'curl https://www.facturapi.io/v2/customers/67bf1239b15b44fb\n  -H "Authorization Bearer sk_test_API_KEY"\n'})})})]}),"\n",(0,a.jsx)(t.p,{children:"Response: Updated customer object with the new tax information."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",children:'{\n  "id": "67bf1239b15b44fb9269e6a8",\n  "legal_name": "Dunder Mifflin",\n  "tax_id": "ABC101010111",\n  "tax_system": "601",\n  "email": "email@example.com",\n  "address": {\n    "country": "MEX",\n    "state": "Sonora",\n    "city": "Huatabampo",\n    "zip": "85900"\n  }\n}\n'})}),"\n",(0,a.jsx)(t.h2,{id:"create-an-edit-link-for-an-existing-customer",children:"Create an edit link for an existing customer"}),"\n",(0,a.jsxs)(t.p,{children:["If you already have a created customer and want to generate an edit link for\nthem to update their tax information, simply update the customer passing the\nquery parameter ",(0,a.jsx)(t.code,{children:"createEditLink"})," as ",(0,a.jsx)(t.code,{children:"true"}),"."]}),"\n",(0,a.jsx)(t.p,{children:"This is also useful when you want to renew the link for an existing customer,\nrevoking the old link."}),"\n",(0,a.jsxs)(s.Z,{groupId:"codeExamples",children:[(0,a.jsx)(l.Z,{value:"js",label:"Node.js",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"const customer = await facturapi.customers.update('67bf1239b15b44fb9269e6a8', {}, {\n  createEditLink: true\n});\n"})})}),(0,a.jsx)(l.Z,{value:"cs",label:"C#",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-csharp",children:'var customer = await facturapi.Customer.UpdateAsync("67bf1239b15b44fb9269e6a8", new Dictionary<string, object>(), new Dictionary<string, object>\n{\n  ["createEditLink"] = true\n});\n'})})}),(0,a.jsx)(l.Z,{value:"php",label:"PHP",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-php",children:'$customer = $facturapi->Customers->update("67bf1239b15b44fb9269e6a8", [], [\n  "createEditLink" => true\n]);\n'})})}),(0,a.jsx)(l.Z,{value:"curl",label:"cURL",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:'curl https://www.facturapi.io/v2/customers/67bf1239b15b44fb9269e6a8?createEditLink=true \\\n  -H "Authorization Bearer sk_test_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -X PUT\n'})})})]}),"\n",(0,a.jsxs)(t.p,{children:["The response object will include the link in the ",(0,a.jsx)(t.code,{children:"edit_link"})," field and the\nexpiration date in ",(0,a.jsx)(t.code,{children:"edit_link_expires_at"}),"."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",children:'{\n  "id": "67bf1239b15b44fb9269e6a8",\n  // ...rest of the customer object\n  "edit_link": "https://auto.facturapi.io/tax-info/EDIT_SECRET_KEY",\n  "edit_link_expires_at": "2025-02-26T23:59:59Z"\n}\n'})})]})}function p(e={}){let{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},5525:function(e,t,n){n.d(t,{Z:()=>i});var r=n(5893);n(7294);var a=n(7026);function i({children:e,hidden:t,className:n}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,a.Z)("tabItem_Ymn6",n),hidden:t,children:e})}},7902:function(e,t,n){n.d(t,{Z:()=>j});var r=n(5893),a=n(7294),i=n(7026),s=n(9599),l=n(6550),o=n(2e3),c=n(4520),u=n(8341),d=n(6009);function h(e){return a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){let{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p({value:e,tabValues:t}){return t.some(t=>t.value===e)}var m=n(7227);function f({className:e,block:t,selectedValue:n,selectValue:a,tabValues:l}){let o=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.o5)(),u=e=>{let t=e.currentTarget,r=l[o.indexOf(t)].value;r!==n&&(c(t),a(r))},d=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{let n=o.indexOf(e.currentTarget)+1;t=o[n]??o[0];break}case"ArrowLeft":{let n=o.indexOf(e.currentTarget)-1;t=o[n]??o[o.length-1]}}t?.focus()};return(0,r.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":t},e),children:l.map(({value:e,label:t,attributes:a})=>(0,r.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{o.push(e)},onKeyDown:d,onClick:u,...a,className:(0,i.Z)("tabs__item","tabItem_LNqP",a?.className,{"tabs__item--active":n===e}),children:t??e},e))})}function x({lazy:e,children:t,selectedValue:n}){let s=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){let e=s.find(e=>e.props.value===n);return e?(0,a.cloneElement)(e,{className:(0,i.Z)("margin-top--md",e.props.className)}):null}return(0,r.jsx)("div",{className:"margin-top--md",children:s.map((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==n}))})}function b(e){let t=function(e){let{defaultValue:t,queryString:n=!1,groupId:r}=e,i=function(e){let{values:t,children:n}=e;return(0,a.useMemo)(()=>{let e=t??h(n).map(({props:{value:e,label:t,attributes:n,default:r}})=>({value:e,label:t,attributes:n,default:r})),r=(0,u.lx)(e,(e,t)=>e.value===t.value);if(r.length>0)throw Error(`Docusaurus error: Duplicate values "${r.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[t,n])}(e),[s,m]=(0,a.useState)(()=>(function({defaultValue:e,tabValues:t}){if(0===t.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:t}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let n=t.find(e=>e.default)??t[0];if(!n)throw Error("Unexpected error: 0 tabValues");return n.value})({defaultValue:t,tabValues:i})),[f,x]=function({queryString:e=!1,groupId:t}){let n=(0,l.k6)(),r=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,c._X)(r),(0,a.useCallback)(e=>{if(!r)return;let t=new URLSearchParams(n.location.search);t.set(r,e),n.replace({...n.location,search:t.toString()})},[r,n])]}({queryString:n,groupId:r}),[b,j]=function({groupId:e}){let t=e?`docusaurus.tab.${e}`:null,[n,r]=(0,d.Nk)(t);return[n,(0,a.useCallback)(e=>{t&&r.set(e)},[t,r])]}({groupId:r}),g=(()=>{let e=f??b;return p({value:e,tabValues:i})?e:null})();return(0,o.Z)(()=>{g&&m(g)},[g]),{selectedValue:s,selectValue:(0,a.useCallback)(e=>{if(!p({value:e,tabValues:i}))throw Error(`Can't select invalid tab value=${e}`);m(e),x(e),j(e)},[x,j,i]),tabValues:i}}(e);return(0,r.jsxs)("div",{className:(0,i.Z)("tabs-container","tabList__CuJ"),children:[(0,r.jsx)(f,{...t,...e}),(0,r.jsx)(x,{...t,...e})]})}function j(e){let t=(0,m.Z)();return(0,r.jsx)(b,{...e,children:h(e.children)},String(t))}},65:function(e,t,n){n.d(t,{Z:()=>l,a:()=>s});var r=n(7294);let a={},i=r.createContext(a);function s(e){let t=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);